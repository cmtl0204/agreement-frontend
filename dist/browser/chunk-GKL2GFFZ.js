import{a as jt,b as Yt}from"./chunk-YSMGJQC4.js";import{b as wt}from"./chunk-LHPWVR7O.js";import{a as Kt,b as qt}from"./chunk-Y6GVBF7F.js";import{d as Bt,e as Mt}from"./chunk-CLOQCT5C.js";import{A as Ft,Aa as Ht,B as Ie,C as we,Ga as he,Ha as Gt,Ja as Ut,Ka as Wt,La as be,Q as Xe,R as It,Ya as zt,ba as Pt,fa as kt,ha as z,i as Ae,ia as te,ja as ie,k as le,ka as ne,m as Te,n as ue,na as Vt,o as At,p as ee,pa as oe,q as Tt,qa as Nt,r as ge,ra as Ze,t as ye,ta as et,ua as Rt,v as Fe,va as De,w as Ce,wa as Ot,y as yt,za as $t}from"./chunk-OY72BBVG.js";import{j as Z,k as St,m as fe,n as Dt}from"./chunk-GFXZWTUR.js";import{A as pe,Aa as Lt,Ba as Oe,D as Ct,Da as W,E as se,H as Ne,I as ft,J as lt,K as at,L,M as S,N as A,O as Q,P as B,Q as ht,S as X,T as Ye,ba as de,ca as Je,e as je,ea as bt,fa as Le,ga as w,ia as me,ja as Be,k as R,ka as vt,ma as Se,na as Re,o as H,r as G,s as J,u as ae,ua as _e,v as U,va as xt,wa as Qe,x as gt,xa as Et,z as ce}from"./chunk-ODTB3GIQ.js";import{Aa as E,Ba as v,Ca as o,E as We,H as _,J as O,Ja as Ue,K as ze,La as p,Ma as D,Mb as Ve,Na as C,O as h,Oa as re,Ob as qe,P as b,Pa as dt,Qa as k,Ra as V,Rb as rt,Sa as N,Wa as q,Xa as Ke,_ as r,eb as F,fb as ve,gb as P,ja as d,ka as j,la as c,oa as K,p as pt,pa as $,qa as g,ra as I,sa as T,ta as y,tb as _t,ua as s,va as m,w as Ee,wa as u,yb as Y,zb as ut}from"./chunk-EUOB27Q6.js";var mi=e=>({enabled:e});function ci(e,i){if(e&1&&(s(0,"div",13)(1,"h1"),p(2),m()()),e&2){let t=o();r(2),D(t.BreadcrumbEnum.AGREEMENTS)}}function pi(e,i){if(e&1&&(s(0,"th",14),p(1),u(2,"p-sortIcon",16),m()),e&2){let t=i.$implicit;c("pSortableColumn",t.field),r(),C(" ",t.header," "),r(),c("field",t.field)}}function di(e,i){if(e&1&&(s(0,"tr"),T(1,pi,3,3,"th",14,I),s(3,"th",15),p(4),m()()),e&2){let t=i.$implicit,n=o();r(),y(t),r(3),C(" ",n.TableEnum.ACTIONS," ")}}function _i(e,i){if(e&1&&p(0),e&2){let t=o(2).$implicit,n=o().$implicit;C(" ",n[t.field].unit.name," ")}}function ui(e,i){if(e&1&&p(0),e&2){let t=o(2).$implicit,n=o().$implicit;C(" ",n[t.field].state.name," ")}}function gi(e,i){if(e&1&&d(0,_i,1,1)(1,ui,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="administrator"?0:t==="agreementState"?1:-1)}}function Ci(e,i){if(e&1&&(p(0),F(1,"customFormatDate")),e&2){let t=o(4).$implicit;C(" ",ve(1,1,t.subscribedAt)," ")}}function fi(e,i){if(e&1&&d(0,Ci,2,3),e&2){let t=o(3).$implicit;g(0,t.subscribedAt?0:-1)}}function hi(e,i){if(e&1&&(p(0),F(1,"customFormatDate")),e&2){let t=o(4).$implicit;C(" ",ve(1,1,t.endedAt)," ")}}function bi(e,i){e&1&&p(0," Indefinido ")}function vi(e,i){if(e&1&&d(0,hi,2,3)(1,bi,1,0),e&2){let t=o(3).$implicit;g(0,t.endedAt?0:1)}}function xi(e,i){if(e&1&&(p(0),F(1,"yesNo")),e&2){let t=o(3).$implicit;C(" ",ve(1,1,t.isFinancing)," ")}}function Ei(e,i){e&1&&u(0,"p-tag",19)}function Li(e,i){e&1&&u(0,"p-tag",20)}function Si(e,i){if(e&1&&d(0,Ei,1,0,"p-tag",19)(1,Li,1,0),e&2){let t=o(3).$implicit;g(0,t.enabled?0:1)}}function Ai(e,i){if(e&1&&p(0),e&2){let t=o(2).$implicit,n=o().$implicit;C(" ",n[t.field]," ")}}function Ti(e,i){if(e&1&&d(0,fi,1,1)(1,vi,2,1)(2,xi,2,3)(3,Si,2,1)(4,Ai,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="subscribedAt"?0:t==="endedAt"?1:t==="isFinancing"?2:t==="enabled"?3:4)}}function yi(e,i){if(e&1&&(s(0,"td"),d(1,gi,2,1)(2,Ti,5,1),m()),e&2){let t=i.$implicit,n=o().$implicit;r(),g(1,n[t.field]!=null&&n[t.field].id?1:-1),r(),g(2,n[t.field]!=null&&n[t.field].id?-1:2)}}function Fi(e,i){if(e&1){let t=E();s(0,"tr",17),T(1,yi,3,2,"td",null,I),s(3,"td",15)(4,"p-button",18),v("click",function(){let a=h(t).$implicit,l=o();return b(l.selectItem(a))}),m()()()}if(e&2){let t=i.$implicit,n=i.columns,a=i.rowIndex,l=o();c("pSelectableRow",t)("pSelectableRowIndex",a)("ngClass",Ke(4,mi,!t.enabled)),r(),y(n),r(3),c("icon",l.PrimeIcons.ELLIPSIS_V)}}function Ii(e,i){if(e&1&&(s(0,"tr")(1,"td"),p(2),m()()),e&2){let t=i.$implicit,n=o();r(),j("colspan",t.length),r(),C(" ",n.messageService.paginatorNoRecordsFound," ")}}function wi(e,i){}function Di(e,i){if(e&1&&u(0,"app-view",12),e&2){let t=o();c("id",t.selectedItem.id)}}var Qt=(()=>{let i=class i{constructor(){this.authService=_(W),this.coreService=_(G),this.agreementsHttpService=_(Re),this.agreementsService=_(gt),this.router=_(qe),this.breadcrumbService=_(ae),this.PrimeIcons=R,this.IconButtonActionEnum=A,this.SeverityButtonActionEnum=Q,this.LabelButtonActionEnum=S,this.BreadcrumbEnum=B,this.TableEnum=X,this.messageService=_(J),this.messageDialogService=_(U),this.buttonActions=[],this.isButtonActions=!1,this.columns=[],this.search=new ee(""),this.items=[],this.isVisibleAgreementView=!1,this.breadcrumbService.setItems([{label:B.AGREEMENTS}]),this.buildButtonActions(),this.buildColumns(),this.search.valueChanges.pipe(Ee(500)).subscribe(n=>{this.findAgreements()})}ngOnInit(){this.findAgreements()}findAgreements(){this.authService.role.code===at.NATIONAL_SUPERVISOR&&this.agreementsHttpService.findNationalAgreementsByOrigin().subscribe(n=>{this.items=n}),this.authService.role.code===at.INTERNATIONAL_SUPERVISOR&&this.agreementsHttpService.findInternationalAgreementsByOrigin().subscribe(n=>{this.items=n})}buildColumns(){this.columns=[{field:"number",header:de.number},{field:"internalNumber",header:de.internalNumber},{field:"name",header:de.name},{field:"administrator",header:bt.header},{field:"agreementState",header:Je.state},{field:"subscribedAt",header:de.subscribedAt},{field:"endedAt",header:de.endedAt},{field:"isFinancing",header:de.isFinancing},{field:"enabled",header:de.enabled}]}buildButtonActions(){this.buttonActions=[{id:L.COMPLETE,label:S.COMPLETE,icon:A.COMPLETE,command:()=>{this.selectedItem?.id&&this.redirectCompleteForm(this.selectedItem)}},{id:L.AGREEMENT,label:S.AGREEMENT,icon:A.AGREEMENT,command:()=>{this.selectedItem?.id&&this.redirectEditForm(this.selectedItem.id)}},{id:L.AGREEMENT_LOG,label:S.AGREEMENT_LOG,icon:A.AGREEMENT_LOG,command:()=>{this.selectedItem?.id&&this.redirectAgreementLogForm(this.selectedItem.id)}}]}validateButtonActions(n){this.buildButtonActions(),n.enabled&&this.buttonActions.splice(this.buttonActions.findIndex(a=>a.id===L.COMPLETE),1),n.enabled||(this.buttonActions.splice(this.buttonActions.findIndex(a=>a.id===L.AGREEMENT),1),this.buttonActions.splice(this.buttonActions.findIndex(a=>a.id===L.AGREEMENT_LOG),1),this.buttonActions.splice(this.buttonActions.findIndex(a=>a.id===L.AGREEMENT_TRACKING_PERIOD),1),this.buttonActions.splice(this.buttonActions.findIndex(a=>a.id===L.AGREEMENT_CLOSING_MANAGEMENT_SUPERVISION),1)),n.initialState?.code===Ne.CURRENT&&this.buttonActions.push({id:L.AGREEMENT_TRACKING_PERIOD,label:S.AGREEMENT_TRACKING_PERIOD,icon:A.AGREEMENT_TRACKING_PERIOD,command:()=>{this.selectedItem?.id&&this.redirectTrackingLogList(this.selectedItem.id)}},{id:L.AGREEMENT_CLOSING_MANAGEMENT_SUPERVISION,label:S.AGREEMENT_CLOSING_MANAGEMENT_SUPERVISION,icon:A.AGREEMENT_CLOSING_MANAGEMENT_SUPERVISION,command:()=>{this.selectedItem?.id&&this.redirectAgreementTerminationList(this.selectedItem.id)}}),n.initialState?.code===Ne.CLOSING_PROCESS&&this.buttonActions.push({id:L.AGREEMENT_CLOSING_MANAGEMENT_SUPERVISION,label:S.AGREEMENT_CLOSING_MANAGEMENT_SUPERVISION,icon:A.AGREEMENT_CLOSING_MANAGEMENT_SUPERVISION,command:()=>{this.selectedItem?.id&&this.redirectAgreementTerminationList(this.selectedItem.id)}}),n.initialState?.code===Ne.CLOSED&&this.buttonActions.push({id:L.AGREEMENT_TRACKING_CLOSED,label:S.AGREEMENT_TRACKING_CLOSED,icon:A.AGREEMENT_TRACKING_CLOSED,command:()=>{this.selectedItem?.id&&this.redirectTrackingClosed(this.selectedItem.id)}})}redirectCreateForm(){this.agreementsService.clearAgreement(),this.router.navigate(["/core/agreements","register"])}redirectCompleteForm(n){this.router.navigate(["/core/agreements","register"])}redirectEditForm(n){this.router.navigate(["/core/agreements/update",n])}redirectViewAgreement(){this.isVisibleAgreementView=!0}redirectAgreementLogForm(n){this.router.navigate(["/core/agreements/log",n])}redirectTrackingLogList(n){this.router.navigate([`/core/${this.authService.role.code}/period-list`,n])}redirectTrackingClosed(n){this.router.navigate([`/core/${this.authService.role.code}/closed/agreement-tracking`,n])}remove(n){}paginate(n){}selectItem(n){this.agreementsHttpService.findOne(n.id).subscribe(a=>{this.isButtonActions=!0,this.selectedItem=a,this.validateButtonActions(a),this.agreementsService.agreement=a})}redirectAgreementTerminationList(n){this.router.navigate([`/core/${this.authService.role.code}/agreement-termination-list`,n],{queryParams:{type:"closing"}})}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=O({type:i,selectors:[["app-agreement-list"]],decls:14,vars:14,consts:[["dt",""],[1,"p-toolbar-group-left"],[3,"click","icon","label","loading","severity"],[1,"p-toolbar-group-right"],["dataKey","id","styleClass","p-datatable-striped","paginatorPosition","both",3,"value","columns","paginator","rows","loading"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[3,"isHide","buttonActions","enabled"],["header","Convenio",3,"visibleChange","visible","modal"],[3,"id"],[1,"flex"],[3,"pSortableColumn"],[1,"text-center"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex","ngClass"],[3,"click","icon"],["severity","info","value","Registrado"],["severity","danger","value","En Proceso"]],template:function(a,l){if(a&1){let x=E();s(0,"p-toolbar")(1,"div",1)(2,"p-button",2),v("click",function(){return h(x),b(l.redirectCreateForm())}),m()(),u(3,"div",3),m(),s(4,"p-table",4,0),d(6,ci,3,1,"ng-template",5)(7,di,5,1,"ng-template",6)(8,Fi,5,6,"ng-template",7)(9,Ii,3,2,"ng-template",8)(10,wi,0,0,"ng-template",9),m(),s(11,"app-button-action",10),v("isHide",function(f){return h(x),b(l.isButtonActions=!f)}),m(),s(12,"p-dialog",11),N("visibleChange",function(f){return h(x),V(l.isVisibleAgreementView,f)||(l.isVisibleAgreementView=f),b(f)}),d(13,Di,1,1,"app-view",12),m()}a&2&&(r(2),c("icon",l.IconButtonActionEnum.CREATE)("label",l.LabelButtonActionEnum.CREATE_AGREEMENT)("loading",l.coreService.isLoading)("severity",l.SeverityButtonActionEnum.CREATE),r(2),c("value",l.items)("columns",l.columns)("paginator",!0)("rows",10)("loading",l.coreService.isLoading),r(7),c("buttonActions",l.buttonActions)("enabled",l.isButtonActions),r(),k("visible",l.isVisibleAgreementView),c("modal",!0),r(),g(13,l.selectedItem&&l.isVisibleAgreementView?13:-1))},dependencies:[_t,be,H,oe,Z,z,te,ne,ie,$t,he,Kt,Lt,Oe],styles:[".enabled[_ngcontent-%COMP%]{background-color:var(--red-200)}"]});let e=i;return e})();function Bi(e,i){if(e&1&&(s(0,"div",10)(1,"h2"),p(2),F(3,"customFormatDate"),F(4,"customFormatDate"),m()()),e&2){let t=o();r(2),dt(" ",t.period.name,": ",ve(3,3,t.period.startedAt)," - ",ve(4,5,t.period.endedAt)," ")}}function Mi(e,i){if(e&1&&(s(0,"th",11),p(1),u(2,"p-sortIcon",12),m()),e&2){let t=i.$implicit;c("pSortableColumn",t.field),r(),C(" ",t.header," "),r(),c("field",t.field)}}function Pi(e,i){if(e&1&&(s(0,"tr"),T(1,Mi,3,3,"th",11,I),m()),e&2){let t=i.$implicit;r(),y(t)}}function ki(e,i){if(e&1&&(u(0,"br"),s(1,"b"),p(2,"Comentario: "),m(),p(3)),e&2){let t=o(4).$implicit;r(3),C("",t.observation," ")}}function Vi(e,i){if(e&1&&(p(0),d(1,ki,4,1)),e&2){let t=o(3).$implicit;re(" ",t.user.name," ",t.user.lastname," "),r(),g(1,t.observation?1:-1)}}function Ni(e,i){if(e&1&&p(0),e&2){let t=o(3).$implicit;C(" ",t.state.name," ")}}function Ri(e,i){if(e&1&&d(0,Vi,2,3)(1,Ni,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="user"?0:t==="state"?1:-1)}}function Oi(e,i){if(e&1&&(p(0),F(1,"date")),e&2){let t=o(4).$implicit;C(" ",P(1,1,t.registeredAt,"dd/MM/yy - HH:mm")," ")}}function $i(e,i){if(e&1&&d(0,Oi,2,4),e&2){let t=o(3).$implicit;g(0,t.registeredAt?0:-1)}}function Hi(e,i){if(e&1&&p(0),e&2){let t=o(2).$implicit,n=o().$implicit;C(" ",n[t.field]," ")}}function Gi(e,i){if(e&1&&d(0,$i,1,1)(1,Hi,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="registeredAt"?0:1)}}function Ui(e,i){if(e&1&&(s(0,"td"),d(1,Ri,2,1)(2,Gi,2,1),m()),e&2){let t=i.$implicit,n=o().$implicit;r(),g(1,n[t.field]!=null&&n[t.field].id?1:-1),r(),g(2,n[t.field]!=null&&n[t.field].id?-1:2)}}function Wi(e,i){if(e&1&&(s(0,"tr",13),T(1,Ui,3,2,"td",null,I),m()),e&2){let t=i.$implicit,n=i.columns,a=i.rowIndex;c("pSelectableRow",t)("pSelectableRowIndex",a),r(),y(n)}}function zi(e,i){if(e&1&&(s(0,"tr")(1,"td"),p(2),m()()),e&2){let t=i.$implicit,n=o();r(),j("colspan",t.length),r(),C(" ",n.messageService.paginatorNoRecordsFound," ")}}function Ki(e,i){}var Ge=(()=>{let i=class i{constructor(){this.authService=_(W),this.coreService=_(G),this.router=_(qe),this.trackingLogsHttpService=_(_e),this.PrimeIcons=R,this.IconButtonActionEnum=A,this.SeverityButtonActionEnum=Q,this.LabelButtonActionEnum=S,this.BreadcrumbEnum=B,this.TableEnum=X,this.messageService=_(J),this.messageDialogService=_(U),this.buttonActions=[],this.columns=[],this.search=new ee(""),this.items=[],this.isVisibleAgreementView=!1,this.buildColumns()}ngOnInit(){this.items=this.period.trackingLogs}buildColumns(){this.columns=[{field:"state",header:me.state},{field:"registeredAt",header:me.registeredAt},{field:"user",header:me.user}]}redirectAgreementLogForm(n){this.router.navigate(["/core/agreements/log",n])}downloadLog(){this.trackingLogsHttpService.downloadLog(this.period.id,this.trackingLogType)}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=O({type:i,selectors:[["app-tracking-log-list"]],inputs:{period:"period",trackingLogType:"trackingLogType"},decls:11,vars:9,consts:[["dt",""],[1,"p-toolbar-group-left"],[1,"ml-2",3,"click","icon","label","loading","severity"],[1,"p-toolbar-group-right"],["dataKey","id","styleClass","p-datatable-striped","paginatorPosition","both",3,"value","columns","paginator","rows","loading"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[1,"flex"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"]],template:function(a,l){if(a&1){let x=E();s(0,"p-toolbar")(1,"div",1)(2,"p-button",2),v("click",function(){return h(x),b(l.downloadLog())}),m()(),u(3,"div",3),m(),s(4,"p-table",4,0),d(6,Bi,5,7,"ng-template",5)(7,Pi,3,0,"ng-template",6)(8,Wi,3,2,"ng-template",7)(9,zi,3,2,"ng-template",8)(10,Ki,0,0,"ng-template",9),m()}a&2&&(r(2),c("icon",l.IconButtonActionEnum.DOWNLOAD)("label",l.LabelButtonActionEnum.DOWNLOAD)("loading",l.coreService.isLoading)("severity",l.SeverityButtonActionEnum.SYNC),r(2),c("value",l.items)("columns",l.columns)("paginator",!0)("rows",10)("loading",l.coreService.isLoading))},dependencies:[H,oe,Z,z,te,ne,ie,Y,Oe],styles:[".enabled[_ngcontent-%COMP%]{background-color:var(--red-200)}"]});let e=i;return e})();var Yi=()=>({width:"50rem"});function Ji(e,i){if(e&1&&(s(0,"div",15)(1,"h2"),p(2),m()()),e&2){let t=o();r(2),D(t.BreadcrumbEnum.ADDITIONAL_DOCUMENTS)}}function Qi(e,i){if(e&1&&(s(0,"th",16),p(1),u(2,"p-sortIcon",17),m()),e&2){let t=i.$implicit;c("pSortableColumn",t.field),r(),C(" ",t.header," "),r(),c("field",t.field)}}function Xi(e,i){if(e&1&&(s(0,"tr"),T(1,Qi,3,3,"th",16,I),m()),e&2){let t=i.$implicit;r(),y(t)}}function Zi(e,i){if(e&1&&p(0),e&2){let t=o(4).$implicit;re(" ",t.user.name," ",t.user.lastname," ")}}function en(e,i){if(e&1&&d(0,Zi,1,2),e&2){let t=o(3).$implicit;g(0,t!=null&&t.user?0:-1)}}function tn(e,i){if(e&1&&d(0,en,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="user"?0:-1)}}function nn(e,i){if(e&1){let t=E();s(0,"span"),p(1),m(),s(2,"p-button",19),v("click",function(){let a=h(t).$implicit,l=o(5);return b(l.downloadFile(a))}),m(),u(3,"p-divider")}if(e&2){let t=i.$implicit,n=o(5);r(),C("",t.type.name,": "),r(),c("icon",n.IconButtonActionEnum.DOWNLOAD)("label",t.name)("text",!0)("severity",n.SeverityButtonActionEnum.DOWNLOAD)}}function on(e,i){if(e&1&&T(0,nn,4,5,null,null,I),e&2){let t=o(3).$implicit;y(t==null?null:t.additionalDocuments)}}function rn(e,i){if(e&1&&p(0),e&2){let t=o(3).$implicit;re(" ",t.name," ",t.sequence," ")}}function ln(e,i){if(e&1&&(p(0),F(1,"date")),e&2){let t=o(3).$implicit;C(" ",P(1,1,t.uploadedAt,"dd/MM/y - HH:mm")," ")}}function an(e,i){if(e&1&&p(0),e&2){let t=o(2).$implicit,n=o().$implicit;C(" ",n[t.field]," ")}}function sn(e,i){if(e&1&&d(0,on,2,0)(1,rn,1,2)(2,ln,2,4)(3,an,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="additionalDocuments"?0:t==="name"?1:t==="uploadedAt"?2:3)}}function mn(e,i){if(e&1&&(s(0,"td"),d(1,tn,1,1)(2,sn,4,1),m()),e&2){let t=i.$implicit,n=o().$implicit;r(),g(1,n[t.field]!=null&&n[t.field].id?1:-1),r(),g(2,n[t.field]!=null&&n[t.field].id?-1:2)}}function cn(e,i){if(e&1&&(s(0,"tr",18),T(1,mn,3,2,"td",null,I),m()),e&2){let t=i.$implicit,n=i.columns,a=i.rowIndex;c("pSelectableRow",t)("pSelectableRowIndex",a),r(),y(n)}}function pn(e,i){if(e&1&&(s(0,"tr")(1,"td"),p(2),m()()),e&2){let t=i.$implicit,n=o();r(),j("colspan",t.length),r(),C(" ",n.messageService.paginatorNoRecordsFound," ")}}function dn(e,i){}function _n(e,i){if(e&1&&(u(0,"i"),s(1,"div",32),p(2),m()),e&2){let t=o(3);$(t.PrimeIcons.FILE_PDF),r(2),D(t.reportFileField.value==null?null:t.reportFileField.value.name)}}function un(e,i){e&1&&(s(0,"div",25)(1,"p-messages",30),d(2,_n,3,3,"ng-template",31),m()())}function gn(e,i){if(e&1&&(u(0,"i"),s(1,"div",32),p(2),m()),e&2){let t=o(3);$(t.PrimeIcons.FILE_PDF),r(2),D(t.evidenceFileField.value==null?null:t.evidenceFileField.value.name)}}function Cn(e,i){e&1&&(s(0,"div",25)(1,"p-messages",30),d(2,gn,3,3,"ng-template",31),m()())}function fn(e,i){if(e&1){let t=E();s(0,"form",20)(1,"div",21),u(2,"label",22),s(3,"p-fileUpload",23,1),v("uploadHandler",function(a){h(t);let l=Ue(4),x=o();return b(x.uploadReportFile(a,l))}),m(),u(5,"small",24),m(),d(6,un,3,0,"div",25),s(7,"div",21),u(8,"label",26),s(9,"p-fileUpload",27,1),v("uploadHandler",function(a){h(t);let l=Ue(4),x=o();return b(x.uploadEvidenceFile(a,l))}),m(),u(11,"small",24),m(),d(12,Cn,3,0,"div",25),s(13,"div",25),u(14,"label",28)(15,"textarea",29)(16,"small",24),m()()}if(e&2){let t=o();c("formGroup",t.form),r(2),c("label",t.AdditionalDocumentEnum.reportFile)("required",t.reportFileField),r(),c("chooseIcon",t.PrimeIcons.UPLOAD)("invalidFileSizeMessageSummary",t.FileEnum.invalidFileSizeMessageSummary)("maxFileSize",t.FileEnum.maxFileSize)("auto",!0)("customUpload",!0),r(2),c("errors",t.reportFileField.errors)("touched",t.reportFileField.touched)("dirty",t.reportFileField.dirty),r(),g(6,t.reportFileField.value?6:-1),r(2),c("label",t.AdditionalDocumentEnum.evidenceFile)("required",t.evidenceFileField),r(),c("chooseIcon",t.PrimeIcons.UPLOAD)("invalidFileSizeMessageSummary",t.FileEnum.invalidFileSizeMessageSummary)("maxFileSize",t.FileEnum.maxFileSize)("auto",!0)("customUpload",!0),r(2),c("errors",t.evidenceFileField.errors)("touched",t.evidenceFileField.touched)("dirty",t.evidenceFileField.dirty),r(),g(12,t.evidenceFileField.value?12:-1),r(2),c("label",t.AdditionalDocumentEnum.detail)("required",t.detailField),r(2),c("errors",t.detailField.errors)("touched",t.detailField.touched)("dirty",t.detailField.dirty)}}function hn(e,i){if(e&1){let t=E();s(0,"p-button",33),v("click",function(){h(t);let a=o();return b(a.isVisibleFilesModal=!1)}),m(),s(1,"p-button",34),v("click",function(){h(t);let a=o();return b(a.onUpload())}),m()}if(e&2){let t=o();c("label",t.LabelButtonActionEnum.CANCEL)("icon",t.IconButtonActionEnum.CANCEL)("text",!0)("severity",t.SeverityButtonActionEnum.CANCEL),r(),c("icon",t.IconButtonActionEnum.REPORT)("label",t.LabelButtonActionEnum.REPORT)("severity",t.SeverityButtonActionEnum.REPORT)}}var Zt=(()=>{let i=class i{constructor(){this.authService=_(W),this.coreService=_(G),this.formBuilder=_(Ce),this.cataloguesHttpService=_(ce),this.trackingLogsHttpService=_(_e),this.filesHttpService=_(Se),this.confirmationService=_(je),this.breadcrumbService=_(ae),this.PrimeIcons=R,this.IconButtonActionEnum=A,this.SeverityButtonActionEnum=Q,this.LabelButtonActionEnum=S,this.BreadcrumbEnum=B,this.TableEnum=X,this.messageService=_(J),this.messageDialogService=_(U),this.buttonActions=[],this.isButtonActions=!1,this.columns=[],this.search=new ee(""),this.items=[],this.formErrors=[],this.types=[],this.isVisibleFilesModal=!1,this.isVisibleTrackingLogModal=!1,this.AddendumEnum=Le,this.CatalogueTrackingLogsStateEnum=se,this.AdditionalDocumentEnum=Be,this.FileEnum=Ye,this.buildForm(),this.buildButtonActions(),this.buildColumns(),this.search.valueChanges.pipe(Ee(500)).subscribe(n=>{this.findAdditionalDocumentsByAgreement()})}ngOnInit(){this.findAdditionalDocumentsByAgreement(),this.loadTypes()}buildForm(){this.form=this.formBuilder.group({reportFile:[null],evidenceFile:[null],detail:[null,le.required]})}findAdditionalDocumentsByAgreement(){this.trackingLogsHttpService.findExecutionAdditionalDocumentsByAgreement(this.agreementId).subscribe(n=>{this.items=n})}loadTypes(){this.types=this.cataloguesHttpService.findByType(pe.PERIODS_TRACKING_LOG)}buildColumns(){this.columns=[{field:"name",header:Be.name},{field:"detail",header:Be.detail},{field:"additionalDocuments",header:Be.additionalDocuments},{field:"uploadedAt",header:Be.uploadedAt},{field:"user",header:Be.user}]}buildButtonActions(){this.buttonActions=[{id:L.TRACKING_LOG,label:S.TRACKING_LOG,icon:A.TRACKING_LOG,command:()=>{this.isVisibleTrackingLogModal=!0}}]}validateButtonActions(n){this.buildButtonActions()}remove(n){this.confirmationService.confirm({key:"confirmDialog",message:"No se podr\xE1 recuperar la informaci\xF3n",header:"\xBFEst\xE1 seguro de eliminar?",icon:R.TRASH,acceptLabel:"Si",rejectLabel:"No",rejectButtonStyleClass:"p-button-text",accept:()=>{this.trackingLogsHttpService.deleteAdditionalDocument(n).subscribe(a=>{this.findAdditionalDocumentsByAgreement()})}})}selectItem(n){this.isButtonActions=!0,this.selectedItem=n,this.validateButtonActions(n)}showFilesModal(){this.isVisibleFilesModal=!0}downloadFile(n){this.filesHttpService.downloadFile(n)}onUpload(){if(this.validateFilesForm()){let n=new FormData;n.append("report",this.reportFileField.value),n.append("evidence",this.evidenceFileField.value),n.append("detail",this.detailField.value),this.trackingLogsHttpService.createExecutionAdditionalDocument(this.agreementId,n).subscribe(a=>{this.findAdditionalDocumentsByAgreement(),this.isVisibleFilesModal=!1})}else this.messageDialogService.fieldErrors(this.formErrors)}validateFilesForm(){return this.formErrors=[],this.reportFileField.invalid&&this.formErrors.push(w.reportFile),this.evidenceFileField.invalid&&this.formErrors.push(w.evidenceFile),this.formErrors.length===0}uploadReportFile(n,a){this.reportFileField.patchValue(n.files[0]),a.clear()}uploadEvidenceFile(n,a){this.evidenceFileField.patchValue(n.files[0]),a.clear()}get reportFileField(){return this.form.controls.reportFile}get evidenceFileField(){return this.form.controls.evidenceFile}get detailField(){return this.form.controls.detail}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=O({type:i,selectors:[["app-additional-document-list"]],inputs:{agreementId:"agreementId"},decls:15,vars:12,consts:[["dt",""],["uploadFiles",""],[1,"p-toolbar-group-left"],[1,"p-toolbar-group-right"],["dataKey","id","styleClass","p-datatable-striped","paginatorPosition","both",3,"value","columns","paginator","rows","loading"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[3,"isHide","buttonActions","enabled"],["header","Subir archivos",3,"visibleChange","visible","modal"],["pTemplate","content"],["pTemplate","footer"],["key","confirmDialog"],[1,"flex"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],[1,"ml-2",3,"click","icon","label","text","severity"],[1,"p-fluid","grid",3,"formGroup"],[1,"field","col-12","xl:col-6","lg:col-6","md:col-6","sm:col-12"],["appLabel","","for","report",3,"label","required"],["id","report","mode","basic","chooseLabel","Cargar","name","files[]","accept",".pdf","invalidFileSizeMessageDetail","",3,"uploadHandler","chooseIcon","invalidFileSizeMessageSummary","maxFileSize","auto","customUpload"],["appErrorMessage","",3,"errors","touched","dirty"],[1,"field","col-12","xl:col-12","lg:col-12","md:col-12","sm:col-12"],["appLabel","","for","evidence",3,"label","required"],["id","evidence","mode","basic","chooseLabel","Cargar","name","files[]","accept",".pdf,.zip,.rar","invalidFileSizeMessageDetail","",3,"uploadHandler","chooseIcon","invalidFileSizeMessageSummary","maxFileSize","auto","customUpload"],["appLabel","","for","detail",3,"label","required"],["pInputTextarea","","id","detail","formControlName","detail"],["severity","info"],["pTemplate",""],[1,"ml-2"],[3,"click","label","icon","text","severity"],[3,"click","icon","label","severity"]],template:function(a,l){if(a&1){let x=E();s(0,"p-toolbar"),u(1,"div",2)(2,"div",3),m(),s(3,"p-table",4,0),d(5,Ji,3,1,"ng-template",5)(6,Xi,3,0,"ng-template",6)(7,cn,3,2,"ng-template",7)(8,pn,3,2,"ng-template",8)(9,dn,0,0,"ng-template",9),m(),s(10,"app-button-action",10),v("isHide",function(f){return h(x),b(l.isButtonActions=!f)}),m(),s(11,"p-dialog",11),N("visibleChange",function(f){return h(x),V(l.isVisibleFilesModal,f)||(l.isVisibleFilesModal=f),b(f)}),d(12,fn,17,28,"ng-template",12)(13,hn,2,7,"ng-template",13),m(),u(14,"p-confirmDialog",14)}a&2&&(r(3),c("value",l.items)("columns",l.columns)("paginator",!0)("rows",10)("loading",l.coreService.isLoading),r(7),c("buttonActions",l.buttonActions)("enabled",l.isButtonActions),r(),K(q(11,Yi)),k("visible",l.isVisibleFilesModal),c("modal",!0))},dependencies:[Ie,we,be,H,oe,Z,ge,Ae,Te,ue,z,te,ne,ie,ye,Fe,he,et,Ze,fe,De,Ut,Y],styles:[".enabled[_ngcontent-%COMP%]{background-color:var(--red-200)}"]});let e=i;return e})();var vn=()=>({width:"100%"}),ei=()=>({width:"35rem"});function xn(e,i){if(e&1&&(s(0,"div",20)(1,"h1"),p(2),m()()),e&2){let t=o();r(2),D(t.BreadcrumbEnum.PERIODS_SUPERVISOR)}}function En(e,i){if(e&1&&(s(0,"th",21),p(1),u(2,"p-sortIcon",23),m()),e&2){let t=i.$implicit;c("pSortableColumn",t.field),r(),C(" ",t.header," "),r(),c("field",t.field)}}function Ln(e,i){if(e&1&&(s(0,"tr"),T(1,En,3,3,"th",21,I),s(3,"th",22),p(4),m()()),e&2){let t=i.$implicit,n=o();r(),y(t),r(3),C(" ",n.TableEnum.ACTIONS," ")}}function Sn(e,i){if(e&1&&p(0),e&2){let t=o(2).$implicit,n=o().$implicit;C(" ",n[t.field].unit.name," ")}}function An(e,i){if(e&1&&d(0,Sn,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="administrator"?0:-1)}}function Tn(e,i){if(e&1){let t=E();s(0,"span"),p(1),m(),s(2,"p-button",26),v("click",function(){let a=h(t).$implicit,l=o(5);return b(l.downloadFile(a))}),m(),u(3,"p-divider")}if(e&2){let t=i.$implicit,n=o(5);r(),C("",t.type.name,": "),r(),c("icon",n.IconButtonActionEnum.DOWNLOAD)("label",t.name)("text",!0)("severity",n.SeverityButtonActionEnum.DOWNLOAD)}}function yn(e,i){if(e&1&&T(0,Tn,4,5,null,null,I),e&2){let t=o(3).$implicit;y(t==null?null:t.trackingLogDocuments)}}function Fn(e,i){if(e&1&&u(0,"i",28),e&2){let t=o(6);$(t.PrimeIcons.CIRCLE_FILL)}}function In(e,i){if(e&1&&u(0,"i",29),e&2){let t=o(6);$(t.PrimeIcons.CIRCLE_FILL)}}function wn(e,i){if(e&1&&d(0,Fn,1,2,"i",27)(1,In,1,2),e&2){let t=o(4).$implicit;g(0,t.trackingLog.state.code==="REPORTED"||t.trackingLog.state.code==="ACCEPTED"?0:1)}}function Dn(e,i){if(e&1&&u(0,"i",29),e&2){let t=o(5);$(t.PrimeIcons.CIRCLE_FILL)}}function Bn(e,i){if(e&1&&d(0,wn,2,1)(1,Dn,1,2),e&2){let t=o(3).$implicit;g(0,t.trackingLog?0:1)}}function Mn(e,i){if(e&1&&(p(0),u(1,"br"),p(2),F(3,"date"),u(4,"br"),p(5),F(6,"date")),e&2){let t=o(3).$implicit;C(" ",t.name," "),r(2),C(" ",P(3,3,t.startedAt,"d MMMM y")," - "),r(3),C(" ",P(6,6,t.endedAt,"d MMMM y")," ")}}function Pn(e,i){if(e&1&&(p(0),F(1,"date")),e&2){let t=o(3).$implicit;C(" ",P(1,1,t.uploadedAt,"dd/MM/y - HH:mm")," ")}}function kn(e,i){if(e&1&&p(0),e&2){let t=o(3).$implicit;C(" ",t.trackingLog==null||t.trackingLog.state==null?null:t.trackingLog.state.name," ")}}function Vn(e,i){if(e&1&&p(0),e&2){let t=o(4).$implicit;re(" ",t.trackingLog.user.name," ",t.trackingLog.user.lastname," ")}}function Nn(e,i){if(e&1&&d(0,Vn,1,2),e&2){let t=o(3).$implicit;g(0,t.trackingLog!=null&&t.trackingLog.user?0:-1)}}function Rn(e,i){if(e&1&&p(0),e&2){let t=o(2).$implicit,n=o().$implicit;C(" ",n[t.field]," ")}}function On(e,i){if(e&1&&d(0,yn,2,0)(1,Bn,2,1)(2,Mn,7,9)(3,Pn,2,4)(4,kn,1,1)(5,Nn,1,1)(6,Rn,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="files"?0:t==="trafficLight"?1:t==="name"?2:t==="uploadedAt"?3:t==="state"?4:t==="user"?5:6)}}function $n(e,i){if(e&1&&(s(0,"td"),d(1,An,1,1)(2,On,7,1),m()),e&2){let t=i.$implicit,n=o().$implicit;r(),g(1,n[t.field]!=null&&n[t.field].id?1:-1),r(),g(2,n[t.field]!=null&&n[t.field].id?-1:2)}}function Hn(e,i){if(e&1){let t=E();s(0,"tr",24),T(1,$n,3,2,"td",null,I),s(3,"td",22)(4,"p-button",25),v("click",function(){let a=h(t).$implicit,l=o();return b(l.selectItem(a))}),m()()()}if(e&2){let t=i.$implicit,n=i.columns,a=i.rowIndex,l=o();c("pSelectableRow",t)("pSelectableRowIndex",a),r(),y(n),r(3),c("icon",l.PrimeIcons.ELLIPSIS_V)}}function Gn(e,i){if(e&1&&(s(0,"tr")(1,"td"),p(2),m()()),e&2){let t=i.$implicit,n=o();r(),j("colspan",t.length),r(),C(" ",n.messageService.paginatorNoRecordsFound," ")}}function Un(e,i){}function Wn(e,i){if(e&1&&u(0,"app-tracking-log-list",12),e&2){let t=o();c("period",t.selectedItem)}}function zn(e,i){e&1&&(s(0,"h3"),p(1,"\xBFEst\xE1 seguro de rechazar, no podr\xE1 modificar su elecci\xF3n?"),m())}function Kn(e,i){if(e&1){let t=E();s(0,"p-button",30),v("click",function(){h(t);let a=o();return b(a.isVisibleRefusedModal=!1)}),m(),s(1,"p-button",31),v("click",function(){h(t);let a=o();return b(a.refuseTrackingLogDocuments())}),m()}if(e&2){let t=o();c("label",t.LabelButtonActionEnum.CANCEL)("icon",t.IconButtonActionEnum.CANCEL)("text",!0)("severity",t.SeverityButtonActionEnum.CANCEL),r(),c("label",t.LabelButtonActionEnum.REFUSED)("icon",t.IconButtonActionEnum.REFUSED)("severity",t.SeverityButtonActionEnum.REFUSED)}}function qn(e,i){e&1&&(s(0,"h3"),p(1,"\xBFEst\xE1 seguro de aceptar, no podr\xE1 modificar su elecci\xF3n?"),m())}function jn(e,i){if(e&1){let t=E();s(0,"p-button",30),v("click",function(){h(t);let a=o();return b(a.isVisibleAcceptedModal=!1)}),m(),s(1,"p-button",31),v("click",function(){h(t);let a=o();return b(a.acceptTrackingLogDocuments())}),m()}if(e&2){let t=o();c("label",t.LabelButtonActionEnum.CANCEL)("icon",t.IconButtonActionEnum.CANCEL)("text",!0)("severity",t.SeverityButtonActionEnum.CANCEL),r(),c("label",t.LabelButtonActionEnum.ACCEPTED)("icon",t.IconButtonActionEnum.ACCEPTED)("severity",t.SeverityButtonActionEnum.REFUSED)}}var ti=(()=>{let i=class i{constructor(){this.activatedRoute=_(Ve),this.authService=_(W),this.coreService=_(G),this.formBuilder=_(Ce),this.cataloguesHttpService=_(ce),this.trackingLogsHttpService=_(_e),this.filesHttpService=_(Se),this.breadcrumbService=_(ae),this.PrimeIcons=R,this.IconButtonActionEnum=A,this.SeverityButtonActionEnum=Q,this.LabelButtonActionEnum=S,this.BreadcrumbEnum=B,this.TableEnum=X,this.messageService=_(J),this.messageDialogService=_(U),this.buttonActions=[],this.isButtonActions=!1,this.columns=[],this.search=new ee(""),this.items=[],this.formErrors=[],this.types=[],this.trackingLogType="execution",this.isVisibleFilesModal=!1,this.isVisibleTrackingLogModal=!1,this.isVisibleRefusedModal=!1,this.isVisibleAcceptedModal=!1,this.AddendumEnum=Le,this.breadcrumbService.setItems([{label:B.AGREEMENTS,routerLink:[`/core/${this.authService.role.code}/agreement-list`]},{label:B.PERIODS_SUPERVISOR}]),this.buildForm(),this.buildButtonActions(),this.buildColumns(),this.search.valueChanges.pipe(Ee(500)).subscribe(n=>{this.findPeriodsByAgreement()})}ngOnInit(){this.findPeriodsByAgreement(),this.loadTypes()}buildForm(){this.form=this.formBuilder.group({reportFile:[null,le.required],evidenceFile:[null],observation:[null,le.required]})}findPeriodsByAgreement(){console.log(this.trackingLogType),this.trackingLogsHttpService.findPeriodsByAgreement(this.agreementId,this.trackingLogType).subscribe(n=>{this.items=n})}loadTypes(){this.types=this.cataloguesHttpService.findByType(pe.PERIODS_TRACKING_LOG)}buildColumns(){this.columns=[{field:"name",header:w.reportPeriod},{field:"documentName",header:w.name},{field:"files",header:w.documentName},{field:"trafficLight",header:w.trafficLight},{field:"uploadedAt",header:w.uploadedAt},{field:"user",header:w.user},{field:"state",header:w.state}]}buildButtonActions(){this.buttonActions=[{id:L.TRACKING_LOG,label:S.TRACKING_LOG,icon:A.TRACKING_LOG,command:()=>{this.isVisibleTrackingLogModal=!0}},{id:L.ACCEPTED,label:S.ACCEPTED,icon:A.ACCEPTED,command:()=>{this.isVisibleAcceptedModal=!0}},{id:L.REFUSED,label:S.REFUSED,icon:A.REFUSED,command:()=>{this.isVisibleRefusedModal=!0}}]}validateButtonActions(n){this.buildButtonActions(),(!n.trackingLog||n.trackingLog.state?.code===se.ACCEPTED||n.trackingLog.state?.code===se.REFUSED)&&(this.buttonActions.splice(this.buttonActions.findIndex(a=>a.id===L.ACCEPTED),1),this.buttonActions.splice(this.buttonActions.findIndex(a=>a.id===L.REFUSED),1))}selectItem(n){this.isButtonActions=!0,this.selectedItem=n,this.validateButtonActions(n)}downloadFile(n){this.filesHttpService.downloadFile(n)}refuseTrackingLogDocuments(){this.observationFileField.valid?this.trackingLogsHttpService.changeState(this.selectedItem.trackingLog.id,!1,this.observationFileField.value).subscribe(()=>{this.findPeriodsByAgreement(),this.isVisibleRefusedModal=!1}):(this.form.markAllAsTouched(),this.formErrors=[me.observation],this.messageDialogService.fieldErrors(this.formErrors))}acceptTrackingLogDocuments(){this.trackingLogsHttpService.changeState(this.selectedItem.trackingLog.id,!0).subscribe(()=>{this.findPeriodsByAgreement(),this.isVisibleAcceptedModal=!1})}get reportFileField(){return this.form.controls.reportFile}get evidenceFileField(){return this.form.controls.evidenceFile}get observationFileField(){return this.form.controls.observation}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=O({type:i,selectors:[["app-period-list"]],inputs:{agreementId:"agreementId"},decls:25,vars:29,consts:[["dt",""],[1,"p-toolbar-group-left"],[1,"p-toolbar-group-right"],["dataKey","id","styleClass","p-datatable-striped","paginatorPosition","both",3,"value","columns","paginator","rows","loading"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[3,"isHide","buttonActions","enabled"],[3,"agreementId"],["header","Bit\xE1cora",3,"visibleChange","visible","modal"],["trackingLogType","execution",3,"period"],["header","Header",3,"visibleChange","visible","modal"],[1,"grid","p-fluid",3,"formGroup"],[1,"field","col-12","xl:col-12","lg:col-12","md:col-12","sm:col-12"],["appLabel","","for","observation","label","Observaci\xF3n",3,"required"],["pInputTextarea","","id","observation","formControlName","observation"],["appErrorMessage","",3,"errors","touched","dirty"],["pTemplate","footer"],[1,"flex"],[3,"pSortableColumn"],[1,"text-center"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"click","icon"],[1,"ml-2",3,"click","icon","label","text","severity"],[2,"color","var(--green-400)","font-size","3rem",3,"class"],[2,"color","var(--green-400)","font-size","3rem"],[2,"color","var(--red-400)","font-size","3rem"],[3,"click","label","icon","text","severity"],[3,"click","label","icon","severity"]],template:function(a,l){if(a&1){let x=E();s(0,"p-toolbar"),u(1,"div",1)(2,"div",2),m(),s(3,"p-table",3,0),d(5,xn,3,1,"ng-template",4)(6,Ln,5,1,"ng-template",5)(7,Hn,5,3,"ng-template",6)(8,Gn,3,2,"ng-template",7)(9,Un,0,0,"ng-template",8),m(),s(10,"app-button-action",9),v("isHide",function(f){return h(x),b(l.isButtonActions=!f)}),m(),u(11,"app-additional-document-list",10),s(12,"p-dialog",11),N("visibleChange",function(f){return h(x),V(l.isVisibleTrackingLogModal,f)||(l.isVisibleTrackingLogModal=f),b(f)}),d(13,Wn,1,1,"app-tracking-log-list",12),m(),s(14,"p-dialog",13),N("visibleChange",function(f){return h(x),V(l.isVisibleRefusedModal,f)||(l.isVisibleRefusedModal=f),b(f)}),d(15,zn,2,0,"ng-template",5),s(16,"form",14)(17,"div",15),u(18,"label",16)(19,"textarea",17)(20,"small",18),m()(),d(21,Kn,2,7,"ng-template",19),m(),s(22,"p-dialog",13),N("visibleChange",function(f){return h(x),V(l.isVisibleAcceptedModal,f)||(l.isVisibleAcceptedModal=f),b(f)}),d(23,qn,2,0,"ng-template",5)(24,jn,2,7,"ng-template",19),m()}a&2&&(r(3),c("value",l.items)("columns",l.columns)("paginator",!0)("rows",10)("loading",l.coreService.isLoading),r(7),c("buttonActions",l.buttonActions)("enabled",l.isButtonActions),r(),c("agreementId",l.agreementId),r(),K(q(26,vn)),k("visible",l.isVisibleTrackingLogModal),c("modal",!0),r(),g(13,l.isVisibleTrackingLogModal?13:-1),r(),K(q(27,ei)),k("visible",l.isVisibleRefusedModal),c("modal",!0),r(2),c("formGroup",l.form),r(2),c("required",l.observationFileField),r(2),c("errors",l.observationFileField.errors)("touched",l.observationFileField.touched)("dirty",l.observationFileField.dirty),r(2),K(q(28,ei)),k("visible",l.isVisibleAcceptedModal),c("modal",!0))},dependencies:[Ie,we,be,H,oe,Z,ge,Ae,Te,ue,z,te,ne,ie,ye,Fe,he,fe,De,Ge,Zt,Y],styles:[".enabled[_ngcontent-%COMP%]{background-color:var(--red-200)}"]});let e=i;return e})();var Yn=()=>({width:"100%"}),ii=()=>({width:"35rem"});function Jn(e,i){if(e&1&&(s(0,"div",19)(1,"h2"),p(2),m()()),e&2){let t=o();r(2),D(t.BreadcrumbEnum.PERIODS_CLOSING_SUPERVISOR)}}function Qn(e,i){if(e&1&&(s(0,"th",20),p(1),u(2,"p-sortIcon",22),m()),e&2){let t=i.$implicit;c("pSortableColumn",t.field),r(),C(" ",t.header," "),r(),c("field",t.field)}}function Xn(e,i){if(e&1&&(s(0,"tr"),T(1,Qn,3,3,"th",20,I),s(3,"th",21),p(4),m()()),e&2){let t=i.$implicit,n=o();r(),y(t),r(3),C(" ",n.TableEnum.ACTIONS," ")}}function Zn(e,i){if(e&1&&p(0),e&2){let t=o(2).$implicit,n=o().$implicit;C(" ",n[t.field].unit.name," ")}}function eo(e,i){if(e&1&&d(0,Zn,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="administrator"?0:-1)}}function to(e,i){if(e&1){let t=E();s(0,"span"),p(1),m(),s(2,"p-button",25),v("click",function(){let a=h(t).$implicit,l=o(5);return b(l.downloadFile(a))}),m(),u(3,"p-divider")}if(e&2){let t=i.$implicit,n=o(5);r(),C("",t.type.name,": "),r(),c("icon",n.IconButtonActionEnum.DOWNLOAD)("label",t.name)("text",!0)("severity",n.SeverityButtonActionEnum.DOWNLOAD)}}function io(e,i){if(e&1&&T(0,to,4,5,null,null,I),e&2){let t=o(3).$implicit;y(t==null?null:t.trackingLogDocuments)}}function no(e,i){if(e&1&&u(0,"i",27),e&2){let t=o(6);$(t.PrimeIcons.CIRCLE_FILL)}}function oo(e,i){if(e&1&&u(0,"i",28),e&2){let t=o(6);$(t.PrimeIcons.CIRCLE_FILL)}}function ro(e,i){if(e&1&&d(0,no,1,2,"i",26)(1,oo,1,2),e&2){let t=o(4).$implicit;g(0,t.trackingLog.state.code==="REPORTED"||t.trackingLog.state.code==="ACCEPTED"?0:1)}}function lo(e,i){if(e&1&&u(0,"i",28),e&2){let t=o(5);$(t.PrimeIcons.CIRCLE_FILL)}}function ao(e,i){if(e&1&&d(0,ro,2,1)(1,lo,1,2),e&2){let t=o(3).$implicit;g(0,t.trackingLog?0:1)}}function so(e,i){if(e&1&&(p(0),u(1,"br"),p(2),F(3,"date"),u(4,"br"),p(5),F(6,"date")),e&2){let t=o(3).$implicit;C(" ",t.name," "),r(2),C(" ",P(3,3,t.startedAt,"d MMMM y")," - "),r(3),C(" ",P(6,6,t.endedAt,"d MMMM y")," ")}}function mo(e,i){if(e&1&&(p(0),F(1,"date")),e&2){let t=o(3).$implicit;C(" ",P(1,1,t.uploadedAt,"dd/MM/y - HH:mm")," ")}}function co(e,i){if(e&1&&p(0),e&2){let t=o(3).$implicit;C(" ",t.trackingLog==null||t.trackingLog.state==null?null:t.trackingLog.state.name," ")}}function po(e,i){if(e&1&&p(0),e&2){let t=o(4).$implicit;re(" ",t.trackingLog.user.name," ",t.trackingLog.user.lastname," ")}}function _o(e,i){if(e&1&&d(0,po,1,2),e&2){let t=o(3).$implicit;g(0,t.trackingLog!=null&&t.trackingLog.user?0:-1)}}function uo(e,i){if(e&1&&p(0),e&2){let t=o(2).$implicit,n=o().$implicit;C(" ",n[t.field]," ")}}function go(e,i){if(e&1&&d(0,io,2,0)(1,ao,2,1)(2,so,7,9)(3,mo,2,4)(4,co,1,1)(5,_o,1,1)(6,uo,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="files"?0:t==="trafficLight"?1:t==="name"?2:t==="uploadedAt"?3:t==="state"?4:t==="user"?5:6)}}function Co(e,i){if(e&1&&(s(0,"td"),d(1,eo,1,1)(2,go,7,1),m()),e&2){let t=i.$implicit,n=o().$implicit;r(),g(1,n[t.field]!=null&&n[t.field].id?1:-1),r(),g(2,n[t.field]!=null&&n[t.field].id?-1:2)}}function fo(e,i){if(e&1){let t=E();s(0,"tr",23),T(1,Co,3,2,"td",null,I),s(3,"td",21)(4,"p-button",24),v("click",function(){let a=h(t).$implicit,l=o();return b(l.selectItem(a))}),m()()()}if(e&2){let t=i.$implicit,n=i.columns,a=i.rowIndex,l=o();c("pSelectableRow",t)("pSelectableRowIndex",a),r(),y(n),r(3),c("icon",l.PrimeIcons.ELLIPSIS_V)}}function ho(e,i){if(e&1&&(s(0,"tr")(1,"td"),p(2),m()()),e&2){let t=i.$implicit,n=o();r(),j("colspan",t.length),r(),C(" ",n.messageService.paginatorNoRecordsFound," ")}}function bo(e,i){}function vo(e,i){if(e&1&&u(0,"app-tracking-log-list",11),e&2){let t=o();c("period",t.selectedItem)}}function xo(e,i){e&1&&(s(0,"h3"),p(1,"\xBFEst\xE1 seguro de rechazar, no podr\xE1 modificar su elecci\xF3n?"),m())}function Eo(e,i){if(e&1){let t=E();s(0,"p-button",29),v("click",function(){h(t);let a=o();return b(a.isVisibleRefusedModal=!1)}),m(),s(1,"p-button",30),v("click",function(){h(t);let a=o();return b(a.refuseTrackingLogDocuments())}),m()}if(e&2){let t=o();c("label",t.LabelButtonActionEnum.CANCEL)("icon",t.IconButtonActionEnum.CANCEL)("text",!0)("severity",t.SeverityButtonActionEnum.CANCEL),r(),c("label",t.LabelButtonActionEnum.REFUSED)("icon",t.IconButtonActionEnum.REFUSED)("severity",t.SeverityButtonActionEnum.REFUSED)}}function Lo(e,i){e&1&&(s(0,"h3"),p(1,"\xBFEst\xE1 seguro de aceptar, no podr\xE1 modificar su elecci\xF3n?"),m())}function So(e,i){if(e&1){let t=E();s(0,"p-button",29),v("click",function(){h(t);let a=o();return b(a.isVisibleAcceptedModal=!1)}),m(),s(1,"p-button",30),v("click",function(){h(t);let a=o();return b(a.acceptTrackingLogDocuments())}),m()}if(e&2){let t=o();c("label",t.LabelButtonActionEnum.CANCEL)("icon",t.IconButtonActionEnum.CANCEL)("text",!0)("severity",t.SeverityButtonActionEnum.CANCEL),r(),c("label",t.LabelButtonActionEnum.ACCEPTED)("icon",t.IconButtonActionEnum.ACCEPTED)("severity",t.SeverityButtonActionEnum.REFUSED)}}var ni=(()=>{let i=class i{constructor(){this.activatedRoute=_(Ve),this.authService=_(W),this.coreService=_(G),this.formBuilder=_(Ce),this.cataloguesHttpService=_(ce),this.trackingLogsHttpService=_(_e),this.filesHttpService=_(Se),this.breadcrumbService=_(ae),this.PrimeIcons=R,this.IconButtonActionEnum=A,this.SeverityButtonActionEnum=Q,this.LabelButtonActionEnum=S,this.BreadcrumbEnum=B,this.TableEnum=X,this.messageService=_(J),this.messageDialogService=_(U),this.buttonActions=[],this.isButtonActions=!1,this.columns=[],this.search=new ee(""),this.items=[],this.formErrors=[],this.types=[],this.trackingLogType="closing",this.isVisibleFilesModal=!1,this.isVisibleTrackingLogModal=!1,this.isVisibleRefusedModal=!1,this.isVisibleAcceptedModal=!1,this.AddendumEnum=Le,this.breadcrumbService.setItems([{label:B.AGREEMENTS,routerLink:[`/core/${this.authService.role.code}/agreement-list`]},{label:B.PERIODS_CLOSING_SUPERVISOR}]),this.buildForm(),this.buildButtonActions(),this.buildColumns(),this.search.valueChanges.pipe(Ee(500)).subscribe(n=>{this.findPeriodsByAgreement()})}ngOnInit(){this.findPeriodsByAgreement(),this.loadTypes(),this.activatedRoute.queryParams.subscribe(n=>{this.trackingLogType=n.type})}buildForm(){this.form=this.formBuilder.group({reportFile:[null,le.required],evidenceFile:[null],observation:[null,le.required]})}findPeriodsByAgreement(){this.trackingLogsHttpService.findPeriodsByAgreement(this.agreementId,this.trackingLogType).subscribe(n=>{this.items=n})}loadTypes(){this.types=this.cataloguesHttpService.findByType(pe.PERIODS_TRACKING_LOG)}buildColumns(){this.columns=[{field:"name",header:w.reportPeriod},{field:"documentName",header:w.name},{field:"files",header:w.documentName},{field:"trafficLight",header:w.trafficLight},{field:"uploadedAt",header:w.uploadedAt},{field:"user",header:w.user},{field:"state",header:w.state}]}buildButtonActions(){this.buttonActions=[{id:L.TRACKING_LOG,label:S.TRACKING_LOG,icon:A.TRACKING_LOG,command:()=>{this.isVisibleTrackingLogModal=!0}},{id:L.ACCEPTED,label:S.ACCEPTED,icon:A.ACCEPTED,command:()=>{this.isVisibleAcceptedModal=!0}},{id:L.REFUSED,label:S.REFUSED,icon:A.REFUSED,command:()=>{this.isVisibleRefusedModal=!0}}]}validateButtonActions(n){this.buildButtonActions(),(!n.trackingLog||n.trackingLog.state?.code===se.ACCEPTED||n.trackingLog.state?.code===se.REFUSED)&&(this.buttonActions.splice(this.buttonActions.findIndex(a=>a.id===L.ACCEPTED),1),this.buttonActions.splice(this.buttonActions.findIndex(a=>a.id===L.REFUSED),1))}selectItem(n){this.isButtonActions=!0,this.selectedItem=n,this.validateButtonActions(n)}downloadFile(n){this.filesHttpService.downloadFile(n)}refuseTrackingLogDocuments(){this.observationFileField.valid?this.trackingLogsHttpService.changeState(this.selectedItem.trackingLog.id,!1,this.observationFileField.value).subscribe(()=>{this.findPeriodsByAgreement(),this.isVisibleRefusedModal=!1,this.observation=""}):(this.form.markAllAsTouched(),this.formErrors=["Observaci\xF3n"],this.messageDialogService.fieldErrors(this.formErrors))}acceptTrackingLogDocuments(){this.trackingLogsHttpService.changeState(this.selectedItem.trackingLog.id,!0).subscribe(()=>{this.findPeriodsByAgreement(),this.isVisibleAcceptedModal=!1})}get reportFileField(){return this.form.controls.reportFile}get evidenceFileField(){return this.form.controls.evidenceFile}get observationFileField(){return this.form.controls.observation}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=O({type:i,selectors:[["app-period-closing-list"]],inputs:{agreementId:"agreementId"},decls:24,vars:28,consts:[["dt",""],[1,"p-toolbar-group-left"],[1,"p-toolbar-group-right"],["dataKey","id","styleClass","p-datatable-striped","paginatorPosition","both",3,"value","columns","paginator","rows","loading"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[3,"isHide","buttonActions","enabled"],["header","Bit\xE1cora",3,"visibleChange","visible","modal"],["trackingLogType","closing",3,"period"],["header","Header",3,"visibleChange","visible","modal"],[1,"grid","p-fluid",3,"formGroup"],[1,"field","col-12","xl:col-12","lg:col-12","md:col-12","sm:col-12"],["appLabel","","for","observation","label","Observaci\xF3n",3,"required"],["pInputTextarea","","id","observation","formControlName","observation"],["appErrorMessage","",3,"errors","touched","dirty"],["pTemplate","footer"],[1,"flex"],[3,"pSortableColumn"],[1,"text-center"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"click","icon"],[1,"ml-2",3,"click","icon","label","text","severity"],[2,"color","var(--green-400)","font-size","3rem",3,"class"],[2,"color","var(--green-400)","font-size","3rem"],[2,"color","var(--red-400)","font-size","3rem"],[3,"click","label","icon","text","severity"],[3,"click","label","icon","severity"]],template:function(a,l){if(a&1){let x=E();s(0,"p-toolbar"),u(1,"div",1)(2,"div",2),m(),s(3,"p-table",3,0),d(5,Jn,3,1,"ng-template",4)(6,Xn,5,1,"ng-template",5)(7,fo,5,3,"ng-template",6)(8,ho,3,2,"ng-template",7)(9,bo,0,0,"ng-template",8),m(),s(10,"app-button-action",9),v("isHide",function(f){return h(x),b(l.isButtonActions=!f)}),m(),s(11,"p-dialog",10),N("visibleChange",function(f){return h(x),V(l.isVisibleTrackingLogModal,f)||(l.isVisibleTrackingLogModal=f),b(f)}),d(12,vo,1,1,"app-tracking-log-list",11),m(),s(13,"p-dialog",12),N("visibleChange",function(f){return h(x),V(l.isVisibleRefusedModal,f)||(l.isVisibleRefusedModal=f),b(f)}),d(14,xo,2,0,"ng-template",5),s(15,"form",13)(16,"div",14),u(17,"label",15)(18,"textarea",16)(19,"small",17),m()(),d(20,Eo,2,7,"ng-template",18),m(),s(21,"p-dialog",12),N("visibleChange",function(f){return h(x),V(l.isVisibleAcceptedModal,f)||(l.isVisibleAcceptedModal=f),b(f)}),d(22,Lo,2,0,"ng-template",5)(23,So,2,7,"ng-template",18),m()}a&2&&(r(3),c("value",l.items)("columns",l.columns)("paginator",!0)("rows",10)("loading",l.coreService.isLoading),r(7),c("buttonActions",l.buttonActions)("enabled",l.isButtonActions),r(),K(q(25,Yn)),k("visible",l.isVisibleTrackingLogModal),c("modal",!0),r(),g(12,l.isVisibleTrackingLogModal?12:-1),r(),K(q(26,ii)),k("visible",l.isVisibleRefusedModal),c("modal",!0),r(2),c("formGroup",l.form),r(2),c("required",l.observationFileField),r(2),c("errors",l.observationFileField.errors)("touched",l.observationFileField.touched)("dirty",l.observationFileField.dirty),r(2),K(q(27,ii)),k("visible",l.isVisibleAcceptedModal),c("modal",!0))},dependencies:[Ie,we,be,H,oe,Z,ge,Ae,Te,ue,z,te,ne,ie,ye,Fe,he,fe,De,Ge,Y],styles:[".enabled[_ngcontent-%COMP%]{background-color:var(--red-200)}"]});let e=i;return e})();function To(e,i){e&1&&u(0,"div",10)}function yo(e,i){if(e&1&&(s(0,"th",11),p(1),u(2,"p-sortIcon",12),m()),e&2){let t=i.$implicit;c("pSortableColumn",t.field),r(),C(" ",t.header," "),r(),c("field",t.field)}}function Fo(e,i){if(e&1&&(s(0,"tr"),T(1,yo,3,3,"th",11,I),m()),e&2){let t=i.$implicit;r(),y(t)}}function Io(e,i){if(e&1&&(u(0,"br"),s(1,"b"),p(2,"Comentario: "),m(),p(3)),e&2){let t=o(4).$implicit;r(3),C("",t.observation," ")}}function wo(e,i){if(e&1&&(p(0),d(1,Io,4,1)),e&2){let t=o(3).$implicit;re(" ",t.user.name," ",t.user.lastname," "),r(),g(1,t.observation?1:-1)}}function Do(e,i){if(e&1&&p(0),e&2){let t=o(3).$implicit;C(" ",t.state.name," ")}}function Bo(e,i){if(e&1&&d(0,wo,2,3)(1,Do,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="user"?0:t==="state"?1:-1)}}function Mo(e,i){if(e&1&&(p(0),F(1,"date")),e&2){let t=o(4).$implicit;C(" ",P(1,1,t.registeredAt,"dd/MM/yy - HH:mm")," ")}}function Po(e,i){if(e&1&&d(0,Mo,2,4),e&2){let t=o(3).$implicit;g(0,t.registeredAt?0:-1)}}function ko(e,i){if(e&1&&p(0),e&2){let t=o(2).$implicit,n=o().$implicit;C(" ",n[t.field]," ")}}function Vo(e,i){if(e&1&&d(0,Po,1,1)(1,ko,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="registeredAt"?0:1)}}function No(e,i){if(e&1&&(s(0,"td"),d(1,Bo,2,1)(2,Vo,2,1),m()),e&2){let t=i.$implicit,n=o().$implicit;r(),g(1,n[t.field]!=null&&n[t.field].id?1:-1),r(),g(2,n[t.field]!=null&&n[t.field].id?-1:2)}}function Ro(e,i){if(e&1&&(s(0,"tr",13),T(1,No,3,2,"td",null,I),m()),e&2){let t=i.$implicit,n=i.columns,a=i.rowIndex;c("pSelectableRow",t)("pSelectableRowIndex",a),r(),y(n)}}function Oo(e,i){if(e&1&&(s(0,"tr")(1,"td"),p(2),m()()),e&2){let t=i.$implicit,n=o();r(),j("colspan",t.length),r(),C(" ",n.messageService.paginatorNoRecordsFound," ")}}function $o(e,i){}var oi=(()=>{let i=class i{constructor(){this.authService=_(W),this.coreService=_(G),this.closingLogsHttpService=_(Qe),this.PrimeIcons=R,this.IconButtonActionEnum=A,this.SeverityButtonActionEnum=Q,this.LabelButtonActionEnum=S,this.BreadcrumbEnum=B,this.TableEnum=X,this.messageService=_(J),this.messageDialogService=_(U),this.buttonActions=[],this.columns=[],this.search=new ee(""),this.items=[],this.isVisibleAgreementView=!1,this.buildColumns()}ngOnInit(){this.findClosingLogsByAgreement()}buildColumns(){this.columns=[{field:"state",header:me.state},{field:"registeredAt",header:me.registeredAt},{field:"user",header:me.user}]}findClosingLogsByAgreement(){this.closingLogsHttpService.findClosingLogsByAgreement(this.agreementId).subscribe(n=>{n&&(this.items=n)})}downloadLog(){this.closingLogsHttpService.downloadLog(this.agreementId)}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=O({type:i,selectors:[["app-closing-log-list"]],inputs:{agreementId:"agreementId"},decls:11,vars:9,consts:[["dt",""],[1,"p-toolbar-group-left"],[1,"ml-2",3,"click","icon","label","loading","severity"],[1,"p-toolbar-group-right"],["dataKey","id","styleClass","p-datatable-striped","paginatorPosition","both",3,"value","columns","paginator","rows","loading"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[1,"flex"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"]],template:function(a,l){if(a&1){let x=E();s(0,"p-toolbar")(1,"div",1)(2,"p-button",2),v("click",function(){return h(x),b(l.downloadLog())}),m()(),u(3,"div",3),m(),s(4,"p-table",4,0),d(6,To,1,0,"ng-template",5)(7,Fo,3,0,"ng-template",6)(8,Ro,3,2,"ng-template",7)(9,Oo,3,2,"ng-template",8)(10,$o,0,0,"ng-template",9),m()}a&2&&(r(2),c("icon",l.IconButtonActionEnum.DOWNLOAD)("label",l.LabelButtonActionEnum.DOWNLOAD)("loading",l.coreService.isLoading)("severity",l.SeverityButtonActionEnum.SYNC),r(2),c("value",l.items)("columns",l.columns)("paginator",!0)("rows",10)("loading",l.coreService.isLoading))},dependencies:[H,oe,Z,z,te,ne,ie,Y],styles:[".enabled[_ngcontent-%COMP%]{background-color:var(--red-200)}"]});let e=i;return e})();var Uo=(e,i)=>i.id,Wo=()=>({width:"50rem"}),zo=()=>({width:"100%"}),ri=()=>({width:"35rem"});function Ko(e,i){e&1&&(s(0,"div",24),p(1," Previo a reportar la documentaci\xF3n en la secciones GESTI\xD3N DE CIERRE DE CONVENIO \xE9stos (reportes de avence de cierre) deber\xE1 contar con todos los reportes en estado ACEPTADO. "),m())}function qo(e,i){e&1&&(s(0,"p-messages",20),d(1,Ko,2,0,"ng-template",23),m())}function jo(e,i){if(e&1&&(s(0,"h2"),p(1),m(),d(2,qo,2,0,"p-messages",20),s(3,"p-toolbar"),u(4,"div",21)(5,"div",22),m()),e&2){let t=o();r(),D(t.BreadcrumbEnum.CLOSING_LOG_SUPERVISOR),r(),g(2,!t.validPeriodsClosing&&t.closingNotification&&(t.closingNotification.closeType==null?null:t.closingNotification.closeType.code)===t.CatalogueClosingNotificationsCloseTypesDocumentEnum.TERM?2:-1)}}function Yo(e,i){if(e&1&&(s(0,"th",25),p(1),u(2,"p-sortIcon",27),m()),e&2){let t=i.$implicit;c("pSortableColumn",t.field),r(),C(" ",t.header," "),r(),c("field",t.field)}}function Jo(e,i){if(e&1&&(s(0,"tr"),T(1,Yo,3,3,"th",25,I),s(3,"th",26),p(4),m()()),e&2){let t=i.$implicit,n=o();r(),y(t),r(3),C(" ",n.TableEnum.ACTIONS," ")}}function Qo(e,i){if(e&1&&p(0),e&2){let t=o(2).$implicit,n=o().$implicit;C(" ",n[t.field].unit.name," ")}}function Xo(e,i){if(e&1&&p(0),e&2){let t=o(4).$implicit;re(" ",t.user.name," ",t.user.lastname," ")}}function Zo(e,i){if(e&1&&d(0,Xo,1,2),e&2){let t=o(3).$implicit;g(0,t!=null&&t.user?0:-1)}}function er(e,i){if(e&1&&p(0),e&2){let t=o(3).$implicit;C(" ",t==null||t.state==null?null:t.state.name," ")}}function tr(e,i){if(e&1&&d(0,Qo,1,1)(1,Zo,1,1)(2,er,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="administrator"?0:t==="user"?1:t==="state"?2:-1)}}function ir(e,i){if(e&1&&(s(0,"span"),p(1),m(),u(2,"p-divider")),e&2){let t=i.$implicit;r(),C("",t.type.name,": ")}}function nr(e,i){if(e&1&&T(0,ir,3,1,null,null,I),e&2){let t=o(3).$implicit;y(t==null?null:t.closingLogDocuments)}}function or(e,i){if(e&1){let t=E();s(0,"p-button",30),v("click",function(){let a=h(t).$implicit,l=o(6);return b(l.downloadFile(a))}),m(),u(1,"p-divider")}if(e&2){let t=i.$implicit,n=o(6);c("icon",n.IconButtonActionEnum.DOWNLOAD)("label",t.name)("text",!0)("severity",n.SeverityButtonActionEnum.DOWNLOAD)}}function rr(e,i){if(e&1&&T(0,or,2,4,null,null,I),e&2){let t=o(4).$implicit;y(t==null?null:t.closingLogDocuments)}}function lr(e,i){if(e&1&&d(0,rr,2,0),e&2){let t=o(3).$implicit;g(0,t!=null&&t.closingLogDocuments?0:-1)}}function ar(e,i){if(e&1&&u(0,"i",32),e&2){let t=o(6);$(t.PrimeIcons.CIRCLE_FILL)}}function sr(e,i){if(e&1&&u(0,"i",33),e&2){let t=o(6);$(t.PrimeIcons.CIRCLE_FILL)}}function mr(e,i){if(e&1&&d(0,ar,1,2,"i",31)(1,sr,1,2),e&2){let t=o(4).$implicit;g(0,t.state.code==="REPORTED"||t.state.code==="ACCEPTED"?0:1)}}function cr(e,i){if(e&1&&u(0,"i",33),e&2){let t=o(5);$(t.PrimeIcons.CIRCLE_FILL)}}function pr(e,i){if(e&1&&d(0,mr,2,1)(1,cr,1,2),e&2){let t=o(3).$implicit;g(0,t.closingLogDocuments?0:1)}}function dr(e,i){if(e&1&&(p(0),u(1,"br"),p(2),F(3,"date"),u(4,"br"),p(5),F(6,"date")),e&2){let t=o(3).$implicit;C(" ",t.name," "),r(2),C(" ",P(3,3,t.startedAt,"d MMMM y")," - "),r(3),C(" ",P(6,6,t.endedAt,"d MMMM y")," ")}}function _r(e,i){if(e&1&&(p(0),F(1,"date")),e&2){let t=o(3).$implicit;C(" ",P(1,1,t.uploadedAt,"dd/MM/y - HH:mm")," ")}}function ur(e,i){if(e&1&&p(0),e&2){let t=o(2).$implicit,n=o().$implicit;C(" ",n[t.field]," ")}}function gr(e,i){if(e&1&&d(0,nr,2,0)(1,lr,1,1)(2,pr,2,1)(3,dr,7,9)(4,_r,2,4)(5,ur,1,1),e&2){let t,n=o().$implicit;g(0,(t=n.field)==="closingLogDocumentsUpload"?0:t==="closingLogDocuments"?1:t==="trafficLight"?2:t==="name"?3:t==="uploadedAt"?4:5)}}function Cr(e,i){if(e&1&&(s(0,"td"),d(1,tr,3,1)(2,gr,6,1),m()),e&2){let t=i.$implicit,n=o().$implicit;r(),g(1,n[t.field]!=null&&n[t.field].id?1:-1),r(),g(2,n[t.field]!=null&&n[t.field].id?-1:2)}}function fr(e,i){if(e&1){let t=E();s(0,"tr",28),T(1,Cr,3,2,"td",null,I),s(3,"td",26)(4,"p-button",29),v("click",function(){let a=h(t).$implicit,l=o();return b(l.selectItem(a))}),m()()()}if(e&2){let t=i.$implicit,n=i.columns,a=i.rowIndex,l=o();c("pSelectableRow",t)("pSelectableRowIndex",a),r(),y(n),r(3),c("icon",l.PrimeIcons.ELLIPSIS_V)}}function hr(e,i){if(e&1&&(s(0,"tr")(1,"td"),p(2),m()()),e&2){let t=i.$implicit,n=o();r(),j("colspan",t.length),r(),C(" ",n.messageService.paginatorNoRecordsFound," ")}}function br(e,i){}function vr(e,i){e&1&&(s(0,"h2"),p(1," Registro de Cierre del Convenio "),m())}function xr(e,i){if(e&1){let t=E();u(0,"p-divider",36),s(1,"p-button",37),v("click",function(){h(t);let a=o(3);return b(a.closeAgreement())}),m()}if(e&2){let t=o(3);r(),c("disabled",!t.checked)}}function Er(e,i){if(e&1){let t=E();s(0,"div",34)(1,"p-checkbox",35),N("ngModelChange",function(a){h(t);let l=o(2);return V(l.checked,a)||(l.checked=a),b(a)}),m(),u(2,"p-divider",36),p(3," Enviar documentaci\xF3n habilitante validada, para registro del cierre del convenio en el sistema inform\xE1tico. "),d(4,xr,2,1),m()}if(e&2){let t=o(2);r(),k("ngModel",t.checked),c("binary",!0)("disabled",!!t.closedAgreement),r(3),g(4,t.closedAgreement?-1:4)}}function Lr(e,i){e&1&&(s(0,"p-panel"),d(1,vr,2,0,"ng-template",4)(2,Er,5,4,"ng-template",10),m())}function Sr(e,i){if(e&1&&(u(0,"i"),s(1,"div",24),p(2),m()),e&2){let t=o(2).$index,n=o(2);$(n.PrimeIcons.FILE_PDF),r(2),D(n.files[t].file.name)}}function Ar(e,i){e&1&&(s(0,"div",16)(1,"p-messages",42),d(2,Sr,3,3,"ng-template",23),m()())}function Tr(e,i){if(e&1){let t=E();s(0,"div",16)(1,"label",39),p(2),s(3,"b",40),p(4,"*"),m()(),s(5,"p-fileUpload",41,1),v("uploadHandler",function(a){let l=h(t).$implicit,x=Ue(6),M=o(2);return b(M.onUpload(a,x,l))}),m(),u(7,"small",19),m(),d(8,Ar,3,0,"div",16)}if(e&2){let t=i.$implicit,n=i.$index,a=o(2);r(),c("for",t.id),r(),C(" ",t.name," "),r(3),c("chooseIcon",a.PrimeIcons.UPLOAD)("invalidFileSizeMessageSummary",a.FileEnum.invalidFileSizeMessageSummary)("maxFileSize",a.FileEnum.maxFileSize)("auto",!0)("customUpload",!0),r(2),c("errors",a.reportFileField.errors)("touched",a.reportFileField.touched)("dirty",a.reportFileField.dirty),r(),g(8,a.files.length>n?8:-1)}}function yr(e,i){if(e&1&&(s(0,"div",38),T(1,Tr,9,11,null,null,Uo),m()),e&2){let t=o();r(),y(t.closeTypes)}}function Fr(e,i){if(e&1){let t=E();s(0,"p-button",43),v("click",function(){h(t);let a=o();return b(a.closeModal())}),m(),s(1,"p-button",44),v("click",function(){h(t);let a=o();return b(a.onSubmit())}),m()}if(e&2){let t=o();c("label",t.LabelButtonActionEnum.CANCEL)("icon",t.IconButtonActionEnum.CANCEL)("text",!0)("severity",t.SeverityButtonActionEnum.CANCEL),r(),c("icon",t.IconButtonActionEnum.UPLOAD)("label",t.LabelButtonActionEnum.UPLOAD)("severity",t.SeverityButtonActionEnum.UPLOAD)}}function Ir(e,i){if(e&1&&u(0,"app-closing-log-list",13),e&2){let t=o();c("agreementId",t.agreementId)}}function wr(e,i){e&1&&(s(0,"h3"),p(1,"\xBFEst\xE1 seguro de rechazar, no podr\xE1 modificar su elecci\xF3n?"),m())}function Dr(e,i){if(e&1){let t=E();s(0,"p-button",43),v("click",function(){h(t);let a=o();return b(a.cancelRefusedModal())}),m(),s(1,"p-button",45),v("click",function(){h(t);let a=o();return b(a.refuseTrackingLogDocuments())}),m()}if(e&2){let t=o();c("label",t.LabelButtonActionEnum.CANCEL)("icon",t.IconButtonActionEnum.CANCEL)("text",!0)("severity",t.SeverityButtonActionEnum.CANCEL),r(),c("label",t.LabelButtonActionEnum.REFUSED)("icon",t.IconButtonActionEnum.REFUSED)("severity",t.SeverityButtonActionEnum.REFUSED)}}function Br(e,i){e&1&&(s(0,"h3"),p(1,"\xBFEst\xE1 seguro de aceptar, no podr\xE1 modificar su elecci\xF3n?"),m())}function Mr(e,i){if(e&1){let t=E();s(0,"p-button",43),v("click",function(){h(t);let a=o();return b(a.isVisibleAcceptedModal=!1)}),m(),s(1,"p-button",45),v("click",function(){h(t);let a=o();return b(a.acceptTrackingLogDocuments())}),m()}if(e&2){let t=o();c("label",t.LabelButtonActionEnum.CANCEL)("icon",t.IconButtonActionEnum.CANCEL)("text",!0)("severity",t.SeverityButtonActionEnum.CANCEL),r(),c("label",t.LabelButtonActionEnum.ACCEPTED)("icon",t.IconButtonActionEnum.ACCEPTED)("severity",t.SeverityButtonActionEnum.REFUSED)}}var li=(()=>{let i=class i{constructor(){this.activatedRoute=_(Ve),this.authService=_(W),this.coreService=_(G),this.formBuilder=_(Ce),this.cataloguesHttpService=_(ce),this.trackingLogsHttpService=_(_e),this.closingLogsHttpService=_(Qe),this.agreementsHttpService=_(Re),this.closedAgreementsHttpService=_(Et),this.filesHttpService=_(Se),this.breadcrumbService=_(ae),this.PrimeIcons=R,this.IconButtonActionEnum=A,this.SeverityButtonActionEnum=Q,this.LabelButtonActionEnum=S,this.BreadcrumbEnum=B,this.TableEnum=X,this.messageService=_(J),this.messageDialogService=_(U),this.buttonActions=[],this.isButtonActions=!1,this.columns=[],this.search=new ee(""),this.items=[],this.formErrors=[],this.files=[],this.types=[],this.closeTypes=[],this.trackingLogType="execution",this.isVisibleRefusedModal=!1,this.isVisibleAcceptedModal=!1,this.isVisibleFilesModal=!1,this.isVisibleTrackingLogModal=!1,this.AddendumEnum=Le,this.CatalogueTrackingLogsStateEnum=se,this.CatalogueClosingNotificationsCloseTypesDocumentEnum=lt,this.FileEnum=Ye,this.validPeriodsClosing=!1,this.validPeriodsExecution=!1,this.checked=!1,this.breadcrumbService.setItems([{label:B.AGREEMENTS,routerLink:[`/core/${this.authService.role.code}/agreement-list`]},{label:B.PERIODS}]),this.buildForm(),this.buildButtonActions(),this.buildColumns()}ngOnInit(){this.findClosingLogCurrentByAgreement(),this.findAgreement(this.agreementId),this.findClosedAgreementByAgreement(),this.loadTypes(),this.loadTypesByCloseType(),setTimeout(()=>{this.validatePeriods()},500),this.activatedRoute.queryParams.subscribe(n=>{this.trackingLogType=n.type})}buildForm(){this.form=this.formBuilder.group({reportFile:[null,le.required],evidenceFile:[null],observation:[null,le.required]})}findAgreement(n){this.agreementsHttpService.findOne(n).subscribe(a=>{this.agreement=a})}findClosingLogCurrentByAgreement(){this.closingLogsHttpService.findClosingLogCurrentByAgreement(this.agreementId).subscribe(n=>{n&&(this.items=[n],this.closingLogCurrent=n)})}loadTypes(){this.types=this.cataloguesHttpService.findByType(pe.PERIODS_TRACKING_LOG)}loadTypesByCloseType(){this.closeTypes=this.cataloguesHttpService.findByParent(this.closingNotification?.closeType?.id)}createClosingLog(){let n=new FormData;for(let a of this.files)n.append("typeIds",a.type.id),n.append("files",a.file);this.closingLogsHttpService.createClosingLog(this.agreementId,n).subscribe(a=>{this.findClosingLogCurrentByAgreement(),this.isVisibleFilesModal=!1})}onUpload(n,a,l){let x=this.files.findIndex(M=>M.type?.id===l.id);x===-1?this.files.push({type:l,file:n.files[0]}):this.files[x]={type:l,file:n.files[0]},a.clear()}onSubmit(){this.validateFilesForm()?this.createClosingLog():this.messageDialogService.fieldErrors(this.formErrors)}buildColumns(){this.columns=[{field:"closingLogDocumentsUpload",header:w.documentName},{field:"closingLogDocuments",header:w.fileName},{field:"trafficLight",header:w.trafficLight},{field:"uploadedAt",header:w.uploadedAt},{field:"user",header:w.user},{field:"state",header:w.state}]}buildButtonActions(){this.buttonActions=[{id:L.TRACKING_LOG,label:S.TRACKING_LOG,icon:A.TRACKING_LOG,command:()=>{this.isVisibleTrackingLogModal=!0}},{id:L.ACCEPTED,label:S.ACCEPTED,icon:A.ACCEPTED,command:()=>{this.isVisibleAcceptedModal=!0}},{id:L.REFUSED,label:S.REFUSED,icon:A.REFUSED,command:()=>{this.isVisibleRefusedModal=!0}}]}validateButtonActions(n){this.buildButtonActions(),(!n||n.state?.code===se.ACCEPTED||n.state?.code===se.REFUSED)&&(this.buttonActions.splice(this.buttonActions.findIndex(a=>a.id===L.ACCEPTED),1),this.buttonActions.splice(this.buttonActions.findIndex(a=>a.id===L.REFUSED),1))}selectItem(n){this.isButtonActions=!0,this.selectedItem=n,this.validateButtonActions(n)}downloadFile(n){this.filesHttpService.downloadFile(n)}refuseTrackingLogDocuments(){this.observationFileField.valid?this.closingLogsHttpService.changeState(this.selectedItem.id,!1,this.observationFileField.value).subscribe(()=>{this.findClosingLogCurrentByAgreement(),this.isVisibleRefusedModal=!1,this.observationFileField.reset()}):(this.form.markAllAsTouched(),this.formErrors=[me.observation],this.messageDialogService.fieldErrors(this.formErrors))}acceptTrackingLogDocuments(){this.closingLogsHttpService.changeState(this.selectedItem.id,!0).subscribe(()=>{this.findClosingLogCurrentByAgreement(),this.isVisibleAcceptedModal=!1})}validateFilesForm(){return this.formErrors=[],this.closeTypes.forEach(n=>{this.files.find(l=>l.type?.id===n?.id)||this.formErrors.push(n.name)}),this.formErrors.length===0}closeModal(){this.isVisibleFilesModal=!1,this.reportFileField.setValue(null),this.evidenceFileField.setValue(null)}validatePeriods(){this.validPeriodsClosing=!1,this.validPeriodsExecution=!1,this.closingNotification&&this.closingNotification.closeType?.code===lt.TERM&&pt(this.trackingLogsHttpService.validationPeriods(this.agreementId,"execution"),this.trackingLogsHttpService.validationPeriods(this.agreementId,"closing")).subscribe(n=>{n.length>0&&(this.validPeriodsExecution=n[0],this.validPeriodsClosing=n[1])})}closeAgreement(){this.closedAgreementsHttpService.createClose(this.agreementId).subscribe(()=>{this.checked=!0,this.findClosedAgreementByAgreement()})}findClosedAgreementByAgreement(){this.closedAgreementsHttpService.findClosedAgreementByAgreement(this.agreementId).subscribe(n=>{n&&(this.checked=!0,this.closedAgreement=n)})}cancelRefusedModal(){this.isVisibleRefusedModal=!1,this.observationFileField.reset()}get reportFileField(){return this.form.controls.reportFile}get evidenceFileField(){return this.form.controls.evidenceFile}get observationFileField(){return this.form.controls.observation}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=O({type:i,selectors:[["app-closing-log-current"]],inputs:{agreementId:"agreementId",closingNotification:"closingNotification"},decls:27,vars:32,consts:[["dt",""],["uploadFiles",""],["dataKey","id","styleClass","p-datatable-striped",3,"value","columns","loading"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[3,"isHide","buttonActions","enabled"],["header","Subir Archivos",3,"visibleChange","visible","modal"],["pTemplate","content"],["pTemplate","footer"],["header","Bit\xE1cora de seguimiento al cierre del Convenio",3,"visibleChange","visible","modal"],[3,"agreementId"],["header","Header",3,"visibleChange","visible","modal"],[1,"grid","p-fluid",3,"formGroup"],[1,"field","col-12","xl:col-12","lg:col-12","md:col-12","sm:col-12"],["appLabel","","for","observation","label","Observaci\xF3n",3,"required"],["pInputTextarea","","id","observation","formControlName","observation"],["appErrorMessage","",3,"errors","touched","dirty"],["severity","error"],[1,"p-toolbar-group-left"],[1,"p-toolbar-group-right"],["pTemplate",""],[1,"ml-2"],[3,"pSortableColumn"],[1,"text-center"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"click","icon"],[1,"ml-2",3,"click","icon","label","text","severity"],[2,"color","var(--green-400)","font-size","3rem",3,"class"],[2,"color","var(--green-400)","font-size","3rem"],[2,"color","var(--red-400)","font-size","3rem"],[1,"card","flex"],[3,"ngModelChange","ngModel","binary","disabled"],["layout","vertical"],["label","Enviar","severity","success",3,"click","disabled"],[1,"p-fluid","grid"],[3,"for"],[1,"p-error"],["id","report","mode","basic","chooseLabel","Cargar","invalidFileSizeMessageDetail","","name","files[]","accept",".pdf,.rar,.zip",3,"uploadHandler","chooseIcon","invalidFileSizeMessageSummary","maxFileSize","auto","customUpload"],["severity","info"],[3,"click","label","icon","text","severity"],[3,"click","icon","label","severity"],[3,"click","label","icon","severity"]],template:function(a,l){if(a&1){let x=E();s(0,"p-panel")(1,"p-table",2,0),d(3,jo,6,2,"ng-template",3)(4,Jo,5,1,"ng-template",4)(5,fr,5,3,"ng-template",5)(6,hr,3,2,"ng-template",6)(7,br,0,0,"ng-template",7),m()(),u(8,"p-divider"),d(9,Lr,3,0,"p-panel"),s(10,"app-button-action",8),v("isHide",function(f){return h(x),b(l.isButtonActions=!f)}),m(),s(11,"p-dialog",9),N("visibleChange",function(f){return h(x),V(l.isVisibleFilesModal,f)||(l.isVisibleFilesModal=f),b(f)}),d(12,yr,3,0,"ng-template",10)(13,Fr,2,7,"ng-template",11),m(),s(14,"p-dialog",12),N("visibleChange",function(f){return h(x),V(l.isVisibleTrackingLogModal,f)||(l.isVisibleTrackingLogModal=f),b(f)}),d(15,Ir,1,1,"app-closing-log-list",13),m(),s(16,"p-dialog",14),N("visibleChange",function(f){return h(x),V(l.isVisibleRefusedModal,f)||(l.isVisibleRefusedModal=f),b(f)}),d(17,wr,2,0,"ng-template",4),s(18,"form",15)(19,"div",16),u(20,"label",17)(21,"textarea",18)(22,"small",19),m()(),d(23,Dr,2,7,"ng-template",11),m(),s(24,"p-dialog",14),N("visibleChange",function(f){return h(x),V(l.isVisibleAcceptedModal,f)||(l.isVisibleAcceptedModal=f),b(f)}),d(25,Br,2,0,"ng-template",4)(26,Mr,2,7,"ng-template",11),m()}a&2&&(r(),c("value",l.items)("columns",l.columns)("loading",l.coreService.isLoading),r(8),g(9,l.closingLogCurrent&&l.closingLogCurrent.state&&l.closingLogCurrent.state.code==="ACCEPTED"?9:-1),r(),c("buttonActions",l.buttonActions)("enabled",l.isButtonActions),r(),K(q(28,Wo)),k("visible",l.isVisibleFilesModal),c("modal",!0),r(3),K(q(29,zo)),k("visible",l.isVisibleTrackingLogModal),c("modal",!0),r(),g(15,l.isVisibleTrackingLogModal?15:-1),r(),K(q(30,ri)),k("visible",l.isVisibleRefusedModal),c("modal",!0),r(2),c("formGroup",l.form),r(2),c("required",l.observationFileField),r(2),c("errors",l.observationFileField.errors)("touched",l.observationFileField.touched)("dirty",l.observationFileField.dirty),r(2),K(q(31,ri)),k("visible",l.isVisibleAcceptedModal),c("modal",!0))},dependencies:[Ie,we,be,H,oe,Z,ge,Ae,Te,ue,Tt,z,te,ne,ie,ye,Fe,he,et,Ze,fe,De,Xe,Bt,oi,Y],styles:[".enabled[_ngcontent-%COMP%]{background-color:var(--red-200)}"]});let e=i;return e})();var kr=e=>[e];function Vr(e,i){if(e&1&&u(0,"app-period-closing-list",0),e&2){let t=o();c("agreementId",t.agreementId)}}function Nr(e,i){if(e&1&&(s(0,"tr")(1,"th"),p(2),m(),s(3,"th"),p(4),m(),s(5,"th"),p(6),m(),s(7,"th"),p(8),m(),s(9,"th"),p(10),m()()),e&2){let t=o(3);r(2),D(t.ClosingNotificationEnum.closeType2),r(2),D(t.ClosingNotificationEnum.closeDetail),r(2),D(t.ClosingNotificationEnum.closedAt),r(2),D(t.ClosingNotificationEnum.registeredAt),r(2),D(t.ClosingNotificationEnum.user)}}function Rr(e,i){if(e&1&&(s(0,"tr")(1,"td"),p(2),m(),s(3,"td"),p(4),m(),s(5,"td"),p(6),F(7,"customFormatDate"),m(),s(8,"td"),p(9),F(10,"date"),m(),s(11,"td"),p(12),m()()),e&2){let t=i.$implicit;r(2),D(t.closeType==null?null:t.closeType.name),r(2),D(t.closeDetail),r(2),D(ve(7,5,t.closedAt)),r(3),D(P(10,7,t.registeredAt,"dd/MM/yyyy HH:mm")),r(3),D(t.user.name+" "+t.user.lastname)}}function Or(e,i){if(e&1&&(s(0,"p-panel",2)(1,"form",3)(2,"p-table",4),d(3,Nr,11,5,"ng-template",5)(4,Rr,13,10,"ng-template",6),m()()()),e&2){let t=o(2);r(2),c("value",Ke(2,kr,t.closingNotification))("loading",t.coreService.isLoading)}}function $r(e,i){if(e&1&&d(0,Or,5,4,"p-panel",2),e&2){let t=o();g(0,(t.closingNotification.closeType==null?null:t.closingNotification.closeType.code)!==t.CatalogueClosingNotificationsCloseTypeEnum.TERM?0:-1)}}function Hr(e,i){if(e&1&&u(0,"app-period-closing-list",0),e&2){let t=o();c("agreementId",t.agreementId)}}var ai=(()=>{let i=class i{constructor(){this.authService=_(W),this.breadcrumbService=_(ae),this.agreementsHttpService=_(Re),this.confirmationService=_(je),this.closingNotificationsHttpService=_(xt),this.cataloguesHttpService=_(ce),this.coreService=_(G),this.messageDialogService=_(U),this.formBuilder=_(Ce),this.Validators=le,this.closeTypes=[],this.AgreementFormEnum=de,this.AgreementStateEnum=Je,this.SkeletonEnum=ht,this.ClosingNotificationEnum=vt,this.PrimeIcons=R,this.CatalogueAgreementsTypeEnum=Ct,this.CatalogueClosingNotificationsCloseTypeEnum=ft,this.CatalogueAgreementStatesStateEnum=Ne,this.breadcrumbService.setItems([{label:B.AGREEMENTS,routerLink:[`/core/${this.authService.role.code}/agreement-list`]},{label:B.CLOSING_NOTIFICATION}])}ngOnInit(){this.loadCloseTypes(),this.findClosingNotificationByAgreement()}findClosingNotificationByAgreement(){this.closingNotificationsHttpService.findClosingNotificationByAgreement(this.agreementId).subscribe(n=>{this.closingNotification=n})}loadCloseTypes(){this.closeTypes=this.cataloguesHttpService.findByType(pe.CLOSING_NOTIFICATIONS_CLOSE_TYPE)}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=O({type:i,selectors:[["app-agreement-termination-list"]],inputs:{agreementId:"agreementId"},decls:6,vars:5,consts:[[3,"agreementId"],[3,"agreementId","closingNotification"],["header","NOTIFICACI\xD3N INICIO DEL PROCESO DE CIERRE DEL CONVENIO"],[1,"p-fluid","grid"],["dataKey","id","styleClass","p-datatable-striped",3,"value","loading"],["pTemplate","header"],["pTemplate","body"]],template:function(a,l){a&1&&(d(0,Vr,1,1,"app-period-closing-list",0)(1,$r,1,1)(2,Hr,1,1,"app-period-closing-list",0),u(3,"p-divider"),s(4,"p-panel"),u(5,"app-closing-log-current",1),m()),a&2&&(g(0,l.closingNotification&&(l.closingNotification.closeType==null?null:l.closingNotification.closeType.code)===l.CatalogueClosingNotificationsCloseTypeEnum.TERM?0:-1),r(),g(1,l.closingNotification?1:-1),r(),g(2,l.closingNotification&&(l.closingNotification.agreement.initialState==null?null:l.closingNotification.agreement.initialState.code)===l.CatalogueAgreementStatesStateEnum.CLOSING_PROCESS?2:-1),r(3),c("agreementId",l.agreementId)("closingNotification",l.closingNotification))},dependencies:[H,ge,ue,At,z,fe,Xe,ni,li,Y,Oe]});let e=i;return e})();var Gr=[{path:"agreement-list",component:Qt},{path:"period-list/:agreementId",component:ti},{path:"tracking-log-list",component:Ge},{path:"agreement-termination-list/:agreementId",component:ai},{path:"closed",loadChildren:()=>import("./chunk-KQMEXZCL.js").then(e=>e.ClosedModule)}],si=(()=>{let i=class i{};i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=ze({type:i}),i.\u0275inj=We({imports:[rt.forChild(Gr),rt]});let e=i;return e})();var _s=(()=>{let i=class i{};i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=ze({type:i}),i.\u0275inj=We({imports:[ut,si,zt,Nt,St,kt,Vt,wt,Ht,yt,Ft,Gt,qt,jt,Yt,Rt,Dt,Ot,Wt,It,Pt,Mt]});let e=i;return e})();export{oi as a,_s as b};
