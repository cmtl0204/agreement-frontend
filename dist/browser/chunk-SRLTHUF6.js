import{a as it}from"./chunk-TCYIAOJ2.js";import{b as Ye}from"./chunk-SCSE35X6.js";import{b as Ce}from"./chunk-V6OR62GO.js";import{a as Xe}from"./chunk-PEMCYH62.js";import{c as Ze,d as et,f as tt}from"./chunk-6TJ5HOZS.js";import{b as Ke}from"./chunk-ISADC5UE.js";import{c as Me,e as De}from"./chunk-I6ACFXRE.js";import{Ea as Ge,Ga as Qe,Ja as Ue,P as Se,Q as Ae,Ta as qe,Wa as Je,Y as Ee,Z as Oe,_ as Be,ba as we,da as Ne,ga as ke,na as Fe,o as be,oa as Re,pa as Ve,qa as Pe,ta as ze,va as We,w as ye,x as Te,xa as $e,z as xe,za as He}from"./chunk-RL7JZA26.js";import{e as ve,j as he,k as _e,m as Ie,n as Le,r as je}from"./chunk-XHLRH3DP.js";import{$ as I,H as D,I as b,J as w,K as N,L as ae,M as E,N as pe,P as se,da as ce,fa as de,ja as ue,k as B,ka as fe,ma as ge,o as A,p as ie,r as ne,s as oe,u as re,v as le,x as me}from"./chunk-EXGEWYYG.js";import{$ as V,Ca as f,E as v,Fa as H,H as c,Ha as G,Ia as Q,J as T,Ja as U,K as h,La as g,Na as M,Ob as te,Rb as O,T as R,Xa as _,_ as r,bb as q,hb as J,ja as d,ka as u,la as l,oa as P,pa as x,qa as L,sa as z,ta as j,tb as K,ua as a,ub as X,va as m,vb as Y,wa as p,wb as Z,xa as W,xb as ee,ya as $,za as C,zb as S}from"./chunk-EUOB27Q6.js";var mt=(e,t,n,o,i,s,y)=>({"p-timeline p-component":!0,"p-timeline-left":e,"p-timeline-right":t,"p-timeline-top":n,"p-timeline-bottom":o,"p-timeline-alternate":i,"p-timeline-vertical":s,"p-timeline-horizontal":y}),k=e=>({$implicit:e});function at(e,t){e&1&&C(0)}function pt(e,t){e&1&&C(0)}function st(e,t){if(e&1&&(W(0),d(1,pt,1,0,"ng-container",5),$()),e&2){let n=f().$implicit,o=f();r(),l("ngTemplateOutlet",o.markerTemplate)("ngTemplateOutletContext",_(2,k,n))}}function ct(e,t){e&1&&p(0,"div",10),e&2&&u("data-pc-section","marker")}function dt(e,t){e&1&&p(0,"div",11)}function ut(e,t){e&1&&C(0)}function ft(e,t){if(e&1&&(a(0,"div",3)(1,"div",4),d(2,at,1,0,"ng-container",5),m(),a(3,"div",6),d(4,st,2,4,"ng-container",7)(5,ct,1,1,"ng-template",null,0,J)(7,dt,1,0,"div",8),m(),a(8,"div",9),d(9,ut,1,0,"ng-container",5),m()()),e&2){let n=t.$implicit,o=t.last,i=U(6),s=f();u("data-pc-section","event"),r(),u("data-pc-section","opposite"),r(),l("ngTemplateOutlet",s.oppositeTemplate)("ngTemplateOutletContext",_(11,k,n)),r(),u("data-pc-section","separator"),r(),l("ngIf",s.markerTemplate)("ngIfElse",i),r(3),l("ngIf",!o),r(),u("data-pc-section","content"),r(),l("ngTemplateOutlet",s.contentTemplate)("ngTemplateOutletContext",_(13,k,n))}}var nt=(()=>{class e{el;value;style;styleClass;align="left";layout="vertical";templates;contentTemplate;oppositeTemplate;markerTemplate;constructor(n){this.el=n}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(n=>{switch(n.getType()){case"content":this.contentTemplate=n.template;break;case"opposite":this.oppositeTemplate=n.template;break;case"marker":this.markerTemplate=n.template;break}})}static \u0275fac=function(o){return new(o||e)(V(R))};static \u0275cmp=T({type:e,selectors:[["p-timeline"]],contentQueries:function(o,i,s){if(o&1&&H(s,A,4),o&2){let y;G(y=Q())&&(i.templates=y)}},hostAttrs:[1,"p-element"],inputs:{value:"value",style:"style",styleClass:"styleClass",align:"align",layout:"layout"},decls:2,vars:15,consts:[["marker",""],[3,"ngStyle","ngClass"],["class","p-timeline-event",4,"ngFor","ngForOf"],[1,"p-timeline-event"],[1,"p-timeline-event-opposite"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-timeline-event-separator"],[4,"ngIf","ngIfElse"],["class","p-timeline-event-connector",4,"ngIf"],[1,"p-timeline-event-content"],[1,"p-timeline-event-marker"],[1,"p-timeline-event-connector"]],template:function(o,i){o&1&&(a(0,"div",1),d(1,ft,10,15,"div",2),m()),o&2&&(x(i.styleClass),l("ngStyle",i.style)("ngClass",q(7,mt,i.align==="left",i.align==="right",i.align==="top",i.align==="bottom",i.align==="alternate",i.layout==="vertical",i.layout==="horizontal")),u("data-pc-name","timeline")("data-pc-section","root"),r(),l("ngForOf",i.value))},dependencies:[K,X,Y,ee,Z],styles:[`@layer primeng{.p-timeline{display:flex;flex-grow:1;flex-direction:column}.p-timeline-left .p-timeline-event-opposite{text-align:right}.p-timeline-left .p-timeline-event-content{text-align:left}.p-timeline-right .p-timeline-event{flex-direction:row-reverse}.p-timeline-right .p-timeline-event-opposite{text-align:left}.p-timeline-right .p-timeline-event-content{text-align:right}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(2n){flex-direction:row-reverse}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-opposite{text-align:right}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-content{text-align:left}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(2n) .p-timeline-event-opposite{text-align:left}.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(2n) .p-timeline-event-content{text-align:right}.p-timeline-event{display:flex;position:relative;min-height:70px}.p-timeline-event:last-child{min-height:0}.p-timeline-event-opposite,.p-timeline-event-content{flex:1;padding:0 1rem;min-width:100px}.p-timeline-event-separator{flex:0;display:flex;align-items:center;flex-direction:column}.p-timeline-event-marker{display:flex;align-self:baseline}.p-timeline-event-connector{flex-grow:1}.p-timeline-horizontal{flex-direction:row}.p-timeline-horizontal .p-timeline-event{flex-direction:column;flex:1}.p-timeline-horizontal .p-timeline-event:last-child{flex:0}.p-timeline-horizontal .p-timeline-event-separator{flex-direction:row}.p-timeline-horizontal .p-timeline-event-connector{width:100%}.p-timeline-bottom .p-timeline-event{flex-direction:column-reverse}.p-timeline-horizontal.p-timeline-alternate .p-timeline-event:nth-child(2n){flex-direction:column-reverse}}
`],encapsulation:2,changeDetection:0})}return e})(),ot=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=h({type:e});static \u0275inj=v({imports:[S,ie]})}return e})();var vt=(e,t)=>t.id,ht=e=>({"background-color":e});function _t(e,t){if(e&1&&p(0,"app-skeleton",0),e&2){let n=f();l("type",n.SkeletonEnum.CARD)}}function bt(e,t){if(e&1&&(a(0,"span",8),p(1,"i"),m()),e&2){let n=t.$implicit;P(_(4,ht,n.color)),r(),x(n.icon)}}function yt(e,t){if(e&1&&(a(0,"b"),g(1,"Campo:"),m(),g(2),p(3,"br"),a(4,"b"),g(5,"Valor anterior:"),m(),g(6),p(7,"br"),a(8,"b"),g(9,"Nuevo Valor:"),m(),g(10),p(11,"p-divider")),e&2){let n=t.$implicit;r(2),M(" ",n.path," "),r(4),M(" ",n.oldValue," "),r(4),M(" ",n.newValue," ")}}function Tt(e,t){if(e&1&&(a(0,"p-card",9),z(1,yt,12,3,null,null,vt),m()),e&2){let n=t.$implicit;l("header",n.status)("subheader",n.date),r(),j(n.agreementLogDetails)}}function xt(e,t){if(e&1&&(a(0,"p-toolbar")(1,"div",1),p(2,"p-button",2),m(),p(3,"div",3),m(),a(4,"p-panel",4)(5,"p-timeline",5),d(6,bt,2,6,"ng-template",6)(7,Tt,3,2,"ng-template",7),m()()),e&2){let n=f();r(2),l("icon",n.IconButtonActionEnum.DOWNLOAD)("label",n.LabelButtonActionEnum.DOWNLOAD)("loading",n.coreService.isLoading)("severity",n.SeverityButtonActionEnum.DOWNLOAD),r(2),l("header",n.AgreementLogEnum.header),r(),l("value",n.events)}}var rt=(()=>{let t=class t{constructor(){this.authService=c(ge),this.coreService=c(ne),this.agreementsHttpService=c(ce),this.agreementLogsHttpService=c(de),this.agreementsService=c(me),this.router=c(te),this.breadcrumbService=c(re),this.PrimeIcons=B,this.IconButtonActionEnum=N,this.SeverityButtonActionEnum=ae,this.LabelButtonActionEnum=w,this.BreadcrumbEnum=E,this.TableEnum=se,this.messageService=c(oe),this.messageDialogService=c(le),this.buttonActions=[],this.isButtonActions=!1,this.columns=[],this.search=new be(""),this.items=[],this.events=[],this.isVisibleAgreementView=!1,this.SkeletonEnum=pe,this.AgreementLogEnum=I,this.breadcrumbService.setItems([{label:E.AGREEMENTS},{label:E.AGREEMENTS_LOG}]),this.buildButtonActions(),this.buildColumns()}ngOnInit(){this.findAgreementLogsByAgreement()}findAgreementLogsByAgreement(){this.agreementLogsHttpService.findAgreementLogsByAgreement(this.id).subscribe(o=>{this.items=o,this.events=this.items.map(i=>({status:`${i.user.name} ${i.user.lastname}`,date:ue(i.registeredAt,"MM-dd-yyyy hh:mm:ss"),icon:B.ARROW_DOWN,color:"var(--primary-color)",agreementLogDetails:i.agreementLogDetails}))})}buildColumns(){this.columns=[{field:"registeredAt",header:I.registeredAt},{field:"user",header:I.user}]}buildButtonActions(){this.buttonActions=[{id:b.VIEW,label:w.VIEW,icon:N.VIEW,command:()=>{this.redirectCreateForm()}}]}redirectCreateForm(){this.agreementsService.clearAgreement(),this.router.navigate(["/core/agreements","register"])}validateButtonActions(o){this.buildButtonActions(),o.enabled&&this.buttonActions.splice(this.buttonActions.findIndex(i=>i.id===b.COMPLETE),1),o.enabled||(this.buttonActions.splice(this.buttonActions.findIndex(i=>i.id===b.VIEW),1),this.buttonActions.splice(this.buttonActions.findIndex(i=>i.id===b.EDIT),1))}selectItem(o){this.agreementsHttpService.findOne(o.id).subscribe(i=>{this.isButtonActions=!0,this.selectedItem=o,this.validateButtonActions(o),this.agreementsService.agreement=i})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=T({type:t,selectors:[["app-log"]],inputs:{id:"id"},decls:2,vars:2,consts:[[3,"type"],[1,"p-toolbar-group-left"],[3,"icon","label","loading","severity"],[1,"p-toolbar-group-right"],[3,"header"],["align","alternate","styleClass","customized-timeline",3,"value"],["pTemplate","marker"],["pTemplate","content"],[1,"flex","w-2rem","h-2rem","align-items-center","justify-content-center","text-white","border-circle","z-1","shadow-1"],[3,"header","subheader"]],template:function(i,s){i&1&&d(0,_t,1,1,"app-skeleton",0)(1,xt,8,6),i&2&&(L(0,s.coreService.isLoading?0:-1),r(),L(1,s.coreService.isLoading?-1:1))},dependencies:[Re,A,he,Oe,Ie,Se,Ve,nt]});let e=t;return e})();var Ct=[{path:"",component:rt,canActivate:[Ce],data:{roles:[D.NATIONAL_SUPERVISOR,D.INTERNATIONAL_SUPERVISOR]}}],lt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=h({type:t}),t.\u0275inj=v({imports:[O.forChild(Ct),O]});let e=t;return e})();var Fi=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=h({type:t}),t.\u0275inj=v({providers:[fe],imports:[S,lt,Te,Je,_e,Be,De,Le,xe,Me,ve,Ee,je,Ae,Ke,Pe,$e,Ne,et,we,tt,Ze,it,ze,We,Ye,ye,Fe,Qe,Ue,ke,qe,He,Xe,Ge,ot]});let e=t;return e})();export{Fi as LogModule};
