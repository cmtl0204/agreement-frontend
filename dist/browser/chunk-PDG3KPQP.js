import{T as Le,U as W,W as J,h as Fe}from"./chunk-QE2E6YRM.js";import{b as F,d as Se,e as Te,l as X}from"./chunk-YQJQS4JL.js";import{a as g,b as ye,h as Oe,l as Ie,m as ve,n as Ce,o as G,p as j}from"./chunk-CK22UZYV.js";import{$ as M,Aa as k,Ba as v,C as ee,Ca as r,Da as ce,E as te,Ea as N,Fa as R,Ga as E,Ha as C,I as x,Ia as S,J as ie,Ja as z,K as ne,La as w,Ma as $,Na as K,O as h,P as m,T as oe,Ta as pe,U as L,Wa as de,Xa as T,Ya as H,Za as q,_ as c,da as le,ga as D,hb as B,ia as se,ja as p,ka as f,kb as ue,la as a,lb as b,ma as ae,mb as U,nb as _e,oa as re,pa as Q,tb as he,ua as d,ub as me,va as u,vb as fe,wa as A,wb as ge,xa as O,xb as xe,ya as I,za as y,zb as be}from"./chunk-EUOB27Q6.js";var ke=["headerchkbox"],Ee=["filter"],Me=["lastHiddenFocusableElement"],De=["firstHiddenFocusableElement"],Ke=["scroller"],He=["list"],Ae=[[["p-header"]],[["p-footer"]]],Re=["p-header","p-footer"],P=(n,l)=>({$implicit:n,options:l}),we=n=>({"p-checkbox-disabled":n}),ze=(n,l,e)=>({"p-highlight":n,"p-focus":l,"p-disabled":e}),Ve=n=>({options:n}),Y=n=>({height:n}),Ge=()=>({}),Pe=n=>({$implicit:n}),Qe=(n,l,e)=>({"p-listbox-item":!0,"p-highlight":n,"p-focus":l,"p-disabled":e}),Ne=(n,l)=>({$implicit:n,index:l}),$e=n=>({"p-highlight":n});function qe(n,l){n&1&&y(0)}function Be(n,l){if(n&1&&(d(0,"div",19),N(1),p(2,qe,1,0,"ng-container",20),u()),n&2){let e=r();c(2),a("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",H(2,P,e.modelValue(),e.visibleOptions()))}}function Ue(n,l){n&1&&A(0,"CheckIcon",29),n&2&&(a("styleClass","p-checkbox-icon"),f("aria-hidden",!0))}function je(n,l){}function We(n,l){n&1&&p(0,je,0,0,"ng-template")}function Xe(n,l){if(n&1&&(d(0,"span",30),p(1,We,1,0,null,31),u()),n&2){let e=r(4);f("aria-hidden",!0),c(),a("ngTemplateOutlet",e.checkIconTemplate)}}function Je(n,l){if(n&1&&(O(0),p(1,Ue,1,2,"CheckIcon",27)(2,Xe,2,2,"span",28),I()),n&2){let e=r(3);c(),a("ngIf",!e.checkIconTemplate),c(),a("ngIf",e.checkIconTemplate)}}function Ye(n,l){if(n&1){let e=k();d(0,"div",23),v("click",function(t){h(e);let o=r(2);return m(o.onToggleAll(t))})("keydown",function(t){h(e);let o=r(2);return m(o.onHeaderCheckboxKeyDown(t))}),d(1,"div",24)(2,"input",25,4),v("focus",function(t){h(e);let o=r(2);return m(o.onHeaderCheckboxFocus(t))})("blur",function(t){h(e);let o=r(2);return m(o.onHeaderCheckboxBlur(t))}),u()(),d(4,"div",26),p(5,Je,3,2,"ng-container",15),u()()}if(n&2){let e=r(2);a("ngClass",T(8,we,e.disabled||e.toggleAllDisabled)),c(),f("data-p-hidden-accessible",!0),c(),a("disabled",e.disabled||e.toggleAllDisabled),f("checked",e.allSelected())("aria-label",e.toggleAllAriaLabel),c(2),a("ngClass",q(10,ze,e.allSelected(),e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),f("aria-checked",e.allSelected()),c(),a("ngIf",e.allSelected())}}function Ze(n,l){n&1&&y(0)}function et(n,l){if(n&1&&(O(0),p(1,Ze,1,0,"ng-container",20),I()),n&2){let e=r(2);c(),a("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",T(2,Ve,e.filterOptions))}}function tt(n,l){n&1&&A(0,"SearchIcon",29),n&2&&(a("styleClass","p-listbox-filter-icon"),f("aria-hidden",!0))}function it(n,l){}function nt(n,l){n&1&&p(0,it,0,0,"ng-template")}function ot(n,l){if(n&1&&(d(0,"span",37),p(1,nt,1,0,null,31),u()),n&2){let e=r(4);f("aria-hidden",!0),c(),a("ngTemplateOutlet",e.filterIconTemplate)}}function lt(n,l){if(n&1){let e=k();d(0,"div",34)(1,"input",35,5),v("input",function(t){h(e);let o=r(3);return m(o.onFilterChange(t))})("keydown",function(t){h(e);let o=r(3);return m(o.onFilterKeyDown(t))})("blur",function(t){h(e);let o=r(3);return m(o.onFilterBlur(t))}),u(),p(3,tt,1,2,"SearchIcon",27)(4,ot,2,2,"span",36),u()}if(n&2){let e=r(3);c(),a("value",e._filterValue()||"")("disabled",e.disabled)("tabindex",!e.disabled&&!e.focused?e.tabindex:-1),f("aria-owns",e.id+"_list")("aria-activedescendant",e.focusedOptionId)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel),c(2),a("ngIf",!e.filterIconTemplate),c(),a("ngIf",e.filterIconTemplate)}}function st(n,l){if(n&1&&(p(0,lt,5,9,"div",32),d(1,"span",33),w(2),u()),n&2){let e=r(2);a("ngIf",e.filter),c(),f("data-p-hidden-accessible",!0),c(),K(" ",e.filterResultMessageText," ")}}function at(n,l){if(n&1&&(d(0,"div",19),p(1,Ye,6,14,"div",21)(2,et,2,4,"ng-container",22)(3,st,3,3,"ng-template",null,3,B),u()),n&2){let e=z(4),i=r();c(),a("ngIf",i.checkbox&&i.multiple&&i.showToggleAll),c(),a("ngIf",i.filterTemplate)("ngIfElse",e)}}function rt(n,l){n&1&&y(0)}function ct(n,l){if(n&1&&p(0,rt,1,0,"ng-container",20),n&2){let e=l.$implicit,i=l.options;r(2);let t=z(9);a("ngTemplateOutlet",t)("ngTemplateOutletContext",H(2,P,e,i))}}function pt(n,l){n&1&&y(0)}function dt(n,l){if(n&1&&p(0,pt,1,0,"ng-container",20),n&2){let e=l.options,i=r(3);a("ngTemplateOutlet",i.loaderTemplate)("ngTemplateOutletContext",T(2,Ve,e))}}function ut(n,l){n&1&&(O(0),p(1,dt,1,4,"ng-template",40),I())}function _t(n,l){if(n&1){let e=k();d(0,"p-scroller",38,6),v("onLazyLoad",function(t){h(e);let o=r();return m(o.onLazyLoad.emit(t))}),p(2,ct,1,5,"ng-template",39)(3,ut,2,0,"ng-container",15),u()}if(n&2){let e=r();re(T(9,Y,e.scrollHeight)),a("items",e.visibleOptions())("itemSize",e.virtualScrollItemSize)("autoSize",!0)("tabindex",-1)("lazy",e.lazy)("options",e.virtualScrollOptions),c(3),a("ngIf",e.loaderTemplate)}}function ht(n,l){n&1&&y(0)}function mt(n,l){if(n&1&&(O(0),p(1,ht,1,0,"ng-container",20),I()),n&2){let e=r(),i=z(9);c(),a("ngTemplateOutlet",i)("ngTemplateOutletContext",H(3,P,e.visibleOptions(),de(2,Ge)))}}function ft(n,l){if(n&1&&(d(0,"span"),w(1),u()),n&2){let e=r(2).$implicit,i=r(2);c(),$(i.getOptionGroupLabel(e.optionGroup))}}function gt(n,l){n&1&&y(0)}function xt(n,l){if(n&1&&(O(0),d(1,"li",44),p(2,ft,2,1,"span",15)(3,gt,1,0,"ng-container",20),u(),I()),n&2){let e=r(),i=e.$implicit,t=e.index,o=r().options,s=r();c(),a("ngStyle",T(5,Y,o.itemSize+"px")),f("id",s.id+"_"+s.getOptionIndex(t,o)),c(),a("ngIf",!s.groupTemplate),c(),a("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",T(7,Pe,i.optionGroup))}}function bt(n,l){n&1&&A(0,"CheckIcon",29),n&2&&(a("styleClass","p-checkbox-icon"),f("aria-hidden",!0))}function yt(n,l){}function Ot(n,l){n&1&&p(0,yt,0,0,"ng-template")}function It(n,l){if(n&1&&(d(0,"span",30),p(1,Ot,1,0,null,31),u()),n&2){let e=r(6);f("aria-hidden",!0),c(),a("ngTemplateOutlet",e.checkIconTemplate)}}function vt(n,l){if(n&1&&(O(0),p(1,bt,1,2,"CheckIcon",27)(2,It,2,2,"span",28),I()),n&2){let e=r(5);c(),a("ngIf",!e.checkIconTemplate),c(),a("ngIf",e.checkIconTemplate)}}function Ct(n,l){if(n&1&&(d(0,"div",47)(1,"div",48),p(2,vt,3,2,"ng-container",15),u()()),n&2){let e=r(2).$implicit,i=r(2);a("ngClass",T(3,we,i.disabled||i.isOptionDisabled(e))),c(),a("ngClass",T(5,$e,i.isSelected(e))),c(),a("ngIf",i.isSelected(e))}}function St(n,l){if(n&1&&(d(0,"span"),w(1),u()),n&2){let e=r(2).$implicit,i=r(2);c(),$(i.getOptionLabel(e))}}function Tt(n,l){n&1&&y(0)}function Ft(n,l){if(n&1){let e=k();O(0),d(1,"li",45),v("click",function(t){h(e);let o=r(),s=o.$implicit,_=o.index,V=r().options,Z=r();return m(Z.onOptionSelect(t,s,Z.getOptionIndex(_,V)))})("dblclick",function(t){h(e);let o=r().$implicit,s=r(2);return m(s.onOptionDoubleClick(t,o))})("mousedown",function(t){h(e);let o=r().index,s=r().options,_=r();return m(_.onOptionMouseDown(t,_.getOptionIndex(o,s)))})("mouseenter",function(t){h(e);let o=r().index,s=r().options,_=r();return m(_.onOptionMouseEnter(t,_.getOptionIndex(o,s)))})("touchend",function(){h(e);let t=r(3);return m(t.onOptionTouchEnd())}),p(2,Ct,3,7,"div",46)(3,St,2,1,"span",15)(4,Tt,1,0,"ng-container",20),u(),I()}if(n&2){let e=r(),i=e.$implicit,t=e.index,o=r().options,s=r();c(),a("ngStyle",T(12,Y,o.itemSize+"px"))("ngClass",q(14,Qe,s.isSelected(i),s.focusedOptionIndex()===s.getOptionIndex(t,o),s.isOptionDisabled(i))),f("id",s.id+"_"+s.getOptionIndex(t,o))("aria-label",s.getOptionLabel(i))("aria-selected",s.isSelected(i))("aria-disabled",s.isOptionDisabled(i))("aria-setsize",s.ariaSetSize)("ariaPosInset",s.getAriaPosInset(s.getOptionIndex(t,o))),c(),a("ngIf",s.checkbox&&s.multiple),c(),a("ngIf",!s.itemTemplate),c(),a("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",H(18,Ne,i,s.getOptionIndex(t,o)))}}function Lt(n,l){if(n&1&&p(0,xt,4,9,"ng-container",15)(1,Ft,5,21,"ng-container",15),n&2){let e=l.$implicit,i=r(2);a("ngIf",i.isOptionGroup(e)),c(),a("ngIf",!i.isOptionGroup(e))}}function wt(n,l){if(n&1&&(O(0),w(1),I()),n&2){let e=r(3);c(),K(" ",e.emptyFilterMessageText," ")}}function Vt(n,l){n&1&&y(0,null,8)}function kt(n,l){if(n&1&&(d(0,"li",49),p(1,wt,2,1,"ng-container",22)(2,Vt,2,0,"ng-container",31),u()),n&2){let e=r(2);c(),a("ngIf",!e.emptyFilterTemplate&&!e.emptyTemplate)("ngIfElse",e.emptyFilter),c(),a("ngTemplateOutlet",e.emptyFilterTemplate||e.emptyTemplate)}}function Et(n,l){if(n&1&&(O(0),w(1),I()),n&2){let e=r(3);c(),K(" ",e.emptyMessage," ")}}function Mt(n,l){n&1&&y(0,null,9)}function Dt(n,l){if(n&1&&(d(0,"li",49),p(1,Et,2,1,"ng-container",22)(2,Mt,2,0,"ng-container",31),u()),n&2){let e=r(2);c(),a("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),c(),a("ngTemplateOutlet",e.emptyTemplate)}}function Kt(n,l){if(n&1){let e=k();d(0,"ul",41,7),v("focus",function(t){h(e);let o=r();return m(o.onListFocus(t))})("blur",function(t){h(e);let o=r();return m(o.onListBlur(t))})("keydown",function(t){h(e);let o=r();return m(o.onListKeyDown(t))}),p(2,Lt,2,2,"ng-template",42)(3,kt,3,3,"li",43)(4,Dt,3,3,"li",43),u()}if(n&2){let e=l.$implicit,i=l.options,t=r();a("tabindex",-1)("ngClass",i.contentStyleClass)("ngStyle",i.contentStyle),f("aria-multiselectable",!0)("aria-activedescendant",t.focused?t.focusedOptionId:void 0)("aria-label",t.ariaLabel)("aria-multiselectable",t.multiple)("aria-disabled",t.disabled),c(2),a("ngForOf",e),c(),a("ngIf",t.hasFilter()&&t.isEmpty()),c(),a("ngIf",!t.hasFilter()&&t.isEmpty())}}function Ht(n,l){n&1&&y(0)}function At(n,l){if(n&1&&(d(0,"div",50),N(1,1),p(2,Ht,1,0,"ng-container",20),u()),n&2){let e=r();c(2),a("ngTemplateOutlet",e.footerTemplate)("ngTemplateOutletContext",H(2,P,e.modelValue(),e.visibleOptions()))}}function Rt(n,l){if(n&1&&(d(0,"span",18),w(1),u()),n&2){let e=r();c(),K(" ",e.emptyMessage," ")}}var zt={provide:Fe,useExisting:ee(()=>Gt),multi:!0},Gt=(()=>{class n{el;cd;filterService;config;renderer;id;searchMessage;emptySelectionMessage;selectionMessage;autoOptionFocus=!0;ariaLabel;selectOnFocus;searchLocale;focusOnHover;filterMessage;filterFields;lazy=!1;virtualScroll;virtualScrollItemSize;virtualScrollOptions;scrollHeight="200px";tabindex=0;multiple;style;styleClass;listStyle;listStyleClass;readonly;disabled;checkbox=!1;filter=!1;filterBy;filterMatchMode="contains";filterLocale;metaKeySelection=!1;dataKey;showToggleAll=!0;optionLabel;optionValue;optionGroupChildren="items";optionGroupLabel="label";optionDisabled;ariaFilterLabel;filterPlaceHolder;emptyFilterMessage;emptyMessage;group;get options(){return this._options()}set options(e){this._options.set(e)}get filterValue(){return this._filterValue()}set filterValue(e){this._filterValue.set(e)}get selectAll(){return this._selectAll}set selectAll(e){this._selectAll=e}onChange=new L;onClick=new L;onDblClick=new L;onFilter=new L;onFocus=new L;onBlur=new L;onSelectAllChange=new L;headerCheckboxViewChild;filterViewChild;lastHiddenFocusableElement;firstHiddenFocusableElement;scroller;listViewChild;headerFacet;footerFacet;templates;itemTemplate;groupTemplate;headerTemplate;filterTemplate;footerTemplate;emptyFilterTemplate;emptyTemplate;filterIconTemplate;checkIconTemplate;_filterValue=D(null);_filteredOptions;filterOptions;filtered;value;onModelChange=()=>{};onModelTouched=()=>{};optionTouched;focus;headerCheckboxFocus;translationSubscription;focused;get containerClass(){return{"p-listbox p-component":!0,"p-disabled":this.disabled}}get focusedOptionId(){return this.focusedOptionIndex()!==-1?`${this.id}_${this.focusedOptionIndex()}`:null}get filterResultMessageText(){return g.isNotEmpty(this.visibleOptions())?this.filterMessageText.replaceAll("{0}",this.visibleOptions().length):this.emptyFilterMessageText}get filterMessageText(){return this.filterMessage||this.config.translation.searchMessage||""}get searchMessageText(){return this.searchMessage||this.config.translation.searchMessage||""}get emptyFilterMessageText(){return this.emptyFilterMessage||this.config.translation.emptySearchMessage||this.config.translation.emptyFilterMessage||""}get selectionMessageText(){return this.selectionMessage||this.config.translation.selectionMessage||""}get emptySelectionMessageText(){return this.emptySelectionMessage||this.config.translation.emptySelectionMessage||""}get selectedMessageText(){return this.hasSelectedOption()?this.selectionMessageText.replaceAll("{0}",this.multiple?this.modelValue().length:"1"):this.emptySelectionMessageText}get ariaSetSize(){return this.visibleOptions().filter(e=>!this.isOptionGroup(e)).length}get virtualScrollerDisabled(){return!this.virtualScroll}get searchFields(){return this.filterFields||[this.optionLabel]}get toggleAllAriaLabel(){return this.config.translation.aria?this.config.translation.aria[this.allSelected()?"selectAll":"unselectAll"]:void 0}searchValue;searchTimeout;_selectAll=null;_options=D(null);startRangeIndex=D(-1);focusedOptionIndex=D(-1);modelValue=D(null);visibleOptions=_e(()=>{let e=this.group?this.flatOptions(this._options()):this._options()||[],i=this._filterValue();return this.searchFields[0]===void 0?i?e.filter(t=>t.toString().toLocaleLowerCase(this.filterLocale).indexOf(i.toLocaleLowerCase(this.filterLocale).trim())!==-1):e:i?this.filterService.filter(e,this.searchFields,i,this.filterMatchMode,this.filterLocale):e});constructor(e,i,t,o,s){this.el=e,this.cd=i,this.filterService=t,this.config=o,this.renderer=s}ngOnInit(){this.id=this.id||ye(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()}),this.autoUpdateModel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterChange(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"filtericon":this.filterIconTemplate=e.template;break;case"checkicon":this.checkIconTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}writeValue(e){this.value=e,this.modelValue.set(this.value),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}flatOptions(e){return(e||[]).reduce((i,t,o)=>{i.push({optionGroup:t,group:!0,index:o});let s=this.getOptionGroupChildren(t);return s&&s.forEach(_=>i.push(_)),i},[])}autoUpdateModel(){if(this.selectOnFocus&&this.autoOptionFocus&&!this.hasSelectedOption()&&!this.multiple){let e=this.findFirstFocusedOptionIndex();this.focusedOptionIndex.set(e),this.onOptionSelect(null,this.visibleOptions()[this.focusedOptionIndex()])}}updateModel(e,i){this.value=e,this.modelValue.set(e),this.onModelChange(e),this.onChange.emit({originalEvent:i,value:this.value})}removeOption(e){return this.modelValue().filter(i=>!g.equals(i,this.getOptionValue(e),this.equalityKey()))}onOptionSelect(e,i,t=-1){this.disabled||this.isOptionDisabled(i)||this.readonly||(e&&this.onClick.emit({originalEvent:e,option:i,value:this.value}),this.multiple?this.onOptionSelectMultiple(e,i):this.onOptionSelectSingle(e,i),this.optionTouched=!1,t!==-1&&this.focusedOptionIndex.set(t))}onOptionSelectMultiple(e,i){let t=this.isSelected(i),o=null;if(this.optionTouched?!1:this.metaKeySelection){let _=e.metaKey||e.ctrlKey;t?o=_?this.removeOption(i):[this.getOptionValue(i)]:(o=_?this.modelValue()||[]:[],o=[...o,this.getOptionValue(i)])}else o=t?this.removeOption(i):[...this.modelValue()||[],this.getOptionValue(i)];this.updateModel(o,e)}onOptionSelectSingle(e,i){let t=this.isSelected(i),o=!1,s=null;if(this.optionTouched?!1:this.metaKeySelection){let V=e.metaKey||e.ctrlKey;t?V&&(s=null,o=!0):(s=this.getOptionValue(i),o=!0)}else s=t?null:this.getOptionValue(i),o=!0;o&&this.updateModel(s,e)}onOptionSelectRange(e,i=-1,t=-1){if(i===-1&&(i=this.findNearestSelectedOptionIndex(t,!0)),t===-1&&(t=this.findNearestSelectedOptionIndex(i)),i!==-1&&t!==-1){let o=Math.min(i,t),s=Math.max(i,t),_=this.visibleOptions().slice(o,s+1).filter(V=>this.isValidOption(V)).map(V=>this.getOptionValue(V));this.updateModel(_,e)}}onToggleAll(e){if(!(this.disabled||this.readonly)){if(F.focus(this.headerCheckboxViewChild.nativeElement),this.selectAll!==null)this.onSelectAllChange.emit({originalEvent:e,checked:!this.allSelected()});else{let i=this.allSelected()?[]:this.visibleOptions().filter(t=>this.isValidOption(t)).map(t=>this.getOptionValue(t));this.updateModel(i,e)}e.preventDefault()}}allSelected(){return this.selectAll!==null?this.selectAll:g.isNotEmpty(this.visibleOptions())&&this.visibleOptions().every(e=>this.isOptionGroup(e)||this.isOptionDisabled(e)||this.isSelected(e))}onOptionTouchEnd(){this.disabled||(this.optionTouched=!0)}onOptionMouseDown(e,i){this.changeFocusedOptionIndex(e,i)}onOptionMouseEnter(e,i){this.focusOnHover&&this.changeFocusedOptionIndex(e,i)}onOptionDoubleClick(e,i){this.disabled||this.isOptionDisabled(i)||this.readonly||this.onDblClick.emit({originalEvent:e,option:i,value:this.value})}onFirstHiddenFocus(e){F.focus(this.listViewChild.nativeElement);let i=F.getFirstFocusableElement(this.el.nativeElement,':not([data-p-hidden-focusable="true"])');this.lastHiddenFocusableElement.nativeElement.tabIndex=g.isEmpty(i)?"-1":void 0,this.firstHiddenFocusableElement.nativeElement.tabIndex=-1}onLastHiddenFocus(e){if(e.relatedTarget===this.listViewChild.nativeElement){let t=F.getFirstFocusableElement(this.el.nativeElement,":not(.p-hidden-focusable)");F.focus(t),this.firstHiddenFocusableElement.nativeElement.tabIndex=void 0}else F.focus(this.firstHiddenFocusableElement.nativeElement);this.lastHiddenFocusableElement.nativeElement.tabIndex=-1}onFocusout(e){!this.el.nativeElement.contains(e.relatedTarget)&&this.lastHiddenFocusableElement&&this.firstHiddenFocusableElement&&(this.firstHiddenFocusableElement.nativeElement.tabIndex=this.lastHiddenFocusableElement.nativeElement.tabIndex=void 0)}onListFocus(e){this.focused=!0;let i=this.focusedOptionIndex()!==-1?this.focusedOptionIndex():this.autoOptionFocus?this.findFirstFocusedOptionIndex():-1;this.focusedOptionIndex.set(i),this.onFocus.emit(e)}onListBlur(e){this.focused=!1,this.focusedOptionIndex.set(-1),this.startRangeIndex.set(-1),this.searchValue=""}onHeaderCheckboxFocus(e){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}onHeaderCheckboxKeyDown(e){if(this.disabled){e.preventDefault();return}switch(e.code){case"Space":this.onToggleAll(e);break;case"Enter":this.onToggleAll(e);break;case"Tab":this.onHeaderCheckboxTabKeyDown(e);break;default:break}}onHeaderCheckboxTabKeyDown(e){F.focus(this.listViewChild.nativeElement),e.preventDefault()}onFilterChange(e){let i=e.target.value?.trim();this._filterValue.set(i),this.focusedOptionIndex.set(-1),this.startRangeIndex.set(-1),this.onFilter.emit({originalEvent:e,filter:this._filterValue()}),!this.virtualScrollerDisabled&&this.scroller.scrollToIndex(0)}onFilterBlur(e){this.focusedOptionIndex.set(-1),this.startRangeIndex.set(-1)}onListKeyDown(e){let i=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"Space":case"NumpadEnter":this.onSpaceKey(e);break;case"Tab":break;case"ShiftLeft":case"ShiftRight":this.onShiftKey();break;default:if(this.multiple&&e.code==="KeyA"&&i){let t=this.visibleOptions().filter(o=>this.isValidOption(o)).map(o=>this.getOptionValue(o));this.updateModel(t,e),e.preventDefault();break}!i&&g.isPrintableCharacter(e.key)&&(this.searchOptions(e,e.key),e.preventDefault());break}}onFilterKeyDown(e){switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":case"ArrowRight":this.onArrowLeftKey(e,!0);break;case"Home":this.onHomeKey(e,!0);break;case"End":this.onEndKey(e,!0);break;case"Enter":this.onEnterKey(e);break;case"ShiftLeft":case"ShiftRight":this.onShiftKey();break;default:break}}onArrowDownKey(e){let i=this.focusedOptionIndex()!==-1?this.findNextOptionIndex(this.focusedOptionIndex()):this.findFirstFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,this.startRangeIndex(),i),this.changeFocusedOptionIndex(e,i),e.preventDefault()}onArrowUpKey(e){let i=this.focusedOptionIndex()!==-1?this.findPrevOptionIndex(this.focusedOptionIndex()):this.findLastFocusedOptionIndex();this.multiple&&e.shiftKey&&this.onOptionSelectRange(e,i,this.startRangeIndex()),this.changeFocusedOptionIndex(e,i),e.preventDefault()}onArrowLeftKey(e,i=!1){i&&this.focusedOptionIndex.set(-1)}onHomeKey(e,i=!1){if(i)e.currentTarget.setSelectionRange(0,0),this.focusedOptionIndex.set(-1);else{let t=e.metaKey||e.ctrlKey,o=this.findFirstOptionIndex();this.multiple&&e.shiftKey&&t&&this.onOptionSelectRange(e,o,this.startRangeIndex()),this.changeFocusedOptionIndex(e,o)}e.preventDefault()}onEndKey(e,i=!1){if(i){let t=e.currentTarget,o=t.value.length;t.setSelectionRange(o,o),this.focusedOptionIndex.set(-1)}else{let t=e.metaKey||e.ctrlKey,o=this.findLastOptionIndex();this.multiple&&e.shiftKey&&t&&this.onOptionSelectRange(e,this.startRangeIndex(),o),this.changeFocusedOptionIndex(e,o)}e.preventDefault()}onPageDownKey(e){this.scrollInView(0),e.preventDefault()}onPageUpKey(e){this.scrollInView(this.visibleOptions().length-1),e.preventDefault()}onEnterKey(e){this.focusedOptionIndex()!==-1&&(this.multiple&&e.shiftKey?this.onOptionSelectRange(e,this.focusedOptionIndex()):this.onOptionSelect(e,this.visibleOptions()[this.focusedOptionIndex()])),e.preventDefault()}onSpaceKey(e){this.onEnterKey(e)}onShiftKey(){let e=this.focusedOptionIndex();this.startRangeIndex.set(e)}getOptionGroupChildren(e){return this.optionGroupChildren?g.resolveFieldData(e,this.optionGroupChildren):e.items}getOptionGroupLabel(e){return this.optionGroupLabel?g.resolveFieldData(e,this.optionGroupLabel):e&&e.label!==void 0?e.label:e}getOptionLabel(e){return this.optionLabel?g.resolveFieldData(e,this.optionLabel):e.label!=null?e.label:e}getOptionIndex(e,i){return this.virtualScrollerDisabled?e:i&&i.getItemOptions(e).index}getOptionValue(e){return this.optionValue?g.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&e.value!==void 0?e.value:e}getAriaPosInset(e){return(this.optionGroupLabel?e-this.visibleOptions().slice(0,e).filter(i=>this.isOptionGroup(i)).length:e)+1}hasSelectedOption(){return g.isNotEmpty(this.modelValue())}isOptionGroup(e){return this.optionGroupLabel&&e.optionGroup&&e.group}changeFocusedOptionIndex(e,i){this.focusedOptionIndex()!==i&&(this.focusedOptionIndex.set(i),this.scrollInView(),this.selectOnFocus&&!this.multiple&&this.onOptionSelect(e,this.visibleOptions()[i]))}searchOptions(e,i){this.searchValue=(this.searchValue||"")+i;let t=-1,o=!1;return this.focusedOptionIndex()!==-1?(t=this.visibleOptions().slice(this.focusedOptionIndex()).findIndex(s=>this.isOptionMatched(s)),t=t===-1?this.visibleOptions().slice(0,this.focusedOptionIndex()).findIndex(s=>this.isOptionMatched(s)):t+this.focusedOptionIndex()):t=this.visibleOptions().findIndex(s=>this.isOptionMatched(s)),t!==-1&&(o=!0),t===-1&&this.focusedOptionIndex()===-1&&(t=this.findFirstFocusedOptionIndex()),t!==-1&&this.changeFocusedOptionIndex(e,t),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),o}isOptionMatched(e){return this.isValidOption(e)&&this.getOptionLabel(e).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))}scrollInView(e=-1){let i=e!==-1?`${this.id}_${e}`:this.focusedOptionId,t=F.findSingle(this.listViewChild.nativeElement,`li[id="${i}"]`);t?t.scrollIntoView&&t.scrollIntoView({block:"nearest",inline:"nearest"}):this.virtualScrollerDisabled||this.virtualScroll&&this.scroller.scrollToIndex(e!==-1?e:this.focusedOptionIndex())}findFirstOptionIndex(){return this.visibleOptions().findIndex(e=>this.isValidOption(e))}findLastOptionIndex(){return g.findLastIndex(this.visibleOptions(),e=>this.isValidOption(e))}findFirstFocusedOptionIndex(){let e=this.findFirstSelectedOptionIndex();return e<0?this.findFirstOptionIndex():e}findLastFocusedOptionIndex(){let e=this.findLastSelectedOptionIndex();return e<0?this.findLastOptionIndex():e}findLastSelectedOptionIndex(){return this.hasSelectedOption()?g.findLastIndex(this.visibleOptions(),e=>this.isValidSelectedOption(e)):-1}findNextOptionIndex(e){let i=e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(t=>this.isValidOption(t)):-1;return i>-1?i+e+1:e}findNextSelectedOptionIndex(e){let i=this.hasSelectedOption()&&e<this.visibleOptions().length-1?this.visibleOptions().slice(e+1).findIndex(t=>this.isValidSelectedOption(t)):-1;return i>-1?i+e+1:-1}findPrevSelectedOptionIndex(e){let i=this.hasSelectedOption()&&e>0?g.findLastIndex(this.visibleOptions().slice(0,e),t=>this.isValidSelectedOption(t)):-1;return i>-1?i:-1}findFirstSelectedOptionIndex(){return this.hasSelectedOption()?this.visibleOptions().findIndex(e=>this.isValidSelectedOption(e)):-1}findPrevOptionIndex(e){let i=e>0?g.findLastIndex(this.visibleOptions().slice(0,e),t=>this.isValidOption(t)):-1;return i>-1?i:e}findNearestSelectedOptionIndex(e,i=!1){let t=-1;return this.hasSelectedOption()&&(i?(t=this.findPrevSelectedOptionIndex(e),t=t===-1?this.findNextSelectedOptionIndex(e):t):(t=this.findNextSelectedOptionIndex(e),t=t===-1?this.findPrevSelectedOptionIndex(e):t)),t>-1?t:e}equalityKey(){return this.optionValue?null:this.dataKey}isValidSelectedOption(e){return this.isValidOption(e)&&this.isSelected(e)}isOptionDisabled(e){return this.optionDisabled?g.resolveFieldData(e,this.optionDisabled):!1}isSelected(e){let i=this.getOptionValue(e);return this.multiple?(this.modelValue()||[]).some(t=>g.equals(t,i,this.equalityKey())):g.equals(this.modelValue(),i,this.equalityKey())}isValidOption(e){return e&&!(this.isOptionDisabled(e)||this.isOptionGroup(e))}isEmpty(){return!this._options()?.length||!this.visibleOptions()?.length}hasFilter(){return this._filterValue()&&this._filterValue().trim().length>0}resetFilter(){this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this._filterValue.set(null)}ngOnDestroy(){this.translationSubscription&&this.translationSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)(M(oe),M(ue),M(Oe),M(Ie),M(le))};static \u0275cmp=ie({type:n,selectors:[["p-listbox"]],contentQueries:function(i,t,o){if(i&1&&(R(o,ve,5),R(o,Ce,5),R(o,G,4)),i&2){let s;C(s=S())&&(t.headerFacet=s.first),C(s=S())&&(t.footerFacet=s.first),C(s=S())&&(t.templates=s)}},viewQuery:function(i,t){if(i&1&&(E(ke,5),E(Ee,5),E(Me,5),E(De,5),E(Ke,5),E(He,5)),i&2){let o;C(o=S())&&(t.headerCheckboxViewChild=o.first),C(o=S())&&(t.filterViewChild=o.first),C(o=S())&&(t.lastHiddenFocusableElement=o.first),C(o=S())&&(t.firstHiddenFocusableElement=o.first),C(o=S())&&(t.scroller=o.first),C(o=S())&&(t.listViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{id:"id",searchMessage:"searchMessage",emptySelectionMessage:"emptySelectionMessage",selectionMessage:"selectionMessage",autoOptionFocus:[x.HasDecoratorInputTransform,"autoOptionFocus","autoOptionFocus",b],ariaLabel:"ariaLabel",selectOnFocus:[x.HasDecoratorInputTransform,"selectOnFocus","selectOnFocus",b],searchLocale:[x.HasDecoratorInputTransform,"searchLocale","searchLocale",b],focusOnHover:[x.HasDecoratorInputTransform,"focusOnHover","focusOnHover",b],filterMessage:"filterMessage",filterFields:"filterFields",lazy:[x.HasDecoratorInputTransform,"lazy","lazy",b],virtualScroll:[x.HasDecoratorInputTransform,"virtualScroll","virtualScroll",b],virtualScrollItemSize:[x.HasDecoratorInputTransform,"virtualScrollItemSize","virtualScrollItemSize",U],virtualScrollOptions:"virtualScrollOptions",scrollHeight:"scrollHeight",tabindex:[x.HasDecoratorInputTransform,"tabindex","tabindex",U],multiple:[x.HasDecoratorInputTransform,"multiple","multiple",b],style:"style",styleClass:"styleClass",listStyle:"listStyle",listStyleClass:"listStyleClass",readonly:[x.HasDecoratorInputTransform,"readonly","readonly",b],disabled:[x.HasDecoratorInputTransform,"disabled","disabled",b],checkbox:[x.HasDecoratorInputTransform,"checkbox","checkbox",b],filter:[x.HasDecoratorInputTransform,"filter","filter",b],filterBy:"filterBy",filterMatchMode:"filterMatchMode",filterLocale:"filterLocale",metaKeySelection:[x.HasDecoratorInputTransform,"metaKeySelection","metaKeySelection",b],dataKey:"dataKey",showToggleAll:[x.HasDecoratorInputTransform,"showToggleAll","showToggleAll",b],optionLabel:"optionLabel",optionValue:"optionValue",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",optionDisabled:"optionDisabled",ariaFilterLabel:"ariaFilterLabel",filterPlaceHolder:"filterPlaceHolder",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",group:[x.HasDecoratorInputTransform,"group","group",b],options:"options",filterValue:"filterValue",selectAll:"selectAll"},outputs:{onChange:"onChange",onClick:"onClick",onDblClick:"onDblClick",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onSelectAllChange:"onSelectAllChange"},features:[pe([zt]),se],ngContentSelectors:Re,decls:16,vars:24,consts:[["firstHiddenFocusableElement",""],["buildInItems",""],["lastHiddenFocusableElement",""],["builtInFilterElement",""],["headerchkbox",""],["filterInput",""],["scroller",""],["list",""],["emptyFilter",""],["empty",""],[3,"focusout","ngClass","ngStyle"],["role","presentation",1,"p-hidden-accessible","p-hidden-focusable",3,"focus","tabindex"],["class","p-listbox-header",4,"ngIf"],[3,"ngClass","ngStyle"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["class","p-listbox-footer",4,"ngIf"],["role","status","aria-live","polite","class","p-hidden-accessible",4,"ngIf"],["role","status","aria-live","polite",1,"p-hidden-accessible"],[1,"p-listbox-header"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-checkbox p-component",3,"ngClass","click","keydown",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"p-checkbox","p-component",3,"click","keydown","ngClass"],[1,"p-hidden-accessible"],["type","checkbox","readonly","readonly",3,"focus","blur","disabled"],["role","checkbox",1,"p-checkbox-box",3,"ngClass"],[3,"styleClass",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"],["class","p-listbox-filter-container",4,"ngIf"],["role","status","attr.aria-live","polite",1,"p-hidden-accessible"],[1,"p-listbox-filter-container"],["type","text","role","searchbox",1,"p-listbox-filter","p-inputtext","p-component",3,"input","keydown","blur","value","disabled","tabindex"],["class","p-listbox-filter-icon",4,"ngIf"],[1,"p-listbox-filter-icon"],[3,"onLazyLoad","items","itemSize","autoSize","tabindex","lazy","options"],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-listbox-list",3,"focus","blur","keydown","tabindex","ngClass","ngStyle"],["ngFor","",3,"ngForOf"],["class","p-listbox-empty-message","role","option",4,"ngIf"],["role","option",1,"p-listbox-item-group",3,"ngStyle"],["pRipple","","role","option",1,"p-listbox-item",3,"click","dblclick","mousedown","mouseenter","touchend","ngStyle","ngClass"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],["role","option",1,"p-listbox-empty-message"],[1,"p-listbox-footer"]],template:function(i,t){if(i&1){let o=k();ce(Ae),d(0,"div",10),v("focusout",function(_){return h(o),m(t.onFocusout(_))}),d(1,"span",11,0),v("focus",function(_){return h(o),m(t.onFirstHiddenFocus(_))}),u(),p(3,Be,3,5,"div",12)(4,at,5,3,"div",12),d(5,"div",13),p(6,_t,4,11,"p-scroller",14)(7,mt,2,6,"ng-container",15)(8,Kt,5,11,"ng-template",null,1,B),u(),p(10,At,3,5,"div",16)(11,Rt,2,1,"span",17),d(12,"span",18),w(13),u(),d(14,"span",11,2),v("focus",function(_){return h(o),m(t.onLastHiddenFocus(_))}),u()()}i&2&&(Q(t.styleClass),a("ngClass",t.containerClass)("ngStyle",t.style),f("id",t.id),c(),a("tabindex",t.disabled?-1:t.tabindex),f("aria-hidden",!0)("data-p-hidden-focusable",!0),c(2),a("ngIf",t.headerFacet||t.headerTemplate),c(),a("ngIf",t.checkbox&&t.multiple&&t.showToggleAll||t.filter),c(),Q(t.listStyleClass),ae("max-height",t.virtualScroll?"auto":t.scrollHeight||"auto"),a("ngClass","p-listbox-list-wrapper")("ngStyle",t.listStyle),c(),a("ngIf",t.virtualScroll),c(),a("ngIf",!t.virtualScroll),c(3),a("ngIf",t.footerFacet||t.footerTemplate),c(),a("ngIf",t.isEmpty()),c(2),K(" ",t.selectedMessageText," "),c(),a("tabindex",t.disabled?-1:t.tabindex),f("aria-hidden",!0)("data-p-hidden-focusable",!0))},dependencies:()=>[he,me,fe,xe,ge,G,Se,Le,J,X],styles:[`@layer primeng{.p-listbox-list-wrapper{overflow:auto}.p-listbox-list{list-style-type:none;margin:0;padding:0}.p-listbox-item{cursor:pointer;position:relative;overflow:hidden;display:flex;align-items:center;-webkit-user-select:none;user-select:none}.p-listbox-header{display:flex;align-items:center}.p-listbox-filter-container{position:relative;flex:1 1 auto}.p-listbox-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-listbox-filter{width:100%}}
`],encapsulation:2,changeDetection:0})}return n})(),di=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ne({type:n});static \u0275inj=te({imports:[be,j,Te,W,J,X,j,W]})}return n})();export{di as a};
