import{a as Bi}from"./chunk-HWX3PMNO.js";import{a as wi,b as Di}from"./chunk-3JZDUO5I.js";import"./chunk-HWDQDYEY.js";import{a as Gt,b as Qt}from"./chunk-ORGLF3GD.js";import{a as Hi}from"./chunk-GJXSFIV2.js";import{a as Zt}from"./chunk-LJXGWR3I.js";import{a as Li,b as Mi,c as ki,d as Vi}from"./chunk-6PZRFASI.js";import{a as Rt}from"./chunk-Q2QUXHS7.js";import"./chunk-VX6XSB4J.js";import"./chunk-VBZFO5L5.js";import{a as Ai,b as Pi}from"./chunk-OKUVFNC3.js";import{a as qt,c as jt,d as Xt,e as Jt}from"./chunk-MHZMZKW7.js";import{$ as $e,A as ge,Aa as Ii,B as be,Ca as vi,E as Kt,F as ot,Fa as yi,Ga as Ci,H as rt,I as at,J as st,Ja as xi,Ka as Ti,Ma as Si,P as $t,Pa as Ei,Q as zt,Qa as Fi,U as Yt,W as Te,X as ei,Y as ti,aa as ii,c as nt,da as ni,e as Ce,ea as oi,g as Bt,ga as ri,ha as ai,i as z,ia as si,j as Ot,ja as li,k as h,ka as di,la as ci,m as G,ma as mi,n as pe,na as Ie,o as Ke,oa as ze,pa as pi,q as ue,r as qe,ra as ui,s as fe,sa as fi,u as he,v as _e,va as _i,wa as gi,x as Ut,xa as Ge,y as Q,ya as bi,z as Nt}from"./chunk-NZODGCSX.js";import{b as T,e as Re,g as Ht,j as $,k as xe,m as je,n as Wt,r as hi}from"./chunk-HTTE62QS.js";import{A as H,B as He,C as it,I as ie,J as K,K as q,L as Oe,M as j,N as ce,P as Mt,R as B,b as At,ea as kt,fa as Ue,ga as me,ia as Ne,ja as Vt,k as U,m as Pt,o as D,p as ye,r as N,s as R,t as Dt,u as V,v as Be,y as Lt,z as de}from"./chunk-CNII3XGJ.js";import{A as P,Aa as se,B as v,Ba as Le,C as F,D as vt,Da as _,Ea as A,Fa as x,Fb as ke,G as y,H as C,Hb as Ve,Ia as Ct,Ja as xt,Ka as Tt,Kb as le,L as ne,La as St,M as W,N as yt,P as Fe,Pa as ee,S as r,T as u,aa as Y,ba as f,ca as S,cb as Me,da as a,db as te,eb as Et,f as Se,fa as Ze,ha as oe,ia as g,ib as Xe,ja as We,ka as we,la as Ae,lb as Je,ma as l,na as d,nb as Ft,oa as m,ob as et,pa as X,pb as wt,qa as J,r as It,ra as Pe,sa as w,sb as k,ta as b,tb as tt,u as Ee,ua as c,va as Ye,w as E,wa as De,xa as re,za as ae}from"./chunk-3AQ5X5KI.js";var rn=(t,o)=>o.id;function an(t,o){if(t&1){let e=w();l(0,"p-button",2),b("click",function(){y(e);let n=c();return C(n.removeAll())}),d()}if(t&2){let e=c();a("icon",e.PrimeIcons.TRASH)("label",e.LabelButtonActionEnum.DELETE)("loading",e.coreService.isLoading)("severity",e.SeverityButtonActionEnum.DELETE)}}function sn(t,o){if(t&1&&(l(0,"div",13)(1,"h1"),_(2),d(),l(3,"div",14)(4,"p-inputGroup"),m(5,"p-button",15)(6,"input",16),d()()()),t&2){let e=c();r(2),A(e.BreadcrumbEnum.USERS),r(3),a("icon",e.PrimeIcons.SEARCH),r(),a("formControl",e.search)}}function ln(t,o){if(t&1&&(l(0,"th",18),_(1),m(2,"p-sortIcon",20),d()),t&2){let e=o.$implicit;a("pSortableColumn",e.field),r(),x(" ",e.header," "),r(),a("field",e.field)}}function dn(t,o){if(t&1&&(l(0,"tr")(1,"th",17),m(2,"p-tableHeaderCheckbox"),d(),we(3,ln,3,3,"th",18,We),l(5,"th",19),_(6," Acciones "),d()()),t&2){let e=o.$implicit;r(3),Ae(e)}}function cn(t,o){if(t&1&&(l(0,"td"),m(1,"p-tableCheckbox",22),d()),t&2){let e=c().$implicit;r(),a("value",e)}}function mn(t,o){t&1&&m(0,"td")}function pn(t,o){if(t&1&&_(0),t&2){let e=c(2).$implicit,i=c().$implicit;x(" ",i[e.field].name," ")}}function un(t,o){if(t&1&&f(0,pn,1,1),t&2){let e,i=c().$implicit;g(0,(e=i.field)==="object"?0:-1)}}function fn(t,o){if(t&1&&m(0,"p-tag",23),t&2){let e=o.$implicit;a("value",e.name)}}function hn(t,o){if(t&1&&we(0,fn,1,1,"p-tag",23,rn),t&2){let e=c(2).$implicit,i=c().$implicit;Ae(i[e.field])}}function _n(t,o){t&1&&m(0,"p-tag",24)}function gn(t,o){if(t&1&&f(0,_n,1,0,"p-tag",24),t&2){let e=c(3).$implicit;g(0,e.suspendedAt?0:-1)}}function bn(t,o){if(t&1&&_(0),t&2){let e=c(2).$implicit,i=c().$implicit;x(" ",i[e.field]," ")}}function In(t,o){if(t&1&&f(0,hn,2,0)(1,gn,1,1)(2,bn,1,1),t&2){let e,i=c().$implicit;g(0,(e=i.field)==="roles"?0:e==="suspendedAt"?1:2)}}function vn(t,o){if(t&1&&(l(0,"td"),f(1,un,1,1)(2,In,3,1),d()),t&2){let e=o.$implicit,i=c().$implicit;r(),g(1,i[e.field]!=null&&i[e.field].id?1:-1),r(),g(2,i[e.field]!=null&&i[e.field].id?-1:2)}}function yn(t,o){if(t&1){let e=w();l(0,"p-button",25),b("click",function(){y(e);let n=c().$implicit,s=c();return C(s.selectItem(n))}),d()}if(t&2){let e=c(2);a("icon",e.PrimeIcons.ELLIPSIS_V)}}function Cn(t,o){t&1&&_(0," Usuario Actual ")}function xn(t,o){if(t&1&&(l(0,"tr",21),f(1,cn,2,1,"td")(2,mn,1,0),we(3,vn,3,2,"td",null,We),l(5,"td",19),f(6,yn,1,1,"p-button",15)(7,Cn,1,0),d()()),t&2){let e=o.$implicit,i=o.columns,n=o.rowIndex,s=c();a("pSelectableRow",e)("pSelectableRowIndex",n),r(),g(1,e.id!==s.authService.auth.id?1:2),r(2),Ae(i),r(3),g(6,e.id!==s.authService.auth.id?6:7)}}function Tn(t,o){if(t&1&&(l(0,"tr")(1,"td"),_(2),d()()),t&2){let e=o.$implicit,i=c();r(),S("colspan",e.length),r(),x(" ",i.messageService.paginatorNoRecordsFound," ")}}function Sn(t,o){if(t&1&&_(0),t&2){let e=c();x(" ",e.messageService.paginatorTotalRegisters(e.paginator.totalItems)," ")}}var Oi=(()=>{let o=class o{constructor(i,n,s,p,I,M){this.authService=i,this.coreService=n,this.breadcrumbService=s,this.messageService=p,this.router=I,this.usersHttpService=M,this.PrimeIcons=U,this.IconButtonActionEnum=q,this.SeverityButtonActionEnum=Oe,this.LabelButtonActionEnum=K,this.BreadcrumbEnum=j,this.buttonActions=this.buildButtonActions,this.isButtonActions=!1,this.columns=this.buildColumns,this.search=new Ke(""),this.selectedItems=[],this.items=[],this.TableEnum=Mt,this.breadcrumbService.setItems([{label:j.USERS}]),this.paginator=this.coreService.paginator,this.search.valueChanges.pipe(It(500)).subscribe(O=>{this.findUsers()})}ngOnInit(){this.findUsers()}findUsers(i=0){this.usersHttpService.findUsers(i,this.search.value).subscribe(n=>{this.paginator=n.pagination,this.items=n.data})}get buildColumns(){return[{field:"username",header:"Usuario"},{field:"lastname",header:"Apellidos"},{field:"name",header:"Nombres"},{field:"email",header:"Correo"},{field:"roles",header:"Roles"},{field:"suspendedAt",header:"Estado"}]}get buildButtonActions(){return[{id:ie.UPDATE,label:K.UPDATE,icon:q.UPDATE,command:()=>{this.selectedItem?.id&&this.redirectEditForm(this.selectedItem.id)}},{id:ie.DELETE,label:K.DELETE,icon:q.DELETE,command:()=>{this.selectedItem?.id&&this.remove(this.selectedItem.id)}},{id:ie.SUSPEND,label:K.SUSPEND,icon:q.SUSPEND,command:()=>{this.selectedItem?.id&&this.suspend(this.selectedItem.id)}},{id:ie.REACTIVATE,label:K.REACTIVATE,icon:q.REACTIVATE,command:()=>{this.selectedItem?.id&&this.reactivate(this.selectedItem.id)}}]}redirectCreateForm(){this.router.navigate(["/admin/users","new"])}redirectEditForm(i){this.router.navigate(["/admin/users",i])}remove(i){}removeAll(){}suspend(i){this.usersHttpService.suspend(i).subscribe(n=>{let s=this.items.findIndex(p=>p.id===i);this.items[s]=n})}reactivate(i){this.usersHttpService.reactivate(i).subscribe(n=>{let s=this.items.findIndex(p=>p.id===i);this.items[s]=n})}validateButtonActions(i){this.buttonActions=this.buildButtonActions,i.suspendedAt&&this.buttonActions.splice(this.buttonActions.findIndex(n=>n.id===ie.SUSPEND),1),i.suspendedAt||this.buttonActions.splice(this.buttonActions.findIndex(n=>n.id===ie.REACTIVATE),1)}paginate(i){this.findUsers(i.page)}selectItem(i){this.isButtonActions=!0,this.selectedItem=i,this.validateButtonActions(i)}};o.\u0275fac=function(n){return new(n||o)(u(me),u(N),u(V),u(R),u(Ve),u(Ne))},o.\u0275cmp=v({type:o,selectors:[["app-user-list"]],decls:14,vars:17,consts:[[1,"p-toolbar-group-left"],[3,"click","icon","label","loading","severity"],[1,"ml-2",3,"click","icon","label","loading","severity"],[1,"ml-2",3,"icon","label","loading","severity"],[1,"p-toolbar-group-right"],[3,"onPageChange","rows","totalRecords"],["dataKey","id","styleClass","p-datatable-striped",3,"selectionChange","value","columns","loading","selection"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","summary"],[3,"isHide","buttonActions","enabled"],[1,"flex"],[1,"p-input-icon-right","ml-auto"],[3,"icon"],["type","text","pInputText","","placeholder","Buscar...",3,"formControl"],[2,"width","3rem"],[3,"pSortableColumn"],[1,"text-center"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"value"],["severity","info",1,"mr-1",3,"value"],["severity","danger","value","Suspendido",1,"mr-1"],[3,"click","icon"]],template:function(n,s){n&1&&(l(0,"p-toolbar")(1,"div",0)(2,"p-button",1),b("click",function(){return s.redirectCreateForm()}),d(),l(3,"p-button",2),b("click",function(){return s.findUsers()}),d(),f(4,an,1,4,"p-button",3),d(),m(5,"div",4),d(),l(6,"p-paginator",5),b("onPageChange",function(I){return s.paginate(I)}),d(),l(7,"p-table",6),Tt("selectionChange",function(I){return xt(s.selectedItems,I)||(s.selectedItems=I),I}),f(8,sn,7,3,"ng-template",7)(9,dn,7,0,"ng-template",8)(10,xn,8,4,"ng-template",9)(11,Tn,3,2,"ng-template",10)(12,Sn,1,1,"ng-template",11),d(),l(13,"app-button-action",12),b("isHide",function(I){return s.isButtonActions=!I}),d()),n&2&&(r(2),a("icon",s.IconButtonActionEnum.CREATE)("label",s.LabelButtonActionEnum.CREATE)("loading",s.coreService.isLoading)("severity",s.SeverityButtonActionEnum.CREATE),r(),a("icon",s.IconButtonActionEnum.SYNC)("label",s.LabelButtonActionEnum.SYNC)("loading",s.coreService.isLoading)("severity",s.SeverityButtonActionEnum.SYNC),r(),g(4,s.selectedItems.length>0?4:-1),r(2),a("rows",s.paginator.limit)("totalRecords",s.paginator.totalItems),r(),a("value",s.items)("columns",s.columns)("loading",s.coreService.isLoading),Ct("selection",s.selectedItems),r(6),a("buttonActions",s.buttonActions)("enabled",s.isButtonActions))},dependencies:[z,G,qe,xi,D,$,Q,ni,ri,ai,li,si,di,ci,Ge,ze,Gt],encapsulation:2});let t=o;return t})();var Ui=(()=>{let o=class o{};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=v({type:o,selectors:[["app-user"]],decls:1,vars:0,template:function(n,s){n&1&&m(0,"app-user-list")},dependencies:[Oi]});let t=o;return t})();function An(t,o){if(t&1&&m(0,"app-skeleton",2),t&2){let e=c();a("type",e.SkeletonEnum.CARD)}}function Pn(t,o){if(t&1&&(l(0,"div"),_(1),d()),t&2){let e=c(3);r(),A(e.identificationTypeField.value.name)}}function Dn(t,o){if(t&1&&f(0,Pn,2,1,"div"),t&2){let e=c(2);g(0,e.identificationTypeField.value?0:-1)}}function Ln(t,o){if(t&1&&(l(0,"div"),_(1),d()),t&2){let e=o.$implicit;r(),A(e.name)}}function Mn(t,o){if(t&1&&(l(0,"div",12),m(1,"label",31)(2,"input",32)(3,"small",15),d()),t&2){let e=c(2);r(),a("label",e.UsersFormEnum.password)("required",e.passwordField),r(),a("feedback",!1),r(),a("errors",e.passwordField.errors)("touched",e.passwordField.touched)("dirty",e.passwordField.dirty)}}function kn(t,o){if(t&1){let e=w();l(0,"div",30)(1,"label",33),_(2,"Cambiar Contrase\xF1a:"),d(),l(3,"p-inputSwitch",34),b("onChange",function(n){y(e);let s=c(2);return C(s.handleChangePassword(n))}),d()()}if(t&2){let e=c(2);r(3),a("formControl",e.isChangePassword)}}function Vn(t,o){t&1&&(l(0,"div",30),m(1,"p-checkbox",35),d()),t&2&&(r(),a("binary",!0))}function Bn(t,o){if(t&1){let e=w();l(0,"p-toolbar")(1,"div",4),m(2,"app-header-form",5),d(),l(3,"div",6)(4,"p-button",7),b("click",function(){y(e);let n=c();return C(n.back())}),d(),m(5,"p-divider",8),l(6,"p-button",7),b("click",function(){y(e);let n=c();return C(n.onSubmit())}),d()()(),l(7,"p-panel",9)(8,"form",10),b("ngSubmit",function(){y(e);let n=c();return C(n.onSubmit())}),l(9,"div",11)(10,"div",12),m(11,"label",13)(12,"p-multiSelect",14)(13,"small",15),d()(),l(14,"div",11)(15,"div",12),m(16,"label",16),l(17,"p-dropdown",17),f(18,Dn,1,1,"ng-template",18)(19,Ln,2,1,"ng-template",19),d(),m(20,"small",15),d(),l(21,"div",12),m(22,"label",20)(23,"app-form-help-field",21)(24,"input",22)(25,"small",15),d()(),l(26,"div",11)(27,"div",12),m(28,"label",23)(29,"input",24)(30,"small",15),d(),l(31,"div",12),m(32,"label",25)(33,"input",26)(34,"small",15),d()(),l(35,"div",11),f(36,Mn,4,6,"div",12),l(37,"div",12),m(38,"label",27)(39,"app-form-help-field",28)(40,"input",29)(41,"small",15),d()(),f(42,kn,4,1,"div",30)(43,Vn,2,1,"div",30),d()()}if(t&2){let e=c();r(2),a("id",e.id),r(2),a("icon",e.IconButtonActionEnum.CANCEL)("label",e.LabelButtonActionEnum.CANCEL)("loading",e.coreService.isLoading)("severity",e.SeverityButtonActionEnum.CANCEL),r(2),a("icon",e.IconButtonActionEnum.SAVE)("label",e.LabelButtonActionEnum.SAVE)("loading",e.coreService.isLoading)("severity",e.SeverityButtonActionEnum.SAVE),r(2),a("formGroup",e.form),r(3),a("label",e.UsersFormEnum.roles)("required",e.rolesField),r(),a("options",e.roles),r(),a("errors",e.rolesField.errors)("touched",e.rolesField.touched)("dirty",e.rolesField.dirty),r(3),a("label",e.UsersFormEnum.identificationType)("required",e.identificationTypeField),r(),a("options",e.identificationTypes)("filter",!0),r(3),a("errors",e.identificationTypeField.errors)("touched",e.identificationTypeField.touched)("dirty",e.identificationTypeField.dirty),r(2),a("label",e.UsersFormEnum.identification)("required",e.identificationField),r(3),a("errors",e.identificationField.errors)("touched",e.identificationField.touched)("dirty",e.identificationField.dirty),r(3),a("label",e.UsersFormEnum.lastname)("required",e.lastnameField),r(2),a("errors",e.lastnameField.errors)("touched",e.lastnameField.touched)("dirty",e.lastnameField.dirty),r(2),a("label",e.UsersFormEnum.name)("required",e.nameField),r(2),a("errors",e.nameField.errors)("touched",e.nameField.touched)("dirty",e.nameField.dirty),r(2),g(36,!e.id||e.isChangePassword.value?36:-1),r(2),a("label",e.UsersFormEnum.email)("required",e.emailField),r(3),a("errors",e.emailField.errors)("touched",e.emailField.touched)("dirty",e.emailField.dirty),r(),g(42,e.id?42:-1),r(),g(43,!e.id||e.isChangePassword.value?43:-1)}}function Hn(t,o){t&1&&_(0," Ingrese su numero cedula ")}function On(t,o){t&1&&_(0," Ingrese su correo ")}var ji=(()=>{let o=class o{constructor(i,n,s,p,I,M,O,Z,ve){this.breadcrumbService=i,this.coreService=n,this.formBuilder=s,this.messageService=p,this.router=I,this.routesService=M,this.rolesHttpService=O,this.cataloguesHttpService=Z,this.usersHttpService=ve,this.PrimeIcons=U,this.SeverityButtonActionEnum=Oe,this.IconButtonActionEnum=q,this.LabelButtonActionEnum=K,this.UsersFormEnum=B,this.SkeletonEnum=ce,this.helpText="",this.id="",this.formErrors=[],this.roles=[],this.identificationTypes=[],this.isChangePassword=new Ke(!1),this.saving=!0,this.breadcrumbService.setItems([{label:j.USERS,routerLink:[this.routesService.users]},{label:j.FORM}]),this.form=this.newForm,this.validateFormFields()}validateFormFields(){this.identificationTypeField.valueChanges.subscribe(i=>{i?this.identificationField.enable():this.identificationField.disable(),i.code===He.IDENTIFICATION?this.identificationField.setValidators([h.required,h.minLength(10),h.maxLength(10)]):this.identificationField.setValidators([h.required]),this.identificationField.updateValueAndValidity()})}onExit(){return Se(this,null,function*(){return(this.form.touched||this.form.dirty)&&this.saving,!0})}ngOnInit(){this.loadRoles(),this.loadIdentificationTypes(),this.id!=it.NEW?(this.get(),this.passwordField.clearValidators()):(this.isChangePassword.setValue(!0),this.passwordField.enable(),this.passwordChangedField.enable())}get newForm(){return this.formBuilder.group({email:[null,[h.required,h.email]],identification:[{value:null,disabled:!0},[h.required,h.minLength(10),h.maxLength(10)]],identificationType:[null,[h.required]],lastname:[null,[h.required]],name:[null,[h.required]],password:[{value:null,disabled:!0},[h.required,h.minLength(8)]],passwordChanged:[{value:!0,disabled:!0}],roles:[null,[h.required]],username:[null,[h.required]],units:[null,[h.required]]})}get validateFormErrors(){return this.formErrors=[],this.emailField.errors&&this.formErrors.push(B.email),this.identificationField.errors&&this.formErrors.push(B.identification),this.identificationTypeField.errors&&this.formErrors.push(B.identificationType),this.lastnameField.errors&&this.formErrors.push(B.lastname),this.nameField.errors&&this.formErrors.push(B.name),this.passwordField.errors&&this.formErrors.push(B.password),this.passwordChangedField.errors&&this.formErrors.push(B.passwordChanged),this.rolesField.errors&&this.formErrors.push(B.roles),this.formErrors.sort(),this.formErrors.length===0&&this.form.valid}get(){this.usersHttpService.findOne(this.id).subscribe(i=>{this.form.patchValue(i)})}onSubmit(){this.usernameField.setValue(this.identificationField.value),this.validateFormErrors?this.id!=it.NEW?this.update(this.form.value):this.create(this.form.value):(this.form.markAllAsTouched(),this.messageService.errorsFields(this.formErrors))}back(){this.router.navigate([this.routesService.users])}create(i){i.passwordChanged=!i.passwordChanged,this.usersHttpService.create(i).subscribe(n=>{this.saving=!1,this.back()})}update(i){i.passwordChanged=!i.passwordChanged,this.usersHttpService.update(this.id,i).subscribe(n=>{this.saving=!1,this.back()})}loadRoles(){this.rolesHttpService.findAll().subscribe(i=>this.roles=i)}loadIdentificationTypes(){this.identificationTypes=this.cataloguesHttpService.findByType(H.USERS_IDENTIFICATION_TYPE)}handleChangePassword(i){this.isChangePassword.setValue(i.checked),this.isChangePassword.value?(this.passwordChangedField.enable(),this.passwordField.enable(),this.passwordField.setValidators([h.required,h.minLength(8)])):(this.passwordChangedField.setValue(!1),this.passwordChangedField.disable(),this.passwordField.setValue(null),this.passwordField.disable(),this.passwordField.clearValidators()),this.passwordField.updateValueAndValidity()}get emailField(){return this.form.controls.email}get identificationField(){return this.form.controls.identification}get identificationTypeField(){return this.form.controls.identificationType}get lastnameField(){return this.form.controls.lastname}get nameField(){return this.form.controls.name}get passwordField(){return this.form.controls.password}get passwordChangedField(){return this.form.controls.passwordChanged}get rolesField(){return this.form.controls.roles}get usernameField(){return this.form.controls.username}get unitsField(){return this.form.controls.units}};o.\u0275fac=function(n){return new(n||o)(u(V),u(N),u(_e),u(R),u(Ve),u(Dt),u(Vt),u(de),u(Ne))},o.\u0275cmp=v({type:o,selectors:[["app-user-form"]],inputs:{id:"id"},decls:8,vars:2,consts:[["opIdentification",""],["opEmail",""],[3,"type"],["pTemplate","content"],[1,"p-toolbar-group-left"],[3,"id"],[1,"p-toolbar-group-right"],[3,"click","icon","label","loading","severity"],["layout","vertical"],[1,"p-fluid"],[3,"ngSubmit","formGroup"],[1,"formgrid","grid"],[1,"field","xl:col-6","lg:col-6","md:col-6","sm:col-12"],["appLabel","","for","roles",3,"label","required"],["id","roles","formControlName","roles","dataKey","id","display","chip","optionLabel","name","placeholder","Seleccione...",3,"options"],["appErrorMessage","",3,"errors","touched","dirty"],["appLabel","","for","identificationType",3,"label","required"],["id","identificationType","dataKey","id","formControlName","identificationType","optionLabel","name","filterBy","name","placeholder","Seleccione...",3,"options","filter"],["pTemplate","selectedItem"],["pTemplate","item"],["appLabel","","for","identification",3,"label","required"],["content","Ingrese su n\xFAmero de documento"],["pInputText","","type","text","id","identification","formControlName","identification"],["appLabel","","for","lastname",3,"label","required"],["pInputText","","type","text","id","lastname","formControlName","lastname"],["appLabel","","for","name",3,"label","required"],["pInputText","","type","text","id","name","formControlName","name"],["appLabel","","for","email",3,"label","required"],["content","Ingrese su email"],["pInputText","","type","email","id","email","formControlName","email"],[1,"field"],["appLabel","","for","password",3,"label","required"],["pPassword","","type","password","id","password","formControlName","password",3,"feedback"],["for","isChangePassword",1,"mr-4"],["id","isChangePassword",3,"onChange","formControl"],["id","passwordChanged","formControlName","passwordChanged","label","Solicitar al usuario que cambie su contrase\xF1a cuando inicie sesi\xF3n",1,"mt-2",3,"binary"]],template:function(n,s){n&1&&(f(0,An,1,1,"app-skeleton",2)(1,Bn,44,46),l(2,"p-overlayPanel",null,0),f(4,Hn,1,0,"ng-template",3),d(),l(5,"p-overlayPanel",null,1),f(7,On,1,0,"ng-template",3),d()),n&2&&(g(0,s.coreService.isLoading?0:-1),r(),g(1,s.coreService.isLoading?-1:1))},dependencies:[ue,z,G,pe,qe,fe,he,Ie,ge,be,Ci,D,Ei,$,Xt,$e,Li,Q,$t,qt,ze,je,ki,_i],encapsulation:2});let t=o;return t})();var Un=["*",[["p-header"]]],Nn=["*","p-header"],Rn=t=>({$implicit:t}),$i=t=>({transitionParams:t}),Kn=t=>({value:"visible",params:t}),qn=t=>({value:"hidden",params:t});function jn(t,o){if(t&1&&m(0,"span",11),t&2){let e=c(3);oe(e.accordion.collapseIcon),a("ngClass",e.iconClass),S("aria-hidden",!0)}}function $n(t,o){if(t&1&&m(0,"ChevronDownIcon",11),t&2){let e=c(3);a("ngClass",e.iconClass),S("aria-hidden",!0)}}function zn(t,o){if(t&1&&(X(0),f(1,jn,1,4,"span",9)(2,$n,1,2,"ChevronDownIcon",10),J()),t&2){let e=c(2);r(),a("ngIf",e.accordion.collapseIcon),r(),a("ngIf",!e.accordion.collapseIcon)}}function Gn(t,o){if(t&1&&m(0,"span",11),t&2){let e=c(3);oe(e.accordion.expandIcon),a("ngClass",e.iconClass),S("aria-hidden",!0)}}function Qn(t,o){if(t&1&&m(0,"ChevronRightIcon",11),t&2){let e=c(3);a("ngClass",e.iconClass),S("aria-hidden",!0)}}function Zn(t,o){if(t&1&&(X(0),f(1,Gn,1,4,"span",9)(2,Qn,1,2,"ChevronRightIcon",10),J()),t&2){let e=c(2);r(),a("ngIf",e.accordion.expandIcon),r(),a("ngIf",!e.accordion.expandIcon)}}function Wn(t,o){if(t&1&&(X(0),f(1,zn,3,2,"ng-container",3)(2,Zn,3,2,"ng-container",3),J()),t&2){let e=c();r(),a("ngIf",e.selected),r(),a("ngIf",!e.selected)}}function Yn(t,o){}function Xn(t,o){t&1&&f(0,Yn,0,0,"ng-template")}function Jn(t,o){if(t&1&&(l(0,"span",12),_(1),d()),t&2){let e=c();r(),x(" ",e.header," ")}}function eo(t,o){t&1&&Pe(0)}function to(t,o){t&1&&De(0,1,["*ngIf","hasHeaderFacet"])}function io(t,o){t&1&&Pe(0)}function no(t,o){if(t&1&&(X(0),f(1,io,1,0,"ng-container",6),J()),t&2){let e=c();r(),a("ngTemplateOutlet",e.contentTemplate)}}var oo=["*"],ft=(()=>{class t{el;changeDetector;id;header;headerStyle;tabStyle;contentStyle;tabStyleClass;headerStyleClass;contentStyleClass;disabled;cache=!0;transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";iconPos="start";get selected(){return this._selected}set selected(e){this._selected=e,this.loaded||(this._selected&&this.cache&&(this.loaded=!0),this.changeDetector.detectChanges())}headerAriaLevel=2;selectedChange=new W;headerFacet;templates;_selected=!1;get iconClass(){return this.iconPos==="end"?"p-accordion-toggle-icon-end":"p-accordion-toggle-icon"}contentTemplate;headerTemplate;iconTemplate;loaded=!1;accordion;constructor(e,i,n){this.el=i,this.changeDetector=n,this.accordion=e,this.id=At()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"icon":this.iconTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}toggle(e){if(this.disabled)return!1;let i=this.findTabIndex();if(this.selected)this.selected=!1,this.accordion.onClose.emit({originalEvent:e,index:i});else{if(!this.accordion.multiple)for(var n=0;n<this.accordion.tabs.length;n++)this.accordion.tabs[n].selected&&(this.accordion.tabs[n].selected=!1,this.accordion.tabs[n].selectedChange.emit(!1),this.accordion.tabs[n].changeDetector.markForCheck());this.selected=!0,this.loaded=!0,this.accordion.onOpen.emit({originalEvent:e,index:i})}this.selectedChange.emit(this.selected),this.accordion.updateActiveIndex(),this.changeDetector.markForCheck(),e?.preventDefault()}findTabIndex(){let e=-1;for(var i=0;i<this.accordion.tabs.length;i++)if(this.accordion.tabs[i]==this){e=i;break}return e}get hasHeaderFacet(){return this.headerFacet&&this.headerFacet.length>0}onKeydown(e){switch(e.code){case"Enter":case"Space":this.toggle(e),e.preventDefault();break;default:break}}getTabHeaderActionId(e){return`${e}_header_action`}getTabContentId(e){return`${e}_content`}ngOnDestroy(){this.accordion.tabs.splice(this.findTabIndex(),1)}static \u0275fac=function(i){return new(i||t)(u(Ee(()=>ht)),u(ne),u(Me))};static \u0275cmp=v({type:t,selectors:[["p-accordionTab"]],contentQueries:function(i,n,s){if(i&1&&(re(s,Pt,4),re(s,D,4)),i&2){let p;ae(p=se())&&(n.headerFacet=p),ae(p=se())&&(n.templates=p)}},hostAttrs:[1,"p-element"],inputs:{id:"id",header:"header",headerStyle:"headerStyle",tabStyle:"tabStyle",contentStyle:"contentStyle",tabStyleClass:"tabStyleClass",headerStyleClass:"headerStyleClass",contentStyleClass:"contentStyleClass",disabled:[P.HasDecoratorInputTransform,"disabled","disabled",te],cache:[P.HasDecoratorInputTransform,"cache","cache",te],transitionOptions:"transitionOptions",iconPos:"iconPos",selected:"selected",headerAriaLevel:[P.HasDecoratorInputTransform,"headerAriaLevel","headerAriaLevel",Et]},outputs:{selectedChange:"selectedChange"},features:[Y],ngContentSelectors:Nn,decls:12,vars:44,consts:[[1,"p-accordion-tab",3,"ngClass","ngStyle"],["role","heading",1,"p-accordion-header"],["role","button",1,"p-accordion-header-link",3,"click","keydown","ngClass","ngStyle"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-accordion-header-text",4,"ngIf"],[4,"ngTemplateOutlet"],["role","region",1,"p-toggleable-content"],[1,"p-accordion-content",3,"ngClass","ngStyle"],[3,"class","ngClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"p-accordion-header-text"]],template:function(i,n){i&1&&(Ye(Un),l(0,"div",0)(1,"div",1)(2,"a",2),b("click",function(p){return n.toggle(p)})("keydown",function(p){return n.onKeydown(p)}),f(3,Wn,3,2,"ng-container",3)(4,Xn,1,0,null,4)(5,Jn,2,1,"span",5)(6,eo,1,0,"ng-container",6)(7,to,1,0,"ng-content",3),d()(),l(8,"div",7)(9,"div",8),De(10),f(11,no,2,1,"ng-container",3),d()()()),i&2&&(Ze("p-accordion-tab-active",n.selected),a("ngClass",n.tabStyleClass)("ngStyle",n.tabStyle),S("data-pc-name","accordiontab"),r(),Ze("p-highlight",n.selected)("p-disabled",n.disabled),S("aria-level",n.headerAriaLevel)("data-p-disabled",n.disabled)("data-pc-section","header"),r(),a("ngClass",n.headerStyleClass)("ngStyle",n.headerStyle),S("tabindex",n.disabled?null:0)("id",n.getTabHeaderActionId(n.id))("aria-controls",n.getTabContentId(n.id))("aria-expanded",n.selected)("aria-disabled",n.disabled)("data-pc-section","headeraction"),r(),a("ngIf",!n.iconTemplate),r(),a("ngTemplateOutlet",n.iconTemplate)("ngTemplateOutletContext",ee(34,Rn,n.selected)),r(),a("ngIf",!n.hasHeaderFacet),r(),a("ngTemplateOutlet",n.headerTemplate),r(),a("ngIf",n.hasHeaderFacet),r(),a("@tabContent",n.selected?ee(38,Kn,ee(36,$i,n.transitionOptions)):ee(42,qn,ee(40,$i,n.transitionOptions))),S("id",n.getTabContentId(n.id))("aria-hidden",!n.selected)("aria-labelledby",n.getTabHeaderActionId(n.id))("data-pc-section","toggleablecontent"),r(),a("ngClass",n.contentStyleClass)("ngStyle",n.contentStyle),r(2),a("ngIf",n.contentTemplate&&(n.cache?n.loaded:n.selected)))},dependencies:()=>[Je,Ft,wt,et,nt,Te],styles:[`@layer primeng{.p-accordion-header-link{cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;position:relative;text-decoration:none}.p-accordion-header-link:focus{z-index:1}.p-accordion-header-text{line-height:1}.p-accordion .p-toggleable-content{overflow:hidden}.p-accordion .p-accordion-tab-active>.p-toggleable-content:not(.ng-animating){overflow:inherit}.p-accordion-toggle-icon-end{order:1;margin-left:auto}.p-accordion-toggle-icon{order:0}}
`],encapsulation:2,data:{animation:[Kt("tabContent",[at("hidden",rt({height:"0",visibility:"hidden"})),at("visible",rt({height:"*",visibility:"visible"})),st("visible <=> hidden",[ot("{{transitionParams}}")]),st("void => *",ot(0))])]},changeDetection:0})}return t})(),ht=(()=>{class t{el;changeDetector;multiple=!1;style;styleClass;expandIcon;collapseIcon;get activeIndex(){return this._activeIndex}set activeIndex(e){if(this._activeIndex=e,this.preventActiveIndexPropagation){this.preventActiveIndexPropagation=!1;return}this.updateSelectionState()}selectOnFocus=!1;get headerAriaLevel(){return this._headerAriaLevel}set headerAriaLevel(e){typeof e=="number"&&e>0?this._headerAriaLevel=e:this._headerAriaLevel!==2&&(this._headerAriaLevel=2)}onClose=new W;onOpen=new W;activeIndexChange=new W;tabList;tabListSubscription=null;_activeIndex;_headerAriaLevel=2;preventActiveIndexPropagation=!1;tabs=[];constructor(e,i){this.el=e,this.changeDetector=i}onKeydown(e){switch(e.code){case"ArrowDown":this.onTabArrowDownKey(e);break;case"ArrowUp":this.onTabArrowUpKey(e);break;case"Home":e.shiftKey||this.onTabHomeKey(e);break;case"End":e.shiftKey||this.onTabEndKey(e);break}}focusedElementIsAccordionHeader(){return document.activeElement.tagName.toLowerCase()==="a"&&document.activeElement.classList.contains("p-accordion-header-link")}onTabArrowDownKey(e){if(this.focusedElementIsAccordionHeader()){let i=this.findNextHeaderAction(e.target.parentElement.parentElement.parentElement);i?this.changeFocusedTab(i):this.onTabHomeKey(e),e.preventDefault()}}onTabArrowUpKey(e){if(this.focusedElementIsAccordionHeader()){let i=this.findPrevHeaderAction(e.target.parentElement.parentElement.parentElement);i?this.changeFocusedTab(i):this.onTabEndKey(e),e.preventDefault()}}onTabHomeKey(e){let i=this.findFirstHeaderAction();this.changeFocusedTab(i),e.preventDefault()}changeFocusedTab(e){e&&(T.focus(e),this.selectOnFocus&&this.tabs.forEach((i,n)=>{let s=this.multiple?this._activeIndex.includes(n):n===this._activeIndex;this.multiple?(this._activeIndex||(this._activeIndex=[]),i.id==e.id&&(i.selected=!i.selected,this._activeIndex.includes(n)?this._activeIndex=this._activeIndex.filter(p=>p!==n):this._activeIndex.push(n))):i.id==e.id?(i.selected=!i.selected,this._activeIndex=n):i.selected=!1,i.selectedChange.emit(s),this.activeIndexChange.emit(this._activeIndex),i.changeDetector.markForCheck()}))}findNextHeaderAction(e,i=!1){let n=i?e:e.nextElementSibling,s=T.findSingle(n,'[data-pc-section="header"]');return s?T.getAttribute(s,"data-p-disabled")?this.findNextHeaderAction(s.parentElement.parentElement):T.findSingle(s,'[data-pc-section="headeraction"]'):null}findPrevHeaderAction(e,i=!1){let n=i?e:e.previousElementSibling,s=T.findSingle(n,'[data-pc-section="header"]');return s?T.getAttribute(s,"data-p-disabled")?this.findPrevHeaderAction(s.parentElement.parentElement):T.findSingle(s,'[data-pc-section="headeraction"]'):null}findFirstHeaderAction(){let e=this.el.nativeElement.firstElementChild.childNodes[0];return this.findNextHeaderAction(e,!0)}findLastHeaderAction(){let e=this.el.nativeElement.firstElementChild.childNodes,i=e[e.length-1];return this.findPrevHeaderAction(i,!0)}onTabEndKey(e){let i=this.findLastHeaderAction();this.changeFocusedTab(i),e.preventDefault()}ngAfterContentInit(){this.initTabs(),this.tabListSubscription=this.tabList.changes.subscribe(e=>{this.initTabs()})}initTabs(){this.tabs=this.tabList.toArray(),this.tabs.forEach(e=>{e.headerAriaLevel=this._headerAriaLevel}),this.updateSelectionState(),this.changeDetector.markForCheck()}getBlockableElement(){return this.el.nativeElement.children[0]}updateSelectionState(){if(this.tabs&&this.tabs.length&&this._activeIndex!=null)for(let e=0;e<this.tabs.length;e++){let i=this.multiple?this._activeIndex.includes(e):e===this._activeIndex;i!==this.tabs[e].selected&&(this.tabs[e].selected=i,this.tabs[e].selectedChange.emit(i),this.tabs[e].changeDetector.markForCheck())}}isTabActive(e){return this.multiple?this._activeIndex&&this._activeIndex.includes(e):this._activeIndex===e}getTabProp(e,i){return e.props?e.props[i]:void 0}updateActiveIndex(){let e=this.multiple?[]:null;this.tabs.forEach((i,n)=>{if(i.selected)if(this.multiple)e.push(n);else{e=n;return}}),this.preventActiveIndexPropagation=!0,this._activeIndex=e,this.activeIndexChange.emit(e)}ngOnDestroy(){this.tabListSubscription&&this.tabListSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||t)(u(ne),u(Me))};static \u0275cmp=v({type:t,selectors:[["p-accordion"]],contentQueries:function(i,n,s){if(i&1&&re(s,ft,5),i&2){let p;ae(p=se())&&(n.tabList=p)}},hostAttrs:[1,"p-element"],hostBindings:function(i,n){i&1&&b("keydown",function(p){return n.onKeydown(p)})},inputs:{multiple:[P.HasDecoratorInputTransform,"multiple","multiple",te],style:"style",styleClass:"styleClass",expandIcon:"expandIcon",collapseIcon:"collapseIcon",activeIndex:"activeIndex",selectOnFocus:[P.HasDecoratorInputTransform,"selectOnFocus","selectOnFocus",te],headerAriaLevel:"headerAriaLevel"},outputs:{onClose:"onClose",onOpen:"onOpen",activeIndexChange:"activeIndexChange"},features:[Y],ngContentSelectors:oo,decls:2,vars:4,consts:[[3,"ngClass","ngStyle"]],template:function(i,n){i&1&&(Ye(),l(0,"div",0),De(1),d()),i&2&&(oe(n.styleClass),a("ngClass","p-accordion p-component")("ngStyle",n.style))},dependencies:[Je,et],encapsulation:2,changeDetection:0})}return t})(),zi=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=F({type:t});static \u0275inj=E({imports:[k,nt,Te,ye]})}return t})();var ao={provide:Ot,useExisting:Ee(()=>gt),multi:!0},Gi={pint:/^[\d]*$/,int:/^[-]?[\d]*$/,pnum:/^[\d\.]*$/,money:/^[\d\.\s,]*$/,num:/^[-]?[\d\.]*$/,hex:/^[0-9a-f]*$/i,email:/^[a-z0-9_\.\-@]*$/i,alpha:/^[a-z_]*$/i,alphanum:/^[a-z0-9_]*$/i},_t={TAB:9,RETURN:13,ESC:27,BACKSPACE:8,DELETE:46},Qi={63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},gt=(()=>{class t{document;platformId;el;pValidateOnly;set pattern(e){this._pattern=e,e instanceof RegExp?this.regex=e:e in Gi?this.regex=Gi[e]:this.regex=/./}get pattern(){return this._pattern}ngModelChange=new W;regex=/./;_pattern;isAndroid;lastValue;constructor(e,i,n){this.document=e,this.platformId=i,this.el=n,tt(this.platformId)?this.isAndroid=T.isAndroid():this.isAndroid=!1}isNavKeyPress(e){let i=e.keyCode;return i=T.getBrowser().safari&&Qi[i]||i,i>=33&&i<=40||i==_t.RETURN||i==_t.TAB||i==_t.ESC}isSpecialKey(e){let i=e.keyCode||e.charCode;return i==9||i==13||i==27||i==16||i==17||i>=18&&i<=20||T.getBrowser().opera&&!e.shiftKey&&(i==8||i>=33&&i<=35||i>=36&&i<=39||i>=44&&i<=45)}getKey(e){let i=e.keyCode||e.charCode;return T.getBrowser().safari&&Qi[i]||i}getCharCode(e){return e.charCode||e.keyCode||e.which}findDelta(e,i){let n="";for(let s=0;s<e.length;s++)e.substr(0,s)+e.substr(s+e.length-i.length)===i&&(n=e.substr(s,e.length-i.length));return n}isValidChar(e){return this.regex.test(e)}isValidString(e){for(let i=0;i<e.length;i++)if(!this.isValidChar(e.substr(i,1)))return!1;return!0}onInput(e){if(this.isAndroid&&!this.pValidateOnly){let i=this.el.nativeElement.value,n=this.lastValue||"",s=this.findDelta(i,n),p=this.findDelta(n,i);s.length>1||!s&&!p?this.isValidString(i)||(this.el.nativeElement.value=n,this.ngModelChange.emit(n)):p||this.isValidChar(s)||(this.el.nativeElement.value=n,this.ngModelChange.emit(n)),i=this.el.nativeElement.value,this.isValidString(i)&&(this.lastValue=i)}}onKeyPress(e){if(this.isAndroid||this.pValidateOnly)return;let i=T.getBrowser(),n=this.getKey(e);if(i.mozilla&&(e.ctrlKey||e.altKey))return;if(n==17||n==18||n==13)return;let s=this.getCharCode(e),p=String.fromCharCode(s),I=!0;if(!i.mozilla&&(this.isSpecialKey(e)||!p))return;let M=this.el.nativeElement.value||"",O=e.currentTarget.selectionStart||0,Z=e.currentTarget.selectionEnd||0,ve=M.substring(0,O)+p+M.substring(Z);I=this.regex.test(ve),I||e.preventDefault()}onPaste(e){let i=e.clipboardData||this.document.defaultView.clipboardData.getData("text");if(i){let n=/\{[0-9]+\}/,s=i.getData("text");if(n.test(this.regex.toString())){if(!this.regex.test(s)){e.preventDefault();return}}else for(let p of s.toString())if(!this.regex.test(p)){e.preventDefault();return}}}validate(e){if(this.pValidateOnly){let i=this.el.nativeElement.value;if(i&&!this.regex.test(i))return{validatePattern:!1}}}static \u0275fac=function(i){return new(i||t)(u(Xe),u(yt),u(ne))};static \u0275dir=vt({type:t,selectors:[["","pKeyFilter",""]],hostAttrs:[1,"p-element"],hostBindings:function(i,n){i&1&&b("input",function(p){return n.onInput(p)})("keypress",function(p){return n.onKeyPress(p)})("paste",function(p){return n.onPaste(p)})},inputs:{pValidateOnly:[P.HasDecoratorInputTransform,"pValidateOnly","pValidateOnly",te],pattern:[P.None,"pKeyFilter","pattern"]},outputs:{ngModelChange:"ngModelChange"},features:[St([ao]),Y]})}return t})(),Zi=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=F({type:t});static \u0275inj=E({imports:[k]})}return t})();function lo(t,o){if(t&1&&m(0,"app-skeleton",0),t&2){let e=c();a("type",e.SkeletonEnum.CARD)}}function co(t,o){if(t&1&&m(0,"p-tag",11),t&2){let e=c(2);a("icon",e.PrimeIcons.CHECK)}}function mo(t,o){if(t&1&&m(0,"p-tag",12),t&2){let e=c(2);a("icon",e.PrimeIcons.TIMES)}}function po(t,o){if(t&1){let e=w();l(0,"form",2),b("ngSubmit",function(){y(e);let n=c();return C(n.onSubmit())}),l(1,"div",3),m(2,"label",4)(3,"input",5)(4,"small",6),d(),l(5,"div",7)(6,"div",8),m(7,"label",9)(8,"input",10)(9,"small",6),f(10,co,1,1,"p-tag",11)(11,mo,1,1,"p-tag",12),d(),l(12,"div",8),m(13,"label",13)(14,"input",14)(15,"small",6),d()(),l(16,"div",3),m(17,"p-button",15),d()()}if(t&2){let e=c();a("formGroup",e.form),r(2),a("required",e.usernameField),r(2),a("errors",e.usernameField.errors)("touched",e.usernameField.touched)("dirty",e.usernameField.dirty),r(3),a("required",e.emailField),r(2),a("errors",e.emailField.errors)("touched",e.emailField.touched)("dirty",e.emailField.dirty),r(),g(10,e.emailVerifiedAtField.value?10:-1),r(),g(11,e.emailVerifiedAtField.value?-1:11),r(2),a("required",e.phoneField),r(2),a("errors",e.phoneField.errors)("touched",e.phoneField.touched)("dirty",e.phoneField.dirty),r(2),a("icon",e.PrimeIcons.SAVE)("loading",e.coreService.isLoading)}}var Wi=(()=>{let o=class o{constructor(i,n,s,p,I,M,O,Z){this.activatedRoute=i,this.authService=n,this.authHttpService=s,this.breadcrumbService=p,this.cataloguesHttpService=I,this.coreService=M,this.formBuilder=O,this.messageDialogService=Z,this.PrimeIcons=U,this.SkeletonEnum=ce,this.form=this.newForm}onExit(){return Se(this,null,function*(){return this.form.touched&&this.form.dirty,!0})}ngOnInit(){this.getUserInformation()}get newForm(){return this.formBuilder.group({email:[null,[h.required,h.email]],emailVerifiedAt:[{value:null,disabled:!0}],phone:[null,[]],username:[null,[h.required,h.minLength(3),h.maxLength(20)]]})}onSubmit(){this.form.valid?this.updateUserInformation(this.form.value):this.form.markAllAsTouched()}getUserInformation(){this.authHttpService.getUserInformation().subscribe(i=>{this.form.patchValue(i)})}updateUserInformation(i){this.authHttpService.updateUserInformation(i).subscribe(n=>{this.form.reset(n),this.authService.auth=n})}get emailField(){return this.form.controls.email}get emailVerifiedAtField(){return this.form.controls.emailVerifiedAt}get phoneField(){return this.form.controls.phone}get usernameField(){return this.form.controls.username}};o.\u0275fac=function(n){return new(n||o)(u(ke),u(me),u(Ue),u(V),u(de),u(N),u(_e),u(Be))},o.\u0275cmp=v({type:o,selectors:[["app-user-information"]],decls:2,vars:2,consts:[[3,"type"],[1,"p-fluid",3,"formGroup"],[1,"p-fluid",3,"ngSubmit","formGroup"],[1,"field"],["appLabel","","for","username","label","Usuario",3,"required"],["pInputText","","type","text","id","username","formControlName","username","pKeyFilter","alphanum"],["appErrorMessage","",3,"errors","touched","dirty"],[1,"formgrid","grid"],[1,"field","xl:col-6","lg:col-6","md:col-6","sm:col-12"],["appLabel","","for","email","label","Correo Electr\xF3nico",3,"required"],["pInputText","","type","email","id","email","formControlName","email",1,"mb-1"],["value","Verified Email","severity","success",3,"icon"],["value","Correo no Verificado","severity","danger",3,"icon"],["appLabel","","for","phone","label","Tel\xE9fono",3,"required"],["pInputText","","type","text","id","phone","formControlName","phone"],["type","submit","label","Actualizar",3,"icon","loading"]],template:function(n,s){n&1&&f(0,lo,1,1,"app-skeleton",0)(1,po,18,17,"form",1),n&2&&(g(0,s.coreService.isLoading?0:-1),r(),g(1,s.coreService.isLoading?-1:1))},dependencies:[ue,z,G,pe,fe,he,Ie,ge,be,$,Q,gt,Ge]});let t=o;return t})();function fo(t,o){if(t&1&&m(0,"app-skeleton",1),t&2){let e=c();a("type",e.SkeletonEnum.CARD)}}function ho(t,o){if(t&1&&(l(0,"div"),_(1),d()),t&2){let e=c(3);r(),A(e.ethnicOriginField.value.name)}}function _o(t,o){if(t&1&&f(0,ho,2,1,"div"),t&2){let e=c(2);g(0,e.ethnicOriginField.value?0:-1)}}function go(t,o){if(t&1&&_(0),t&2){let e=o.$implicit;x(" ",e.name," ")}}function bo(t,o){if(t&1&&(l(0,"div"),_(1),d()),t&2){let e=c(3);r(),A(e.sexField.value.name)}}function Io(t,o){if(t&1&&f(0,bo,2,1,"div"),t&2){let e=c(2);g(0,e.sexField.value?0:-1)}}function vo(t,o){if(t&1&&_(0),t&2){let e=o.$implicit;x(" ",e.name," ")}}function yo(t,o){if(t&1&&(l(0,"div"),_(1),d()),t&2){let e=c(3);r(),A(e.genderField.value.name)}}function Co(t,o){if(t&1&&f(0,yo,2,1,"div"),t&2){let e=c(2);g(0,e.genderField.value?0:-1)}}function xo(t,o){if(t&1&&_(0),t&2){let e=o.$implicit;x(" ",e.name," ")}}function To(t,o){if(t&1&&(l(0,"div"),_(1),d()),t&2){let e=c(3);r(),A(e.bloodTypeField.value.name)}}function So(t,o){if(t&1&&f(0,To,2,1,"div"),t&2){let e=c(2);g(0,e.bloodTypeField.value?0:-1)}}function Eo(t,o){if(t&1&&_(0),t&2){let e=o.$implicit;x(" ",e.name," ")}}function Fo(t,o){if(t&1&&(l(0,"div"),_(1),d()),t&2){let e=c(3);r(),A(e.maritalStatusField.value.name)}}function wo(t,o){if(t&1&&f(0,Fo,2,1,"div"),t&2){let e=c(2);g(0,e.maritalStatusField.value?0:-1)}}function Ao(t,o){if(t&1&&_(0),t&2){let e=o.$implicit;x(" ",e.name," ")}}function Po(t,o){if(t&1){let e=w();l(0,"form",3),b("ngSubmit",function(){y(e);let n=c();return C(n.onSubmitProfile())}),l(1,"div",4)(2,"div",5),m(3,"p-avatar",6),l(4,"p-fileUpload",7,0),b("uploadHandler",function(n){y(e);let s=Le(5),p=c();return C(p.uploadAvatar(n,s))}),d()(),l(6,"div",8),m(7,"label",9)(8,"p-dropdown",10)(9,"small",11),d(),l(10,"div",8),m(11,"label",12)(12,"input",13)(13,"small",11),d()(),l(14,"div",4)(15,"div",14),m(16,"label",15)(17,"input",16)(18,"small",11),d(),l(19,"div",14),m(20,"label",17)(21,"input",18)(22,"small",11),d()(),l(23,"div",4)(24,"div",14),m(25,"label",19)(26,"p-calendar",20)(27,"small",11),d(),l(28,"div",14),m(29,"label",21),l(30,"p-dropdown",22),f(31,_o,1,1,"ng-template",23)(32,go,1,1,"ng-template",24),d(),m(33,"small",11),d()(),l(34,"div",4)(35,"div",14),m(36,"label",25),l(37,"p-dropdown",26),f(38,Io,1,1,"ng-template",23)(39,vo,1,1,"ng-template",24),d(),m(40,"small",11),d(),l(41,"div",14),m(42,"label",27),l(43,"p-dropdown",28),f(44,Co,1,1,"ng-template",23)(45,xo,1,1,"ng-template",24),d(),m(46,"small",11),d()(),l(47,"div",4)(48,"div",14),m(49,"label",29),l(50,"p-dropdown",30),f(51,So,1,1,"ng-template",23)(52,Eo,1,1,"ng-template",24),d(),m(53,"small",11),d(),l(54,"div",14),m(55,"label",31),l(56,"p-dropdown",32),f(57,wo,1,1,"ng-template",23)(58,Ao,1,1,"ng-template",24),d(),m(59,"small",11),d()(),l(60,"div",33),m(61,"p-button",34),d()()}if(t&2){let e=c();a("formGroup",e.form),r(3),a("image",e.HOST_URL+e.avatarField.value),r(),a("chooseIcon",e.PrimeIcons.UPLOAD)("auto",!0)("maxFileSize",1024e3)("customUpload",!0),r(3),a("required",e.identificationTypeField),r(),a("options",e.identificationTypes)("filter",!0),r(),a("errors",e.identificationTypeField.errors)("touched",e.identificationTypeField.touched)("dirty",e.identificationTypeField.dirty),r(2),a("required",e.identificationField),r(2),a("errors",e.identificationField.errors)("touched",e.identificationField.touched)("dirty",e.identificationField.dirty),r(3),a("required",e.nameField),r(2),a("errors",e.nameField.errors)("touched",e.nameField.touched)("dirty",e.nameField.dirty),r(2),a("required",e.lastnameField),r(2),a("errors",e.lastnameField.errors)("touched",e.lastnameField.touched)("dirty",e.lastnameField.dirty),r(3),a("required",e.birthdateField),r(),a("firstDayOfWeek",1)("showIcon",!0),r(),a("errors",e.birthdateField.errors)("touched",e.birthdateField.touched)("dirty",e.birthdateField.dirty),r(2),a("required",e.ethnicOriginField),r(),a("options",e.ethnicOrigins)("filter",!0),r(3),a("errors",e.ethnicOriginField.errors)("touched",e.ethnicOriginField.touched)("dirty",e.ethnicOriginField.dirty),r(3),a("required",e.sexField),r(),a("options",e.sexes)("filter",!0),r(3),a("errors",e.sexField.errors)("touched",e.sexField.touched)("dirty",e.sexField.dirty),r(2),a("required",e.genderField),r(),a("options",e.genders)("filter",!0),r(3),a("errors",e.genderField.errors)("touched",e.genderField.touched)("dirty",e.genderField.dirty),r(3),a("required",e.bloodTypeField),r(),a("options",e.bloodTypes)("filter",!0),r(3),a("errors",e.bloodTypeField.errors)("touched",e.bloodTypeField.touched)("dirty",e.bloodTypeField.dirty),r(2),a("required",e.maritalStatusField),r(),a("options",e.maritalStatus)("filter",!0),r(3),a("errors",e.maritalStatusField.errors)("touched",e.maritalStatusField.touched)("dirty",e.maritalStatusField.dirty),r(2),a("icon",e.PrimeIcons.SAVE)("loading",e.coreService.isLoading)}}var Yi=(()=>{let o=class o{constructor(i,n,s,p,I,M,O,Z,ve){this.activatedRoute=i,this.authService=n,this.authHttpService=s,this.breadcrumbService=p,this.cataloguesHttpService=I,this.coreService=M,this.formBuilder=O,this.messageDialogService=Z,this.messageService=ve,this.PrimeIcons=U,this.SkeletonEnum=ce,this.HOST_URL=Lt.API_URL,this.dateFormat=new kt,this.bloodTypes=[],this.ethnicOrigins=[],this.genders=[],this.identificationTypes=[],this.maritalStatus=[],this.sexes=[],this.form=this.newForm,this.identificationField.valueChanges.subscribe(tn=>{tn.code===He.IDENTIFICATION?this.identificationField.setValidators([h.required,h.minLength(10),h.maxLength(10)]):this.identificationField.clearValidators()})}onExit(){return this.form.touched&&this.form.dirty&&this.messageDialogService.questionOnExit().subscribe(),!0}ngOnInit(){this.loadBloodTypes(),this.loadEthnicOrigins(),this.loadGenders(),this.loadIdentificationTypes(),this.loadMaritalStatus(),this.loadSexes(),this.getProfile()}get newForm(){return this.formBuilder.group({avatar:[null],birthdate:[null,[Zt.max(new Date)]],bloodType:[null,[]],ethnicOrigin:[null,[]],gender:[null,[]],identification:[null,[h.required]],identificationType:[null,[h.required]],lastname:[null,[h.required]],maritalStatus:[null,[]],name:[null,[h.required]],sex:[null,[]]})}onSubmitProfile(){this.birthdateField.value&&this.birthdateField.setValue(this.dateFormat.transform(this.birthdateField.value)),this.form.valid?this.updateProfile(this.form.value):(this.form.markAllAsTouched(),this.messageService.errorsFields())}getProfile(){this.authHttpService.getProfile().subscribe(i=>{this.form.patchValue(i),this.birthdateField.value&&this.birthdateField.setValue(new Date(this.birthdateField.value))})}loadBloodTypes(){this.bloodTypes=this.cataloguesHttpService.findByType(H.USERS_BLOOD_TYPE)}loadEthnicOrigins(){this.ethnicOrigins=this.cataloguesHttpService.findByType(H.USERS_ETHNIC_ORIGIN)}loadGenders(){this.genders=this.cataloguesHttpService.findByType(H.USERS_GENDER)}loadIdentificationTypes(){this.identificationTypes=this.cataloguesHttpService.findByType(H.USERS_IDENTIFICATION_TYPE)}loadMaritalStatus(){this.maritalStatus=this.cataloguesHttpService.findByType(H.USERS_MARITAL_STATUS)}loadSexes(){this.sexes=this.cataloguesHttpService.findByType(H.USERS_SEX)}updateProfile(i){this.authHttpService.updateProfile(i).subscribe(n=>{this.getProfile()})}uploadAvatar(i,n){let s=new FormData;s.append("avatar",i.files[0]),this.authHttpService.uploadAvatar(this.authService.auth.id,s).subscribe(p=>{n.clear(),this.authService.avatar=p.avatar,this.getProfile()},p=>n.clear())}get avatarField(){return this.form.controls.avatar}get bloodTypeField(){return this.form.controls.bloodType}get birthdateField(){return this.form.controls.birthdate}get ethnicOriginField(){return this.form.controls.ethnicOrigin}get genderField(){return this.form.controls.gender}get identificationField(){return this.form.controls.identification}get identificationTypeField(){return this.form.controls.identificationType}get lastnameField(){return this.form.controls.lastname}get maritalStatusField(){return this.form.controls.maritalStatus}get nameField(){return this.form.controls.name}get sexField(){return this.form.controls.sex}};o.\u0275fac=function(n){return new(n||o)(u(ke),u(me),u(Ue),u(V),u(de),u(N),u(_e),u(Be),u(R))},o.\u0275cmp=v({type:o,selectors:[["app-user-profile"]],decls:2,vars:2,consts:[["uploadFiles",""],[3,"type"],[1,"p-fluid",3,"formGroup"],[1,"p-fluid",3,"ngSubmit","formGroup"],[1,"formgrid","grid"],[1,"field","xl:col-2","lg:col-2","md:col-4","sm:col-12","text-center"],["styleClass","mr-2","size","xlarge","shape","circle",3,"image"],["chooseLabel","Cargar","uploadLabel","Subir Imagen","name","avatar","mode","basic","accept","image/*",3,"uploadHandler","chooseIcon","auto","maxFileSize","customUpload"],[1,"field","xl:col-5","lg:col-5","md:col-4","sm:col-12"],["appLabel","","for","identificationType","label","Tipo de Documento",3,"required"],["id","identificationType","formControlName","identificationType","dataKey","id","optionLabel","name","filterBy","name","placeholder","Seleccione...",3,"options","filter"],["appErrorMessage","",3,"errors","touched","dirty"],["appLabel","","for","identification","label","N\xFAmero de Documento",3,"required"],["pInputText","","type","text","id","identification","formControlName","identification"],[1,"field","xl:col-6","lg:col-6","md:col-6","sm:col-12"],["appLabel","","for","name","label","Nombres",3,"required"],["pInputText","","type","text","id","name","formControlName","name"],["appLabel","","for","lastname","label","Apellidos",3,"required"],["pInputText","","type","text","id","lastname","formControlName","lastname"],["appLabel","","for","birthdate","label","Fecha de Nacimiento: (yyyy-mm-dd)",3,"required"],["id","birthdate","formControlName","birthdate","dateFormat","yy-mm-dd",3,"firstDayOfWeek","showIcon"],["appLabel","","for","ethnicOrigin","label","Etnia",3,"required"],["id","ethnicOrigin","formControlName","ethnicOrigin","dataKey","id","optionLabel","name","filterBy","name","placeholder","Seleccione...",3,"options","filter"],["pTemplate","selectedItem"],["pTemplate","item"],["appLabel","","for","sex","label","Sexo",3,"required"],["id","sex","formControlName","sex","dataKey","id","optionLabel","name","filterBy","name","placeholder","Seleccione...",3,"options","filter"],["appLabel","","for","gender","label","G\xE9nero",3,"required"],["id","gender","formControlName","gender","dataKey","id","optionLabel","name","filterBy","name","placeholder","Seleccione...",3,"options","filter"],["appLabel","","for","bloodType","label","Tipo de Sangre",3,"required"],["id","bloodType","formControlName","bloodType","dataKey","id","optionLabel","name","filterBy","name","placeholder","Seleccione...",3,"options","filter"],["appLabel","","for","maritalStatus","label","Estado Civil",3,"required"],["id","maritalStatus","formControlName","maritalStatus","dataKey","id","optionLabel","name","filterBy","name","placeholder","Seleccione...",3,"options","filter"],[1,"field"],["type","submit","label","Actualizar",3,"icon","loading"]],template:function(n,s){n&1&&f(0,fo,1,1,"app-skeleton",1)(1,Po,62,62,"form",2),n&2&&(g(0,s.coreService.isLoading?0:-1),r(),g(1,s.coreService.isLoading?-1:1))},dependencies:[ue,z,G,pe,fe,he,Ie,ge,be,D,$,ei,$e,Q,Ai,ui]});let t=o;return t})();function Lo(t,o){t&1&&(m(0,"i",2),l(1,"h3"),_(2,"Informaci\xF3n de Usuario"),d())}function Mo(t,o){if(t&1&&m(0,"small",3)(1,"p-divider")(2,"app-user-information"),t&2){let e=c();a("innerHTML",e.messageService.requiredFields,Fe)}}function ko(t,o){t&1&&(m(0,"i",4),l(1,"h3"),_(2,"Cambiar Contrase\xF1a"),d())}function Vo(t,o){t&1&&m(0,"app-password-change")}function Bo(t,o){t&1&&(m(0,"i",5),l(1,"h3"),_(2,"Perfil"),d())}function Ho(t,o){if(t&1&&m(0,"small",3)(1,"p-divider")(2,"app-user-profile"),t&2){let e=c();a("innerHTML",e.messageService.requiredFields,Fe)}}var Xi=(()=>{let o=class o{constructor(i,n){this.breadcrumbService=i,this.messageService=n,this.breadcrumbService.setItems([{label:j.PROFILE}])}ngOnInit(){}};o.\u0275fac=function(n){return new(n||o)(u(V),u(R))},o.\u0275cmp=v({type:o,selectors:[["app-profile"]],decls:10,vars:0,consts:[["pTemplate","header"],["pTemplate","content"],[1,"pi","pi-user-edit","mr-2"],[3,"innerHTML"],[1,"pi","pi-key","mr-2"],[1,"pi","pi-id-card","mr-2"]],template:function(n,s){n&1&&(l(0,"p-accordion")(1,"p-accordionTab"),f(2,Lo,3,0,"ng-template",0)(3,Mo,3,1,"ng-template",1),d(),l(4,"p-accordionTab"),f(5,ko,3,0,"ng-template",0)(6,Vo,1,0,"ng-template",1),d(),l(7,"p-accordionTab"),f(8,Bo,3,0,"ng-template",0)(9,Ho,3,1,"ng-template",1),d()())},dependencies:[wi,D,je,ht,ft,Wi,Yi]});let t=o;return t})();var Oo=[{path:"",component:Ui},{path:"profile",component:Xi},{path:":id",component:ji,canDeactivate:[Rt]}],Ji=(()=>{let o=class o{};o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=F({type:o}),o.\u0275inj=E({imports:[le.forChild(Oo),le]});let t=o;return t})();var bt=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=F({type:t});static \u0275inj=E({imports:[k,le,Re,Ce,Bt,ye,le,Ce,ye]})}return t})();var en=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=F({type:t});static \u0275inj=E({imports:[k,xe,bt,Ht,Te,xe,bt]})}return t})();var Cs=(()=>{let o=class o{};o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=F({type:o}),o.\u0275inj=E({imports:[k,Ji,Ut,Hi,Di,Fi,Bi,xe,Yt,ti,Jt,yi,ii,Mi,Nt,Zi,Ti,hi,oi,zt,jt,Re,mi,bi,pi,Ce,Si,Wt,zi,Vi,en,vi,Ii,Pi,fi,gi,Qt]});let t=o;return t})();export{Cs as UserModule};
