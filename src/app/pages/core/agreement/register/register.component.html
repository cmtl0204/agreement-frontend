@if (form.value) {
  <p-stepper orientation="horizontal" [linear]="true" [activeStep]="activeStep">
    <p-stepperPanel header="Convenio">
      <ng-template
        pTemplate="content"
        let-nextCallback="nextCallback">
        <p-toolbar>
          <div class="p-toolbar-group-left">
            <app-header-form
              label="Registro"
              [icon]="PrimeIcons.PENCIL"/>
          </div>

          <div class="p-toolbar-group-right">
            <app-form-button-action
              labelSubmitButton="Siguiente"
              (submit)="validateFormAgreement(nextCallback)"
              [iconSubmitButton]="PrimeIcons.ARROW_RIGHT"
              [isVisibleCancelButton]="false"
            />
          </div>
        </p-toolbar>

        <div class="p-fluid grid">
          <p-panel header="Datos Básicos" class="col-12">
            <app-basic-data
              [formInput]="form.value"
              (formErrorsOutput)="basicDataErrors=$event"
              (formOutput)="save($event)"/>
          </p-panel>

          <p-panel header="Fechas del Convenio" class="col-12">
            <app-agreement-date
              [formInput]="form.value"
              (formErrorsOutput)="agreementDateErrors=$event"
              (formOutput)="save($event)"/>
          </p-panel>

          <p-panel header="Administrador del Convenio" class="col-12">
            <app-agreement-administrator
              class="col-12"
              [formInput]="form.value"
              (formErrorsOutput)="agreementAdministratorErrors=$event"
              (formOutput)="save($event)"/>
          </p-panel>

          <p-panel header="Comparecientes" class="col-12">
            <app-appearer
              [formInput]="form.value"
              (formErrorsOutput)="appearerErrors=$event"
              (formOutput)="save($event)"/>
          </p-panel>
        </div>

        <p-toolbar>
          <div class="p-toolbar-group-left">
            <app-header-form
              label="Registro"
              [icon]="PrimeIcons.PENCIL"/>
          </div>

          <div class="p-toolbar-group-right">
            <app-form-button-action
              labelSubmitButton="Siguiente"
              (submit)="validateFormAgreement(nextCallback)"
              [iconSubmitButton]="PrimeIcons.ARROW_RIGHT"
              [isVisibleCancelButton]="false"
            />
          </div>
        </p-toolbar>
      </ng-template>
    </p-stepperPanel>

    <p-stepperPanel header="Obligaciones">
      <ng-template
        pTemplate="content"
        let-prevCallback="prevCallback"
        let-nextCallback="nextCallback">

        <p-toolbar>
          <div class="p-toolbar-group-left">
            <app-header-form
              label="Registro"
              [icon]="PrimeIcons.PENCIL"/>
          </div>

          <div class="p-toolbar-group-right">
            <app-form-button-action
              (submit)="validateFormObligation(nextCallback)"
              (cancel)="prevCallback.emit()"
              labelSubmitButton="Siguiente"
              labelCancelButton="Regresar"
              [iconSubmitButton]="PrimeIcons.ARROW_RIGHT"
              [isVisibleCancelButton]="true"
            />
          </div>
        </p-toolbar>

        <app-obligation
          [formInput]="form.value"
          (formErrorsOutput)="obligationErrors=$event"
          (formOutput)="save($event)"/>

        <p-toolbar>
          <div class="p-toolbar-group-left">
            <app-header-form
              label="Registro"
              [icon]="PrimeIcons.PENCIL"/>
          </div>

          <div class="p-toolbar-group-right">
            <app-form-button-action
              (submit)="nextCallback.emit()"
              (cancel)="prevCallback.emit()"
              labelSubmitButton="Siguiente"
              labelCancelButton="Regresar"
              [iconSubmitButton]="PrimeIcons.ARROW_RIGHT"
              [isVisibleCancelButton]="true"
            />
          </div>
        </p-toolbar>
      </ng-template>
    </p-stepperPanel>

    <p-stepperPanel header="Financiamiento">
      <ng-template
        pTemplate="content"
        let-prevCallback="prevCallback"
        let-nextCallback="nextCallback">

        <p-toolbar>
          <div class="p-toolbar-group-left">
            <app-header-form
              label="Registro"
              [icon]="PrimeIcons.PENCIL"/>
          </div>

          <div class="p-toolbar-group-right">
            <app-form-button-action
              (submit)="onSubmit(nextCallback);"
              (cancel)="prevCallback.emit()"
              labelSubmitButton="Guardar"
              labelCancelButton="Regresar"
              [isVisibleCancelButton]="true"
            />
          </div>
        </p-toolbar>

        <app-financing
          (formOutput)="save($event)"
          [formInput]="form.value"
          (formErrorsOutput)="financingErrors=$event"
        />
      </ng-template>
    </p-stepperPanel>

    <p-stepperPanel header="Documentación">
      <ng-template
        pTemplate="content"
        let-prevCallback="prevCallback"
        let-nextCallback="nextCallback">
        <div class="flex flex-column ">
          <div
            class="border-2 border-dashed surface-border border-round surface-ground flex-auto flex justify-content-center align-items-center font-medium">
            <app-document
              (formOutput)="save($event)"
              (nextOutput)="nextCallback.emit()"
              (prevOutput)="prevCallback.emit()"/>
          </div>
        </div>
      </ng-template>
    </p-stepperPanel>

    <p-stepperPanel header="Adendas">
      <ng-template pTemplate="content" let-prevCallback="prevCallback" let-index="index">
        <div class="flex flex-column ">
          <div
            class="border-2 border-dashed surface-border border-round surface-ground flex-auto flex justify-content-center align-items-center font-medium">
            <app-addendum
              (formOutput)="save($event)"
              (prevOutput)="prevCallback.emit()"/>
          </div>
        </div>
      </ng-template>
    </p-stepperPanel>
  </p-stepper>
}
{{ this.form.value | json }}

<p-confirmDialog key="confirmDialog"/>
